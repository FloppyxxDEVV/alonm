(()=>{var e={9574:function(e,t,i){var s=i(2961);e.exports=function(e){return function t(i){return 0==arguments.length||s(i)?t:e.apply(this,arguments)}}},8864:function(e,t,i){var s=i(9574),a=i(2961);e.exports=function(e){return function t(i,o){switch(arguments.length){case 0:return t;case 1:return a(i)?t:s(function(t){return e(i,t)});default:return a(i)&&a(o)?t:a(i)?s(function(t){return e(t,o)}):a(o)?s(function(t){return e(i,t)}):e(i,o)}}}},8809:function(e,t,i){var s=i(9574),a=i(8864),o=i(2961);e.exports=function(e){return function t(i,n,r){switch(arguments.length){case 0:return t;case 1:return o(i)?t:a(function(t,s){return e(i,t,s)});case 2:return o(i)&&o(n)?t:o(i)?a(function(t,i){return e(t,n,i)}):o(n)?a(function(t,s){return e(i,t,s)}):s(function(t){return e(i,n,t)});default:return o(i)&&o(n)&&o(r)?t:o(i)&&o(n)?a(function(t,i){return e(t,i,r)}):o(i)&&o(r)?a(function(t,i){return e(t,n,i)}):o(n)&&o(r)?a(function(t,s){return e(i,t,s)}):o(i)?s(function(t){return e(t,n,r)}):o(n)?s(function(t){return e(i,t,r)}):o(r)?s(function(t){return e(i,n,t)}):e(i,n,r)}}}},907:function(e){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},8794:function(e){e.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},2961:function(e){e.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},2643:function(e,t,i){var s=i(8864),a=i(4526);e.exports=s(function(e,t){return a(function(e,t,i){return t},e,t)})},4526:function(e,t,i){var s=i(8809),a=i(8794),o=i(4196);e.exports=s(function e(t,i,s){return o(function(i,s,o){return a(s)&&a(o)?e(t,s,o):t(i,s,o)},i,s)})},4196:function(e,t,i){var s=i(8809),a=i(907);e.exports=s(function(e,t,i){var s,o={};for(s in t)a(s,t)&&(o[s]=a(s,i)?e(s,t[s],i[s]):t[s]);for(s in i)a(s,i)&&!a(s,o)&&(o[s]=i[s]);return o})},6892:function(e,t,i){"use strict";i.d(t,{Z:()=>w});var s=i(2643),a=i.n(s),o=i(7087),n=i(8356),r=i(6172);let l="",d="",c="",u="",h="",g=(0,r.zd)()&&!(0,r.n0)()&&window.top?window.top:window;function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.document.querySelector('link[rel="canonical"]'),i=(0,r.bq)("property","og:url",e),s=(0,r.bq)("property","og:image",e),a=(0,n.vh)((0,r.bq)("property","og:title",e)),o="";return{articleUrl:t&&t.href.includes(e.location.host)?t.href:i&&i.includes(e.location.host)?i:e&&e.location.href||"",articleImage:s,articleTitle:a}}try{let e=m(g);l=e.articleUrl,d=e.articleImage,c=e.articleTitle,u=g&&g.location.host.replace(/^www\./,"").replace(/^(m\.)/,""),h=`${g.location.protocol}//[url]`}catch(t){let e=m();l=e.articleUrl,d=e.articleImage,c=e.articleTitle,u=window&&window.location.host.replace(/^www\./,"").replace(/^(m\.)/,""),h=`${window.location.protocol}//[url]`}let f={apiKey:"",articleId:l,amp:!1,sdk:!1,customTranslationUrl:"",endlessMode:!1,singlePage:!1,globalRecommendations:!1,host:u,img:d,language:document.documentElement.lang||"en",link:h,recommendationsWideImages:!1,title:c,url:l,wordpressSync:!1,ads:{enabled:!0},comments:{enabled:!0,useIframe:!0,hideCommentInputBoxWithButton:!1,transliteration:{enabledByDefault:!1,language:"en"}},emotes:{disable:[],enabled:!0},powerbar:{enabled:!0},sharebar:{enabled:!0},subscribe:{enabled:!0},audio:{enabled:!0},quiz:{enabled:!0}};try{if(g.document.referrer){let e=g.document.createElement("a");e.href=g.document.referrer,f.refHost=e.hostname}}catch(t){let e=document.createElement("a");e.href=document.referrer,f.refHost=e.hostname}let p=window.VUUKLE_CONFIG||window._config_setup;if(!(p instanceof Object)&&("object"!=typeof p||Array.isArray(p)||null===p))throw Error(`\u{26A0}\u{FE0F}[VUUKLE] VUUKLE_CONFIG can't be found or it's not valid`);try{new URL(p.url)}catch(e){delete p.url}if(p.title&&(p.title=(0,r.vh)(p.title)),"string"==typeof p.host&&(p.host=p.host.replace(/https?\:\/\//g,"").replace(/^www\./,"").replace(/^(m\.)/,"")),"string"==typeof p.link&&(p.link=p.link.replace("[protocol]",`${window.location.protocol}//`)),!p.apiKey)throw Error("âš  [VUUKLE] API key is missing in the VUUKLE_CONFIG");p.articleId&&1!==p.articleId&&"1"!==p.articleId||(p.articleId=p.url||f.articleId),"function"==typeof p.comments?.auth?.sso?.onClick&&o.Z.setSSOInfo(!0),p.tags&&Array.isArray(p.tags)&&(p.tags=p.tags.join(",")),p.tags&&"string"!=typeof p.tags&&(p.tags="");try{let e=new URLSearchParams(window.location.search).get("skipQuizzly");"true"===e&&(p.quiz?p.quiz.enabled=!1:p.quiz={enabled:!1})}catch(e){(0,n.ZV)("log","Error parsing search params for disabling Quizzly")}let b=a()(p,f);window.VUUKLE_CONFIG&&(window.VUUKLE_CONFIG=b),window._config_setup&&(window._config_setup=b);let w=b},5864:function(e,t,i){"use strict";i.d(t,{g7:()=>a,ww:()=>o,xw:()=>s});let s={"fake-key":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{insert:"before",selector:".cat_img1",hideAdLabel:!0},"vuukle-ad-4":{insert:"inside",selector:()=>document.querySelector(".cat_img1")},"vuukle-ad-5":{insert:"after",selector:()=>document.querySelector(".cat_img")||document.querySelectorAll(".cat_img1")[0]},"vuukle-ad-6":{stickyAd:!0}},customCSS:{"vuukle-ad-4":"width: 666px; height: 666px;"},blockKeywords:["blood","gore","destruction"]},"fake-key-2":{trafficExchangeRows:4},"cc5c4d9e-1531-4a59-98ac-4e4b018f4e84":{externalConfig:!0},"8f291d07-5577-46be-ae2e-b4782cc3a034":{externalConfig:!0},"cd1839ec-6b95-4656-8275-1f7217624c25":{externalConfig:!0},"de0e13e8-531d-43ce-a154-0cc6451118ef":{externalConfig:!0},"0e3c0415-8433-4bf7-9ed3-88671cc02e33":{externalConfig:!0},"b7257a34-e29d-4c2c-b84d-c84db5990876":{targets:{default:{},secondDefault:{}}},"b1e9b4de-dc94-461c-b12b-89c7da44452b":{externalConfig:!0},"52036386-dc13-49cd-93c5-f4f9b965e3de":{targets:{default:{},secondDefault:{}}},"456e6e4f-b26d-43be-9bfa-6b977779fd06":{externalConfig:!0},"af76e530-24a0-4452-9c07-71f255ce0b48":{externalConfig:!0},"75f932c6-b01d-490e-bae9-2a145b13e07d":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-8":{insert:"after",selector:"#sports_article_writeup > p:first-of-type",adUnitGeos:["CN"]}}},"19408c72-00ea-4b57-9404-11a5c402347d":{targets:{default:{},secondDefault:{},"vuukle-ad-16":{},"vuukle-ad-3":{}}},"03538d2f-71cb-43bd-ae9d-2a54e79fa485":{externalConfig:!0,compactQuizzly:!0},"bc0e08e5-de64-467f-9734-9f91d08bf156":{ads:!1,compactQuizzly:!0},"02bf6939-9a29-48d7-bb91-7ed2e2253b49":{externalConfig:!0},"efc2a3e8-20a2-4926-98fe-7cda901acd6d":{externalConfig:!0},"3a1799f0-d1e4-4d9c-a9bc-85ef64ca99bb":{externalConfig:!0},"62fe2bc2-4db6-4d31-a4b5-5d498ccbe80d":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{}}},"3452da96-daaa-42ff-9bc8-3c135dbc7d23":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{}}},"70691e3b-1c6c-491c-8209-b813aeed2f57":{externalConfig:!0},"4c84223a-94bf-47cd-9aa8-ba5e91874df4":{externalConfig:!0},"c910cb42-e15e-4ea5-b571-cc8ce018681d":{externalConfig:!0},"ceccf8f6-9d1c-41e6-9a95-3addc14a3d27":{externalConfig:!0},"8dcad33b-ae75-4338-97c8-787e48248fe1":{externalConfig:!0},"6278c65e-86ab-454e-b8a7-611da3adba57":{externalConfig:!0},"be7b324d-fb59-411f-a504-dc616ce96b5e":{externalConfig:!0},"3a4037f9-61aa-4d84-a31b-0ec8aa0f0f3a":{externalConfig:!0},"e5baaad6-2cbb-4bf5-9087-86a3bda4d2ab":{externalConfig:!0},"4a03593d-3c83-4e2f-b391-2d9ceeb2f1ac":{externalConfig:!0},"5f9ec46f-8406-4c61-97cc-205f813fdf66":{externalConfig:!0},"fc82625a-e20a-4130-88a5-d07aaa5359da":{targets:{default:{}}},"33c2d442-2a4a-4249-b721-badaa60a1da4":{targets:{default:{}}},"e139add8-761d-4f99-b843-fb69a2db83bf":{targets:{default:{}}},"0f8151a9-0f88-4732-8b7e-b5b0e4b1417e":{externalConfig:!0},"ce56389c-23a7-4874-a8ae-971a18a84355":{externalConfig:!0},"841fb3e5-977f-4e2e-be39-fae608323cc5":{externalConfig:!0},"d59ac8ae-352a-45d3-bd28-087702e2334c":{externalConfig:!0},"d4ff715a-b8ff-4dd9-86d1-d794cc51a865":{externalConfig:!0},"61f6b959-351b-4a5f-8371-7bfbcb7f33f2":{targets:{default:{},"vuukle-ad-3":{hideAdLabel:!0}}},"e0ec1b7e-b701-4297-b283-30cba62bc13d":{externalConfig:!0},"d234188b-87e4-4033-98c3-c3f86d007de2":{externalConfig:!0},"43be4c85-8242-45c6-84d2-7ec426d8fd34":{targets:{default:{},"vuukle-ad-3":{insert:"inside",selector:"#adSlot-0",hideAdLabel:!0},"vuukle-ad-4":{}}},"b919eaf5-d0c8-4b27-a692-58b6e26f9f1b":{targets:{default:{},"vuukle-ad-3":{},"vuukle-ad-4":{},"vuukle-ad-5":{},"vuukle-ad-6":{}}},"716a8af7-beeb-4fe5-9d57-8c467fb83eb4":{targets:{default:{},"vuukle-ad-3":{}}},"8eafc07f-8a53-4dfa-8185-8be6b109d682":{externalConfig:!0},"78f75f1e-1377-4716-9559-5915ec1c570b":{targets:{default:{},"vuukle-ad-3":{}}},"723182a6-c9d2-4dad-83c7-b83b272390df":{targets:{default:{}},externalConfig:!0},"2a65e0fb-d42a-494e-b1a9-8c518b7e4a51":{externalConfig:!0},"e34028fa-a74d-4840-a3ad-1571088e224d":{externalConfig:!0},"7f7c8cb3-6bba-4f41-9c6b-4eba71594c34":{targets:{default:{},"vuukle-ad-3":{},"vuukle-ad-4":{},"vuukle-ad-5":{},"vuukle-ad-6":{},"vuukle-ad-10":{},"vuukle-ad-11":{}}},"1da04a0e-e770-4351-a6d3-8d072a7de4d4":{targets:{default:{}}},"e6741053-104a-43d2-8bd8-b2536529f5cd":{externalConfig:!0},"2b166297-6273-48a9-82e9-696327c67418":{externalConfig:!0},"611b4adf-3a1b-428b-9196-b654480065d0":{externalConfig:!0},"9beb77ad-d1e5-4a81-b987-bfa00b7e7c39":{externalConfig:!0},"1aef4996-c67f-4857-8ec7-fc037d518060":{fpd:!0,network_code:"11440465",externalConfig:!0},"649aa9ef-0293-4691-adc5-7499bc5c6ff9":{externalConfig:!0},"d45dc90a-b6cc-47b1-915e-9db149d05ace":{gaEvents:!0,targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{}}},"c413f561-01f9-44c3-b2c9-a148d93e35b5":{externalConfig:!0},"4d5b75f5-e653-4e7a-b60f-f8002d55864a":{externalConfig:!0},"7d4b0bc3-14e0-4fe9-b59d-5290fd3d1765":{externalConfig:!0},"8b20ec9c-af8e-432e-bc29-630959e0909e":{targets:{default:{},secondDefault:{}}},"316edba4-941d-45a1-8bbd-c39f74de12b2":{targets:{default:{},secondDefault:{}}},"7c2d8865-b295-40ff-9fdc-3e6280c0708c":{targets:{default:{},secondDefault:{}}},"362229ba-8929-47f4-b350-4bf068441b90":{targets:{default:{},secondDefault:{}}},"cd78325e-2fce-440c-b899-83d68d5deb38":{externalConfig:!0},"9bc3118f-c2c8-4983-aed1-82592d0a4acf":{externalConfig:!0},"ed66dfc0-c87c-43e3-a621-792c5398d0b9":{targets:{default:{},secondDefault:{}}},"3ca1e321-a3ba-4c1b-9e8f-9d08f31cf98e":{targets:{default:{},secondDefault:{}}},"aeff3bf7-955f-44bd-a866-58374584976c":{targets:{default:{},secondDefault:{}}},"38d72883-04af-45d6-a1a6-3bb8ca506bd9":{gaEvents:!0,externalConfig:!0,targets:{default:{},secondDefault:{}}},"9291c2db-d0e1-49a1-8624-7da72ed36872":{targets:{default:{},secondDefault:{}}},"592ca9ac-7f01-43f3-ba82-2ff7b93a7650":{externalConfig:!0},"53ebd8c7-b7cf-42c1-9640-a55165bca9ab":{targets:{default:{},secondDefault:{}}},"248b9715-3d95-42f8-9cc4-7b32abb3c715":{externalConfig:!0},"848e7004-41d9-4084-934f-26f3dedec5a1":{targets:{default:{},secondDefault:{}}},"0b420d00-5895-421c-9dab-326f29b1243e":{targets:{default:{},secondDefault:{}},insertQuizAndAd:{quizOptions:{insert:"prependInside",selector:"#vuukle-comments",postQuizInsertionCallback:()=>{let e=document.querySelector("#vuukle-comments > .vuukle-ads"),t=(e,t)=>{if(e&&t){e.appendChild(t);let i=document.createElement("style");i.innerHTML=`
                #vuukle-quiz-container {
                  gap: 15px;
                }
                #vuukle-quiz-container .vuukle-ads {
                  margin: 0 !important;
                  min-height: 250px !important;
                }
              `,document.head.appendChild(i)}},i=()=>{let e=setInterval(()=>{let i=document.querySelector("#vuukle-comments > .vuukle-ads"),s=document.querySelector("#vuukle-quiz-container");s&&i&&(clearInterval(e),t(s,i))},100)};if(e){let s=document.querySelector("#vuukle-quiz-container");s?t(s,e):i()}else i()}}}},"11ea27b6-8f82-4fed-95cc-77748a7454a2":{targets:{"vuukle-ad-3":{}}},"b020f681-0903-4e67-8436-b0208a3b3423":{externalConfig:!0},"15a53ea9-6592-410d-8233-d60dbadf2f48":{externalConfig:!0},"92fd8992-dbb2-4d42-9cc3-1b8101c44b9b":{externalConfig:!0},"977dd828-0657-4af3-8db8-eb6d10564bde":{targets:{default:{},secondDefault:{}},initAfterScroll:!0,initAfterScrollPixels:100},"f4063dfe-ef7d-4812-9809-ec5a33a2fb85":{targets:{default:{},secondDefault:{}}},"a7cb6247-6a8a-4519-8945-a88e6f5377b0":{targets:{default:{},secondDefault:{}}},"f985df63-157a-4bf3-b09d-13eec2eda561":{externalConfig:!0},"52df42fa-e94e-457b-b746-e743318a0458":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{}}},"7d722fa3-04d6-4455-a1d5-f322533f8f98":{externalConfig:!0},"3779bc94-f3ce-4138-af5d-1d3c0d7ee3b8":{targets:{default:{}}},"ff5b00dd-18d5-409a-b1b7-9742f68f5364":{targets:{default:{},secondDefault:{}}},"356fca96-24f8-4af6-b2f3-5abb75add2a9":{gaEvents:!0,targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{}}},"767c9051-df7f-43a5-9ab7-5a1b6579e0b0":{gaEvents:!0,targets:{default:{},secondDefault:{},"vuukle-ad-3":{}}},"b4a46e69-af6b-4d82-a260-8293a620a49a":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{}}},"238f73b9-91b9-4820-9fe1-3bf995801097":{externalConfig:!0},"53e17bd8-94eb-4a23-813e-d5f6bff1192f":{externalConfig:!0},"d8444d46-cc2d-4a45-a6ac-201f05acbfed":{externalConfig:!0},"36c8c636-9cd6-4e0c-ab24-a72382ef1be1":{externalConfig:!0},"a66ef5ff-efff-4755-ab59-47667b5c4339":{targets:{default:{},secondDefault:{}},externalConfig:!0},"4f1ee917-bdec-49f9-a891-def444a3f541":{externalConfig:!0},"fb611ff0-d7a6-4ac6-933c-186a44c9132e":{gaEvents:!0,showCWAudioButton:!1,targets:{default:{}}},"b04a1a6f-299e-4baf-8885-cc7b956dba33":{externalConfig:!0},"cd196cb9-3256-4804-bab8-6f2b2b210b37":{externalConfig:!0},"731b1598-53c4-43aa-9a0d-66575e146199":{gaEvents:!0,externalConfig:!0},"ddf243f4-4e19-4e9b-b734-7163f0495090":{hideLabelLogo:!0,targets:{default:{},"vuukle-ad-2":{},"vuukle-ad-3":{},"vuukle-ad-4":{},"vuukle-ad-5":{},"vuukle-ad-6":{}},customCSS:{"vuukle-ad-5":"width: 300px"}},"34b3a8be-f0a2-40b6-8891-1d906116ba6c":{targets:{default:{}}},"15c2fc73-2ba2-48a1-81eb-68a8d4fc7365":{targets:{default:{},secondDefault:{}}},"cf043a37-8348-4746-b692-b00faadc18c1":{targets:{default:{},secondDefault:{}}},"87881f98-a3df-4b2e-b086-6b549524af2b":{targets:{default:{},secondDefault:{}}},"bc3e080c-a5bc-4730-b471-3970b6bf699e":{externalConfig:!0},"efd7f6e2-802d-423d-ae84-d866ad971399":{gaEvents:!0,showCWAudioButton:!1,targets:{default:{}}},"32ea1377-42f8-49bd-a80b-5a3bf4466257":{targets:{default:{}}},"3da19a3c-faa3-419e-9361-4d5b8350b6f5":{targets:{default:{}}},"e1023aeb-5ee1-46f2-8205-7e7372ad324f":{targets:{default:{}},externalConfig:!0},"6bfb749f-f90d-4301-89d4-0ac032d944a3":{targets:{default:{}}},"9433d539-1c98-49f2-ac2b-9a162d5a3d6d":{externalConfig:!0},"c9013a0f-de25-4994-9b4b-703a6b020629":{externalConfig:!0},"d491c427-c52e-4093-b42e-54fc7aaf72a4":{externalConfig:!0},"3632f66d-4175-4360-bc2a-cd69ad1a1d61":{targets:{default:{},"vuukle-ad-2":{},"vuukle-ad-3":{}},externalConfig:!0},"e864b6b6-579e-4c59-a4d9-949e0d25e61f":{targets:{default:{},"vuukle-ad-3":{}}},"0413d38b-e4ed-11e4-a338-002590f371ee":{targets:{default:{},"vuukle-ad-3":{}}},"a92e03ed-307c-4beb-b4ae-6d76b84c6466":{externalConfig:!0},"255be353-1ccf-4eea-af0c-86d618375550":{externalConfig:!0},"2a2f08e9-ff27-4020-a57b-275912fe9273":{targets:{default:{}}},"aade2e0e-f2fa-45c1-b262-c4b8beb5d1cb":{targets:{default:{}}},"64a67808-64b9-4e1c-96d8-a396bbd31caf":{targets:{default:{postInsertionOperation:()=>{window.changeVuukleWidgetsTheme("dark")}}}},"29ac411e-3218-42fb-90ae-47ae55444e16":{targets:{default:{}}},"2a12e2cd-bd1b-4877-8b9f-48678cda7af6":{targets:{default:{}}},"432081eb-6e8e-4abc-a88f-ca5357aa7244":{targets:{default:{}}},"3a0e7e26-f50d-4c57-88c2-274908569b0d":{showEmotesArticlesByDefault:!0,externalConfig:!0},"6a77571a-6d92-4b17-a748-5010048b4ef5":{targets:{default:{}}},"91621fb2-9f22-4666-9605-614a805ef456":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{}}},"f9036f75-b88a-4f5c-ae94-c9c8799a4677":{externalConfig:!0},"5e23e4f7-8c8f-4089-a01d-710bc798da90":{externalConfig:!0},"0c2fffb6-b8c3-4fb0-9073-45df1a9d04ed":{targets:{default:{},"vuukle-ad-2":{}}},"6a39c124-67fa-4f04-8fe7-a575ecd2027c":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{},"vuukle-ad-5":{},"vuukle-ad-6":{},"vuukle-ad-7":{},"vuukle-ad-8":{},"vuukle-ad-9":{}}},"a1ab5e4d-fc4a-417a-8454-ea57c8bfaaf0":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{}}},"f3249e3c-6c77-4bb6-b805-d09198b21a05":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{}}},"12eef24a-ee2a-4ca4-8c01-64c8aa78fccd":{targets:{default:{},secondDefault:{}}},"5d6d4f55-ff35-4ac0-baaf-b5dc3ee32486":{targets:{default:{},"vuukle-ad-2":{},"vuukle-ad-3":{},"vuukle-ad-4":{insert:"after",selector:"#article_body > p:first-of-type",adUnitGeos:["CN"]},"vuukle-ad-5":{}}},"e1e87e0a-d5f2-4943-860d-fef621987289":{externalConfig:!0},"ae417a03-65b0-45cb-9ebd-9f8ccce96b51":{targets:{default:{}}},"9b305fac-eacd-470a-8cc3-d4caf68480f4":{externalConfig:!0},"b1aaa3ee-e3e9-444c-b043-ad06699c7e2a":{targets:{default:{}}},"6d18d31b-113b-4676-923f-41dadfa912b0":{targets:{default:{}},externalConfig:!0},"f623b291-820b-4ded-a360-ef133909646c":{externalConfig:!0},"ddc3d585-821a-474d-b7da-9360d9e4f2e7":{externalConfig:!0},"28a76eea-83ab-4eb0-bdc9-ec32a67a8bb2":{externalConfig:!0},"f85f9333-42c4-42c5-80b4-a9a1e3d905a1":{externalConfig:!0},"7cecf616-b9b1-4fc2-9f8e-7d16ef1f7494":{showCWAudioButton:!1,targets:{default:{},secondDefault:{}}},"6bd54cd3-71bd-475a-b1fd-25ba5a6cdcd2":{showCWAudioButton:!1,targets:{default:{},secondDefault:{}}},"1feb6d34-f2ca-4219-bff0-28be03a6d8da":{externalConfig:!0},"64136411-69b5-4424-9e24-f6821f0f060e":{insertQuizAndAd:{quizOptions:{insert:"after",selector:".elementor-widget-theme-post-content > div > p:last-of-type"}},targets:{default:{},secondDefault:{},"vuukle-ad-3":{insert:"after",selector:"#vuukle-quiz"},"vuukle-ad-4":{replaceAdOnPage:{adDivId:"vuukle-ad-3"}}}},"45e74a80-4a92-4e89-8a8a-4b4449edb14d":{externalConfig:!0},"4a47762d-888d-4589-a7a3-5c06f4587bf8":{targets:{default:{},"vuukle-ad-2":{},"vuukle-ad-3":{},"vuukle-ad-4":{},"vuukle-ad-5":{},"vuukle-ad-6":{}}},"95a1784e-cc5c-455b-a8d6-fa6170771686":{externalConfig:!0},"bc9ef239-b220-46fa-9adb-9a0157bfe4ad":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{}}},"eb3aedc9-183a-4364-a940-c37f4724dd2e":{targets:{default:{},secondDefault:{},"vuukle-ad-3":{}}},"b355463c-4831-4067-8c93-a2303c39a309":{externalConfig:!0},"c003c14d-297a-43c9-97b2-630e05b1d9fb":{externalConfig:!0},"e8a206d5-67d4-44bc-97af-a160da26b683":{externalConfig:!0},"f9488e7c-9ed2-4e12-ae31-e48f1006d071":{externalConfig:!0},"61ba9d28-1cfd-405b-87ca-3feb7326bbd6":{externalConfig:!0},"b6b7829f-9f0f-4af3-a36c-1cecf00f8baf":{externalConfig:!0},"c77634b5-93d5-413c-90ce-286bc462c5d6":{externalConfig:!0},"72a2c4c9-2fa6-47ba-b3cc-b1438b302ddc":{targets:{default:{},secondDefault:{}}},"bc095434-27f9-4779-a350-6e9caca7f21e":{targets:{default:{}}},"4529953f-a9cc-483a-8451-a9b0bf17a1ae":{hideLabelLogo:!0,targets:{default:{},secondDefault:{},"vuukle-ad-3":{},"vuukle-ad-4":{},"vuukle-ad-5":{}}},"f9c98646-e2a2-4e40-92e9-58aea917d809":{targets:{default:{},secondDefault:{}}},"ead41e46-a5fd-11e2-bc97-bc764e0492cc":{externalConfig:!0},"bf94f923-206b-4e74-9b54-8d667098c757":{targets:{default:{}}},"5cda731e-bcb7-413f-984d-b76aadaea139":{externalConfig:!0},"a2df33e0-e37c-45d2-bf13-3176e7711b3b":{targets:{default:{},secondDefault:{}},externalConfig:!0},"83a32972-5af0-484d-ab84-c5c8c7e86d9d":{externalConfig:!0},"f1b26352-3ac0-4373-98d3-b5d88d39602b":{targets:{"vuukle-ad-3":{}}},"e1c9ead0-29bb-4aee-b3a9-68174fd455f8":{targets:{default:{},secondDefault:{}}},"7f46a5fa-c1f6-473b-adfa-f4c9999cb7bf":{},"5c57e36e-8a31-4068-bc1b-26cf3fbf24ed":{showCWAudioButton:!1,targets:{default:{},secondDefault:{}}},"053a2dad-4d97-4846-abdf-3ffa0a7345b2":{externalConfig:!0},"e09d1311-dcda-49b0-b37b-73ba36c08d54":{gaEvents:!0,targets:{default:{sideAds:1},secondDefault:{sideAds:1},"vuukle-ad-3":{},"vuukle-ad-4":{}}},"6f21915c-70db-4db2-b86b-463efc2927dc":{externalConfig:!0},"4957a26d-f83c-4d19-8538-a090303623e9":{externalConfig:!0},"58625c59-58a8-44ec-9a46-72c2d7b40c6a":{externalConfig:!0},"b14f5e1c-a7f4-4957-bddb-dda8b99c151f":{externalConfig:!0},"5f7de88a-8422-45f8-8434-33c27c88e494":{showCWAudioButton:!1,targets:{default:{},secondDefault:{}},insertQuizAndAd:{quizOptions:{insert:"prependInside",selector:"#vuukle-comments",postQuizInsertionCallback:()=>{let e=document.querySelector("#vuukle-comments > .vuukle-ads");if(e){let t=document.querySelector("#vuukle-quiz-container");t&&t.appendChild(e)}}}}},"78a282d5-4b03-4a1f-8a9f-4aecfa3876a3":{externalConfig:!0},"2cd2a90e-d838-4419-bc3a-e27006a8cdaa":{targets:{"vuukle-ad-3":{}}},"6d0ad858-38ef-42d2-bc15-b5394e8ddcc3":{targets:{"vuukle-ad-3":{}}},"dd210d92-3646-4bec-b97d-aded2022a9ec":{targets:{"vuukle-ad-3":{}}},"d7cb4240-f167-463a-87ff-c01eda12a0a9":{targets:{"vuukle-ad-3":{}}},"d19bdefa-b13c-47cd-84e2-e161261bace5":{targets:{"vuukle-ad-3":{}}},"025dc823-7837-4535-8909-79f78a0e64f1":{targets:{"vuukle-ad-3":{}}},"04c7aee7-224b-440d-ac9b-cb199abf2358":{targets:{"vuukle-ad-3":{hideAdLabel:!0}}},"19049fe7-a743-4212-b91f-345332984a00":{targets:{"vuukle-ad-3":{}}},"b9bc1dcc-e97d-4033-82b4-96b63072c472":{targets:{"vuukle-ad-3":{}}},"31520fb1-51f3-4521-af23-3ce5730f4a28":{targets:{"vuukle-ad-3":{}}},"656d28e4-0a86-440b-ba38-a154c0eac0f7":{targets:{"vuukle-ad-3":{}}},"76d59655-9d32-4bf3-8bba-ea625ee044a0":{targets:{"vuukle-ad-3":{}}},"bb68512c-1daf-4aae-95c2-943675f03da2":{targets:{"vuukle-ad-3":{}}},"ce57bead-42f7-45b9-a6ee-7d95dcb6f53e":{targets:{"vuukle-ad-3":{}}},"54f5f0ae-60c4-467a-ac88-715728dfb0e5":{externalConfig:!0},"9a65254d-e0d8-40ce-a209-8513ae24cbab":{targets:{"vuukle-ad-3":{postInsertionOperation:()=>{let e=document.querySelector("#vuukle-ad-3");e&&e.parentElement&&(e.parentElement.style.float="right")}}}},"76135452-44ce-41b4-a49d-fc6f19545533":{targets:{"vuukle-ad-3":{}}},"f7f415c2-121f-4782-a7f7-8b3e41ac8388":{targets:{"vuukle-ad-3":{}}},"505c1185-b850-4243-830e-966153f5dc66":{externalConfig:!0},"8c4da6b7-780a-4ade-86d1-887c30e5af8b":{externalConfig:!0},"6494c164-044d-4311-9d91-53947348c007":{externalConfig:!0},"eaa782ec-5d98-4cbf-b2e4-6ecb1fa630f3":{externalConfig:!0},"869226d0-a742-450a-94a2-17e7a43659f7":{externalConfig:!0},"2bc125b8-ae0d-4a68-b6de-d6b324e35934":{externalConfig:!0},"de8d5bd5-1ea0-44d4-a0d4-c519299d80c1":{externalConfig:!0},"227dda61-ad39-440b-9ffd-4f1dbf1644b0":{externalConfig:!0},"c79b75ad-35ab-440b-b099-f4574ba39771":{externalConfig:!0},"2ef1400c-04eb-4838-8ffa-28232fe5a214":{externalConfig:!0},"81ac9e4a-bbdd-456f-a9da-02819977dc9b":{externalConfig:!0},"c1cb99b8-515c-4bf4-8f98-5ceb2be6811b":{externalConfig:!0},"8e770cea-4778-40ff-b06c-c51d851e2ca0":{externalConfig:!0},"2abb8a65-52a3-4813-8d9e-60fc98eadeb6":{externalConfig:!0},"56f2bd7a-86e1-4018-be4c-386831006619":{externalConfig:!0},"ceb3d467-a603-4ca6-b10d-36bb629f916c":{externalConfig:!0},"b4318906-5f52-4d6c-b40b-dd6a2e6f97fb":{externalConfig:!0},"24620f34-3043-44b6-a4e6-4cd1efd120c9":{externalConfig:!0},"327a8f65-b02f-4aaa-b6ad-b7aafbc1331d":{externalConfig:!0},"d2e04f5f-fe35-494e-a528-a99a86305307":{externalConfig:!0},"953f7799-6f90-450d-a8fa-c5eafad5c1c3":{externalConfig:!0},"6b12d066-5401-49d6-9b0d-075088382dde":{externalConfig:!0},"b7e47a2e-01e6-49ef-b066-df66ae891595":{externalConfig:!0},"ba36348e-4b61-4e5d-928c-5669c074ab21":{externalConfig:!0},"4b2136ed-d349-4f19-9d57-246dff67bb7f0":{externalConfig:!0},"407ac1f4-1c19-4493-bdef-f7e9236b1515":{externalConfig:!0},"42164773-827e-42bd-8c5c-91bb25840611":{targets:{"vuukle-ad-3":{}}},"2fd387b9-f020-4c23-96ee-bd7b92af6099":{externalConfig:!0},"36c1b54c-8fbb-4400-8920-4a3210ccc7c5":{externalConfig:!0},"cc5f8583-5b87-4aac-9f59-f99c24c827c0":{externalConfig:!0},"2920c103-3b04-4f5b-9f5f-15163159408b":{externalConfig:!0},"84b63afa-2046-4d08-883a-073f6f516695":{externalConfig:!0},"15801e19-3883-480d-8fb9-c27d6f8f6dc5":{externalConfig:!0},"5069a9fd-ea6a-4209-8356-e79bbb2c7e7f":{externalConfig:!0},"24ab14c8-776c-4198-9bc1-ef52c930649b":{ads:!1},"bc9fd4eb-d7be-4d00-87ef-b570563b015f":{externalConfig:!0},"664e0b85-5b2c-4881-ba64-3aa9f992d01c":{externalConfig:!0},"54c90d10-586c-4036-9ffd-bc54eaf71af1":{compact:!0},"28c15853-07ca-4cae-9ba9-e2b08ede81c4":{externalConfig:!0},"6ff6a1d2-d34b-462f-bf11-c86cae0e6821":{externalConfig:!0},"cbd86e60-4c2d-46ed-b4fe-5c486ef6bdec":{targets:{"vuukle-ad-3":{hideAdLabel:!0}}},"691b9feb-5362-4858-bbdd-e4eb539cbd23":{externalConfig:!0},"2e5a47ef-15f6-4eec-a685-65a6d0ed00d0":{externalConfig:!0,hideAddVuukle:!0,showQuizAnswerRightOrWrongOnLogin:!0},"f1533684-e153-4225-becd-6017d3b37fcf":{CWBubblePersistence:!0,externalConfig:!0,excludeFromEmptyEmotesQuizInsertion:!0}},a=["8ccda731-6ed4-4965-a6e9-e05ae318389d","06bbd0e5-c863-4bd4-a24f-65cbbb6ebf90","fb7adc50-1895-4260-ae4e-d958e0943e86","3a576486-18b5-4438-b12f-340af1d2a0e0","8c6794b5-f7fd-4cd1-a038-a8d1b5f6a758","96bf641a-66d8-11e5-9bc9-002590f371ee","10d0bfe0-3737-4481-80ab-d837492181de","46059264-25f1-4b76-a88b-6d1c75c66f42","55971aa3-e05a-49d3-b2e9-83243ce15cc4","ae9bb8a3-d291-4ba3-9172-1f02e37aaff3","b1714e6a-1ebd-42a7-8149-91c7949ffa3c","6c9faada-99c9-4675-a276-ea1e17165a25","3368388b-0a3d-45da-a382-6fb1019db01b","c0b2fe99-a42f-4deb-b87f-53acab8905a0","2efc88c2-1141-4a6a-90d9-7e47f4476335","3779bc94-f3ce-4138-af5d-1d3c0d7ee3b8","3f9039a9-057a-4853-a545-0a9d334060a7","1826a8a1-7b9f-464b-8308-004d8fa65dd1","c960b925-0318-448d-b341-2990d904066a","8543c083-0a45-4c77-adfc-07ffa2a1723b","dee74ed8-c77d-45c9-a24b-6d0f14ba48d4"],o=["0f55d425-672f-419b-8b54-007e54113a1c"]},5530:function(e,t,i){"use strict";i.d(t,{Z:()=>o});var s=i(6892);class a{static baseUrl="https://cdn.vuukle.com/widgets";static iframelessWidgetUrls={comments:`${a.baseUrl}/comments.modern.js`};static legacyIframelessWidgetUrls={comments:`${a.baseUrl}/comments.legacy.js`};static urls={comments:`${a.baseUrl}/index.html`,emotes:`${a.baseUrl}/emotes.html`,modal:`${a.baseUrl}/modal.html`,newsfeed:`${a.baseUrl}/newsfeed.js`,trafficExchange:`${a.baseUrl}/trafficexchange.js`,powerbar:`${a.baseUrl}/powerbar.html`,sharebar:`${a.baseUrl}/sharebar.html`,subscribe:`${a.baseUrl}/subscribe.html`,verticalSharebar:`${a.baseUrl}/sharebar.html`,verticalPowerbar:`${a.baseUrl}/powerbar.html`,audio:`${a.baseUrl}/audio.html`,quiz:`${a.baseUrl}/quiz.html`,quizAlt:`${a.baseUrl}/quiz.html`};static legacyUrls={comments:`${a.baseUrl}/index-legacy.html`,emotes:`${a.baseUrl}/emotes-legacy.html`,modal:`${a.baseUrl}/modal-legacy.html`,sharebar:`${a.baseUrl}/sharebar-legacy.html`,verticalSharebar:`${a.baseUrl}/sharebar-legacy.html`,powerbar:`${a.baseUrl}/powerbar-legacy.html`,verticalPowerbar:`${a.baseUrl}/powerbar-legacy.html`,newsfeed:`${a.baseUrl}/newsfeed.js`,trafficExchange:`${a.baseUrl}/trafficexchange.js`,subscribe:`${a.baseUrl}/subscribe-legacy.html`,audio:`${a.baseUrl}/audio-legacy.html`,quiz:`${a.baseUrl}/quiz.html`,quizAlt:`${a.baseUrl}/quiz.html`};static selectors={comments:"#vuukle-comments",emotes:"#vuukle-emote",modal:"body",newsfeed:"#vuukle-newsfeed",trafficExchange:"#vuukle-traffic-exchange",quiz:"#vuukle-quiz",quizAlt:"#quiz",sharebar:".vuukle-sharebar",subscribe:".vuukle-subscribe",verticalSharebar:".vuukle-sharebar-vertical",powerbar:".vuukle-powerbar",verticalPowerbar:".vuukle-powerbar-vertical",audio:".vuukle-audio"};static versions={comments:"3.40.0",emotes:"3.13.6",modal:"3.20.0",sharebar:"2.22.3",powerbar:"2.22.3",subscribe:"1.1.8",quiz:"1.32.6",audio:"1.2.4"}}void 0!=="".matchAll||s.Z.hasOwnProperty("dev")||(a.iframelessWidgetUrls.comments=a.legacyIframelessWidgetUrls.comments,a.urls.comments=a.legacyUrls.comments,a.urls.emotes=a.legacyUrls.emotes,a.urls.modal=a.legacyUrls.modal,a.urls.powerbar=a.legacyUrls.powerbar,a.urls.verticalPowerbar=a.legacyUrls.verticalPowerbar,a.urls.sharebar=a.legacyUrls.sharebar,a.urls.verticalSharebar=a.legacyUrls.verticalSharebar,a.urls.subscribe=a.legacyUrls.subscribe,a.urls.audio=a.legacyUrls.audio,a.urls.quiz=a.legacyUrls.quiz||a.legacyUrls.quizAlt);let o=a},3921:function(e,t,i){"use strict";i.d(t,{Gf:()=>b,IW:()=>m,J8:()=>a,Ln:()=>g,N5:()=>h,PP:()=>s,qu:()=>p,rX:()=>f});let s={adConfigLoadEnd:"Advertisement config load end",adConfigLoadError:"Advertisement config load error",adConfigLoadStart:"Advertisement config load start",adEnd:"Advertisement End",adStart:"Advertisement Start",commsCreatorEnd:"Communication creator end",commsCreatorStart:"Communication creator start",geoRequestCache:"Geo request retrieval from cache",geoRequestEnd:"Geo request end",geoRequestError:"Geo request error",geoRequestStart:"Geo request start",platformStart:"Start",prebidLoadEnd:"Prebid loading end",prebidLoadError:"Prebid loading error",prebidLoadStart:"Prebid loading start",websocketOpened:"Websocket connection opened",widgetsCreatorEnd:"Widget creator end",widgetsCreatorStart:"Widget creator start"},a={adConfigStartToError:"Advertisement config load start -> load error",adStartToConfigLoadEnd:"Advertisement start -> ad config load end",adStartToConfigLoadStart:"Advertisement start -> ad config load start",adStartToEnd:"Advertisement start -> end",adStartToPrebidLoadStart:"Advertisement start -> prebid script load start",commsStartToEnd:"Communication creator start -> end",geoStartToEnd:"Geo request start -> geo request end",geoStartToError:"Geo request start -> geo request error",platformStartToAdConfigLoadEnd:"Platform start -> ad config load end",platformStartToAdConfigLoadError:"Platform start -> ad config load error",platformStartToAdEnd:"Platform start -> advertisement end",platformStartToAdStart:"Platform start -> advertisement start",platformStartToCommsEnd:"Platform start -> communication creator end",platformStartToCommsStart:"Platform start -> communication creator start",platformStartToGeoCache:"Platform start -> geo request cache retrieval",platformStartToGeoEnd:"Platform start -> geo request end",platformStartToGeoError:"Platform start -> geo request error",platformStartToGeoStart:"Platform start -> geo request start",platformStartToLog:"Platform start -> version log",platformStartToPrebidError:"Platform start -> prebid script load error",platformStartToPrebidLoad:"Platform start -> prebid script load end",platformStartToPrebidLoadStart:"Platform start -> prebid script load start",platformStartToWebsocketOpen:"Platform start -> websocket connection opened",platformStartToWidgetsEnd:"Platform start -> widget creation end",platformStartToWidgetsStart:"Platform start -> widget creation start",prebidStartToEnd:"Prebid loading start -> end",prebidStartToError:"Prebid loading start -> error",widgetStartToEnd:"Widget creation start -> end"},o=new URLSearchParams(window.location.search);function n(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];"true"===o.get("vkdebug")&&e(...i)}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Vuukle Platform";console.profile(e)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Vuukle Platform";console.profileEnd(e)}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mark";performance.mark(e)}function c(e){return e.toString().padStart(2,"0")}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;performance.measure(e,t,i),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mark",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mark";performance.getEntriesByName(e,t).forEach(e=>{console.log.apply(console,function(e,t){e=[].slice.call(e),t&&e.unshift(t);let i="#"+Math.floor(0x1000000*Math.random()).toString(16),s=new Date,a=`[${s.getHours().toString()}:${c(s.getMinutes())}:${c(s.getSeconds())}]`;return e.unshift(`display: inline-block; color: #fff; background: ${i}; padding: 1px 4px; border-radius: 3px;`),e.unshift("display: inline-block; color: #fff; background: #1e88e5; padding: 1px 4px; border-radius: 3px;"),e.unshift(`${a} %cVuukle Platform%c`),e}([],`${t} - ${e.name}: ${e.duration.toFixed(2)}ms`))})}(e,"measure")}let h=e=>n(r,e),g=e=>n(l,e),m=e=>n(d,e),f=(e,t,i)=>n(u,e,t,i),p=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s]},b=function(e,t){for(var i=arguments.length,s=Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];window.location.search.includes("vdebug")?console[e](...s):t&&p(e,...s)}},7630:function(e,t,i){"use strict";i.d(t,{Z:()=>n});var s=i(9533);let a=e=>{let t=window.atob(e);return Uint8Array.from(t,e=>e.codePointAt(0)||0)},o=e=>{let t=Array.from(e,e=>String.fromCodePoint(e)).join("");return window.btoa(t)},n=class{APIKEY="";STORAGE_KEY="vuukle_quiz_user_form_data";constructor(e){this.APIKEY=e}encrypt(e,t){try{let i="";for(let s=0;s<e.length;s++){let a=e.charCodeAt(s)^t.charCodeAt(s%t.length);i+=String.fromCharCode(a)}return o(new TextEncoder().encode(i))}catch(e){throw Error("Encryption failed: "+e.message)}}decrypt(e,t){try{let i=new TextDecoder().decode(a(e)),s="";for(let e=0;e<i.length;e++){let a=i.charCodeAt(e)^t.charCodeAt(e%t.length);s+=String.fromCharCode(a)}return s}catch(e){throw Error("Decryption failed: "+e.message)}}storeData(e){try{i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet(this.STORAGE_KEY,()=>{(0,s.ti)(this.STORAGE_KEY,JSON.stringify(e))})})}catch(e){throw Error("Storage operation failed: "+e.message)}}retrieveData(){try{let e=(0,s._2)(this.STORAGE_KEY);return e?JSON.parse(e):null}catch(e){throw Error("Retrieval operation failed: "+e.message)}}deleteData(){(0,s.ti)(this.STORAGE_KEY,null)}processFormData(e){try{if(!e.name||!e.email||!e.phoneNumber)throw Error("All fields are required");let t={encryptedName:this.encrypt(e.name,this.APIKEY),encryptedEmail:this.encrypt(e.email,this.APIKEY),encryptedPhoneNumber:this.encrypt(e.phoneNumber,this.APIKEY)};this.storeData(t)}catch(e){throw Error("Form processing failed: "+e.message)}}retrieveUserData(){try{let e=this.retrieveData();if(!e)return null;return{name:this.decrypt(e.encryptedName,this.APIKEY),email:this.decrypt(e.encryptedEmail,this.APIKEY),phoneNumber:this.decrypt(e.encryptedPhoneNumber,this.APIKEY)}}catch(e){throw Error("Data retrieval failed: "+e.message)}}}},8747:function(e,t,i){"use strict";i.d(t,{Y:()=>s});class s{widgetObject;constructor(e){this.widgetObject=e}isValidEvent(e){if(!(e instanceof Object)&&!(e.data instanceof Object)&&!e.data.sourceWindowName)return!1;let t=!1;if(Array.isArray(this.widgetObject))for(let i of this.widgetObject)i.iframe.name===e.data.sourceWindowName&&(t=!0);else t=e.data.sourceWindowName===this.widgetObject.iframe.name;return t}postMessage(e){Array.isArray(this.widgetObject)?this.widgetObject.forEach(t=>{t.onLoad(t=>t.postMessage(e,"*"))}):this.widgetObject.onLoad(t=>t.postMessage(e,"*"))}removeMessageListener(){window.removeEventListener("message",this.listener)}}},3114:function(e,t,i){"use strict";i.d(t,{u:()=>d});var s=i(2595),a=i(1026),o=i(9600),n=i(7087),r=i(3921),l=i(7630);class d{articleConfig;widgetListener;widgetObject;userFormDataHandler;constructor(e,t,i){this.articleConfig=t,this.widgetListener=i,this.userFormDataHandler=new l.Z(this.articleConfig.apiKey),this.listener=e=>{if(this.isValidEvent(e)){if((0,r.qu)("log","[Vuukle.js | Modal(Windowed)] message:",e),e.data.modalReply?.hideModal&&this.handleHideModal(),e.data.modalReply?.userData&&(this.userFormDataHandler.processFormData(e.data.modalReply.userData),this.widgetListener?.postMessage({userData:e.data.modalReply.userData})),e.data.modalLoaded&&this.widgetListener?.postMessage({modalLoaded:e.data.modalLoaded}),e.data.modalMessage&&this.broadcastModalMessage(e),e.data.openLinkInNewTab){let t=document.createElement("a");t.href=e.data.openLinkInNewTab,t.target="_blank",t.rel="nofollow noopener",t.click()}e.data.openLinkInSameTab&&(window.location.href=e.data.openLinkInSameTab),e.data.reportEvent&&this.reportToAnalyticsServer(e),e.data.callSSO&&this.callSSOAuth(),e.data.openedShareNetwork&&this.widgetListener&&this.widgetListener.postMessage({openedShareNetwork:e.data.openedShareNetwork},{sendToOneInstance:!0}),e.data.alertMessage&&s.Z.createNotification(e.data.alertMessage.text,e.data.alertMessage.type),e.data.modalWindowLoaded&&this.widgetObject.executeAllCallbacks(),e.data.vuukle_event&&this.shareEventToPublished(e.data.vuukle_event,this.articleConfig.eventHandler),e.data.signUpComplete&&a.Z.log("user_register",this.articleConfig),e.data.loginToken&&e.data.tokenType&&e.data.loggedInFrom&&("regular"===e.data.tokenType?(n.Z.setRegularCommenting(!0),n.Z.setGuestCommenting(!1),n.Z.setAnonymousCommenting(!1)):"guest"===e.data.tokenType&&(n.Z.setRegularCommenting(!1),n.Z.setGuestCommenting(!0),n.Z.setAnonymousCommenting(!1)),"quiz"===e.data.loggedInFrom?a.Z.log("login_qw",this.articleConfig):"comments"===e.data.loggedInFrom&&a.Z.log("login_cw",this.articleConfig),n.Z.saveToken(e.data.loginToken),this.widgetListener?.postMessage({loginToken:e.data.loginToken}))}},this.widgetObject=e,window.addEventListener("message",this.listener),this.postMessage({canUseCookies:o.Z.canUseCookies}),this.postMessage({loginToken:n.Z.getToken()}),this.postMessage({isMobile:o.Z.isMobileUser}),this.postMessage({customShareUrls:t.powerbar&&t.powerbar.customUrls||t.sharebar&&t.sharebar.customUrls}),this.postMessage({userCountry:o.Z.userCountry})}listener;broadcastModalMessage(e){e.data.modalMessage.loggedIn?this.widgetListener?.postMessage({loggedIn:!0}):this.widgetListener?.postMessage({modalMessage:e.data.modalMessage})}reportToAnalyticsServer(e){let{action:t}=e.data.reportEvent;"string"==typeof t&&a.Z.log(t,this.articleConfig)}callSSOAuth(){let e=this.articleConfig.comments?.auth?.sso?.onClick||this.articleConfig.auth?.sso?.onClick;"function"==typeof e?e():console.error(`[Vuukle] \u{26A0} Please configure SSO to allow users to authenticate.`)}handleHideModal(){this.widgetObject.closeWindow()}isValidEvent(e){return(e instanceof Object||e.data instanceof Object||!!e.data.sourceWindowName)&&e.data.sourceWindowName===this.widgetObject.windowName}shareEventToPublished(e,t){"function"==typeof t&&t(e)}changeThemeColor(e){this.postMessage({themeColor:e})}postMessage(e){this.widgetObject.onLoad(t=>t.postMessage(e,"*"))}}},2595:function(e,t,i){"use strict";i.d(t,{Z:()=>o});var s=i(6914);class a{static cornerCreated=!1;static notificationCorner;static createdNotifications=[];static createNotificationCorner(){let e=document.getElementById("vuukle_alerts_fixed_left");if(e)a.cornerCreated=!0,a.notificationCorner=e;else{let e=document.createElement("div");e.id="vuukle_alerts_fixed_left",e.style.cssText=`
        position: fixed;
        bottom: 10px;
        right: -16px;
        borderRadius: 5px;
        display: flex;
        flex-direction: column-reverse;
        height: 100vh;
        overflow-y: auto;
        pointer-events: none;
        align-items: flex-end;
        z-index: 2147483648;
        color: #000;
      `,a.cornerCreated=!0,a.notificationCorner=e,document.body.appendChild(e)}}static alertContainerStyles=`
    padding: 12px 16px;
    overflow: hidden;
    display: flex;
    position: relative;
    font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',sans-serif;
    font-weight: 500;
    box-shadow: rgb(67 90 111 / 30%) 0px 0px 1px, rgb(67 90 111 / 47%) 0px 8px 10px -4px;
    margin-right: 10px;
    margin-bottom: 15px;
    border-left: 5px solid #909399;
    align-items: center;
    background: #fff;
    pointer-events: auto;
  `;static alertTextContainerStyles=`
    flex: 1 1 0%;
  `;static alertTextStyles=`
    font-weight: 600px;
    line-height: 20px;
    margin-bottom: 0;
    margin-top: 0;
    letter-spacing: -0.05px;
    font-size: 14px;
  `;static alertRemoveButtonStyles=`
    transform: rotate(45deg);
    margin-left: 10px;
    cursor: pointer;
    font-size: 26px;
  `;static alertColors={error:"#f56c6c",info:"#909399",success:"#67c23a",warning:"#e6a23c"};static notificationLogoHTML=`
    <a href="https://vuukle.com" target="_blank" rel="noopener nofollow" style="margin-right: 5px;">
      ${(0,s.Ew)(30,"0 0 30 30")}
    </a>
  `;static createNotification(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;if(this.createdNotifications.includes(e))return;this.createdNotifications.push(e),a.cornerCreated||a.createNotificationCorner();let o=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("h4"),d=document.createElement("div"),c=document.createElement("span");o.id=`alert-${(0,s.qs)()}`,o.style.cssText=a.alertContainerStyles,o.style.borderLeft=`5px solid ${a.alertColors[t]}`,r.style.cssText=a.alertTextContainerStyles,l.style.cssText=a.alertTextStyles,d.style.cssText=a.alertRemoveButtonStyles,n.style.display="flex",n.style.alignItems="center",n.innerHTML=a.notificationLogoHTML,r.innerHTML=e,d.textContent="+",d.setAttribute("aria-label","Close Alert"),d.setAttribute("role","button"),d.setAttribute("title","Close Alert"),d.onclick=()=>a.removeNotificationById(o.id,e),r.appendChild(l),d.appendChild(c),o.appendChild(n),o.appendChild(r),o.appendChild(d),a.notificationCorner.appendChild(o),setTimeout(()=>{a.removeNotificationById(o.id,e)},i)}static removeNotificationById(e,t){this.createdNotifications=this.createdNotifications.filter(e=>e!==t);let i=document.getElementById(e);i&&i.parentNode&&i.parentNode.removeChild(i)}}let o=a},1026:function(e,t,i){"use strict";i.d(t,{Z:()=>n});var s=i(3921),a=i(9600);class o{static viewPageFired=!1;static exit5sFired=!1;static botReported=!1;static onIPReceived=new Map;static addIPListener(e,t){this.onIPReceived.set(e,t)}static removeIPListenersByIndex(e){this.onIPReceived.get("-"+e)&&this.onIPReceived.delete("-"+e)}static getParams(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=o.cleanString(e.title||""),n={action:t,hashed_email:a.Z.userAPIKey,hostname:e.apiKey,pubdomain:e.host,refDomain:o.cleanString(e.refHost||""),sessionId:a.Z.sessionID,version:"4.20",articleImg:"",articleTitle:encodeURI(s).replace(/#/g,"%23"),article_id:encodeURI(e.articleId||"").replace(/#/g,"%23"),hashed_article_url:encodeURIComponent(o.cleanUrl(e.url)),referrer:encodeURI(e.author||""),tags:o.processTag(e.tags||""),browser:a.Z.browser,device:a.Z.device,os:a.Z.os,isArticleBrandSafe:a.Z.isArticleBrandSafe},r="";return i&&Object.keys(n).forEach((e,t)=>{0===t?r+=`${e}=${n[e]}`:r+=`&${e}=${n[e]}`}),i?r:n}static async reportBot(e){if(!o.botReported)try{if(""!==e.url.trim()){let t=o.getParams(e,"bot_detected");e.amp&&(t.device="AMP");let i=new XMLHttpRequest;i.open("GET",`https://publish.vuukle.com/bq-publish?callback=&${JSON.stringify(t)}&_=1489139930741`),i.send(),o.botReported=!0}}catch(e){(0,s.qu)("warn","ServerLogger request failed")}}static async logPost(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if((0,s.qu)("log",`\u{1F4CA} [BQ Event]
      - action: ${e},
      - article params: ${JSON.stringify(t)}`),"exit_5s"!==e||!o.exit5sFired){o.exit5sFired=!0;try{if(""!==t.url.trim()){let s=o.getParams(t,e,!0);if(a.length>0&&a.forEach(e=>{s+=`&${e.key}=${e.value}`}),t.amp&&(s+="&device=AMP"),i){let i=o.getParams(t,e);t.amp&&(i.device="AMP"),a.length>0&&a.forEach(e=>{i[e.key]=e.value}),navigator.sendBeacon("https://publish.vuukle.com/bq-publish",JSON.stringify(i))}else{let t=new XMLHttpRequest;t.open("POST","https://publish.vuukle.com/bq-publish"),t.send(s),"view_page"===e&&(t.onreadystatechange=()=>{if((4===t.readyState||200===t.status)&&t.responseText){let e=JSON.parse(t.response);o.onIPReceived.forEach(t=>t(e.ip)),window._vuukleGeo?window._vuukleGeo.ip=e.ip:window._vuukleGeo={ip:e.ip}}})}}}catch(e){(0,s.qu)("warn","ServerLogger request failed")}}}static async log(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!a.Z.isBot||e.includes("ivt")){if(!a.Z.userCountryDetermined||!a.Z.isArticleBrandSafeKnown&&"thephoblographer.com"===t.host)return void setTimeout(()=>o.log(e,t,i),100);if("view_page"===e&&o.viewPageFired)return;"view_page"===e&&(o.viewPageFired=!0),(0,s.qu)("log",`\u{1F4CA} [BQ Event]
      - action: ${e},
      - article params: ${JSON.stringify(t)}`);try{if(""!==t.url.trim()){let s=o.getParams(t,e);i.length>0&&i.forEach(e=>{s[e.key]=e.value}),t.amp&&(s.device="AMP"),"view_page"!==e&&delete s.isArticleBrandSafe;let a=new XMLHttpRequest;a.open("GET",`https://publish.vuukle.com/bq-publish?callback=&${JSON.stringify(s)}&_=1489139930741`),a.send(),"view_page"===e&&(a.onreadystatechange=()=>{if((4===a.readyState||200===a.status)&&a.responseText){let e=JSON.parse(a.response);o.onIPReceived.forEach(t=>t(e.ip)),window._vuukleGeo?window._vuukleGeo.ip=e.ip:window._vuukleGeo={ip:e.ip}}})}}catch(e){(0,s.qu)("warn","ServerLogger request failed")}}}static cleanString(e){let t="";try{t=e.replace(/[\[\]\{\}\\/\"\']/g,"")}catch(i){t=e.replace(/\[/g,"").replace(/\]/g,"").replace(/"/g,"").replace(/'/g,"").replace(/\{/g,"").replace(/\}/g,"").replace(/\\/g,"")}return t&&0!==t.length||(t=e.replace("[","").replace("]","").replace(/"/g,"").replace(/'/g,"")),t}static processTag(e){return(Array.isArray(e)?e[0]:e.split(",")[0]).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").slice(0,10)}static cleanUrl(e){if(""===e.trim()||!e)return"";try{let t=new URL(e);return t.hostname.replace("www.","").replace(/^(m\.)/,"")+t.pathname+t.search}catch(e){return""}}}let n=o},9600:function(e,t,i){"use strict";i.d(t,{Z:()=>w});var s=i(9847),a=i(6892),o=i(3921);let n=void 0!==navigator.userAgentData;function r(){return i.e("174").then(i.bind(i,9500))}function l(){return i.e("33").then(i.bind(i,3775))}async function d(){return n?(await r()).detectBrowser():(await l()).detectBrowser()}async function c(){return n?(await r()).detectDevice():(await l()).detectDevice()}async function u(){return n?(await r()).detectOS():(await l()).detectOS()}var h=i(6914),g=i(9533),m=i(7087),f=i(6172);let p=(0,f.zd)()&&!(0,f.n0)()&&window.top?window.top:window;class b{_canUseCookies=!1;sameSiteCookieOptions={expires:30,sameSite:"lax"};userCountry="";userCountryDetermined=!1;userID="";storageUpdateCallbacks=new Set;browser="unknown";os="unknown";device="unknown";isMobileUser=p.innerWidth<=1024;cookieChangeListeners=new Map;onGeoDataReceived=new Map;isBot=/(bot|check|cloud|crawler|download|monitor|preview|scan|spider|google|qwantify|yahoo|facebookexternalhit|flipboard|tumblr|vkshare|whatsapp|curl|perl|python|wget|heritrix|ia_archiver)/i.test(navigator.userAgent);startTimestamp=Math.floor(Date.now()/1e3);_isArticleBrandSafe=null;isArticleBrandSafeKnown=!1;constructor(){window.VUUKLE_PLATFORM||(window.addVuukleCookieConsentListener=this.addCookieConsentListener.bind(this))}get canUseCookies(){return this._canUseCookies}get isArticleBrandSafe(){return this._isArticleBrandSafe}set isArticleBrandSafe(e){this._isArticleBrandSafe=e,this.isArticleBrandSafeKnown=!0}set canUseCookies(e){this._canUseCookies!==e&&(this._canUseCookies=e,i.e("543").then(i.bind(i,2237)).then(e=>{e.default.cookieConsentKnown=!0}),this.executeCallbacks(),this.cookieChangeListeners.forEach(t=>t(e)),Array.isArray(window.tempVuukleCookieConsentListeners)&&(window.tempVuukleCookieConsentListeners.forEach(t=>{if("function"==typeof t)t(e),this.addCookieConsentListener(`temp-listener-${this.cookieChangeListeners.size}`,t);else{let[s,a]=t;i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet(a,()=>s(e))}),this.addCookieConsentListener(`temp-listener-${this.cookieChangeListeners.size}`,s,a)}}),window.tempVuukleCookieConsentListeners=null))}addCookieConsentListener(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";i.e("543").then(i.bind(i,2237)).then(i=>{i.default.cookieConsentKnown?s?i.default.executeWhenStorageValueCanBeSet(s,()=>t(this.canUseCookies)):t(this.canUseCookies):this.cookieChangeListeners.set(e,e=>{s?i.default.executeWhenStorageValueCanBeSet(s,()=>t(e)):t(e)})})}addGeoListener(e,t){this.userCountryDetermined?t({country:this.userCountry}):this.onGeoDataReceived.set(e,t)}addStorageUpdateCallback(e){this.storageUpdateCallbacks.add(e)}removeCookieListenerByIndex(e){this.cookieChangeListeners.get("-"+e)&&this.cookieChangeListeners.delete("-"+e)}removeGeoListenersByIndex(e){this.onGeoDataReceived.get("-"+e)&&this.onGeoDataReceived.delete("-"+e)}get sessionID(){let e=a.Z.amp?(0,g._2)("vsid"):s.Z.get("vsid");if(!e&&this.canUseCookies){let e=(0,h.qs)();return i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vsid",()=>{a.Z.amp?(0,g.ti)("vsid",e):s.Z.set("vsid",e,this.sameSiteCookieOptions)})}),e}if(!e&&!this.canUseCookies){let e=(0,h.qs)();this.addStorageUpdateCallback(()=>{i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vsid",()=>{a.Z.amp?(0,g.ti)("vsid",e):s.Z.set("vsid",e,this.sameSiteCookieOptions)})})})}return e||(0,h.qs)()}executeCallbacks(){this.canUseCookies&&this.storageUpdateCallbacks.size>0&&(this.storageUpdateCallbacks.forEach(e=>e()),this.storageUpdateCallbacks.clear())}get userAPIKey(){if(this.userID)return this.userID;let e=(0,g._2)("vuukle_user_id");if(e)return e;let t=a.Z.amp?(0,g._2)("uid-s"):s.Z.get("uid-s");if(t)return"$"+t.substring(1);let o=`${(0,h.qs)().substring(1)}`;return this.canUseCookies?i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("uid-s",()=>{a.Z.amp?(0,g.ti)("uid-s",o):s.Z.set("uid-s",o,{expires:365,sameSite:"lax"})})}):this.addStorageUpdateCallback(()=>{i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("uid-s",()=>{a.Z.amp?(0,g.ti)("uid-s",o):s.Z.set("uid-s",o,{expires:365,sameSite:"lax"})})})}),"$"+o.substring(1)}set userAPIKey(e){this.userID=e}deleteCookies(){a.Z.amp?((0,g.ti)("vsid",null),(0,g.ti)("uid-s",null),(0,g.ti)("vuukle_geo_region",null)):(s.Z.remove("vsid",this.sameSiteCookieOptions),s.Z.remove("uid-s",{expires:365,sameSite:"Lax"}),s.Z.remove("vuukle_geo_region",{expires:7,sameSite:"Lax"}),s.Z.remove("vuukle_notification_subscription",{expires:180,sameSite:"Lax"}),s.Z.remove("vuukle_notification_subscription_dismissed",{expires:1,sameSite:"Lax"})),m.Z.removeToken(),m.Z.setAnonToken(null),(0,g.ti)("hrefAfter",null),(0,g.ti)("showedNotes",null),(0,g.ti)(`vuukleconfhttps://cdn.vuukle.com/ads/${a.Z.host}.json`,null),(0,g.ti)(`vuukleconftimehttps://cdn.vuukle.com/ads/${a.Z.host}.json`,null),(0,g.ti)("_vuukleGeo",null),(0,g.ti)("vuukle_quiz_answers",null),(0,g.ti)("quizzly_surveys_response_groups",null),(0,g.ti)("vuukle_user_id",null),(0,g.ti)("vuukle_cookie_usage_agreed",null),(0,g.ti)("vuukle_quiz_frequency_cap",null),(0,g.ti)("vuukle_quiz_reported_questions",null)}async provideUserInfoInGlobalObject(e){let t=e.browser;("unknown"===this.browser||"unknown"===t)&&(t=await d());let i={city:e.region,country_code:e.countryName||e.country_code,browser:t,device:e.device,os:e.os};window._vuukleGeo?window._vuukleGeo={...window._vuukleGeo,...i}:window._vuukleGeo=i,this.onGeoDataReceived.forEach(t=>t({country:e.countryName||e.country_code}))}async determineCookieUsability(e,t){(0,o.IW)(o.PP.geoRequestStart),(0,o.rX)(o.J8.platformStartToGeoStart,o.PP.platformStart,o.PP.geoRequestStart);let n=await i.e("543").then(i.bind(i,2237)),r=e=>{n.default.GDPRCountryCodes.includes(e)||(this.canUseCookies=!0,n.default.cookieConsentKnown=!0),this.userCountry=e},l=e=>{a.Z.disableGeoCookie||n.default.executeWhenStorageValueCanBeSet("vuukle_geo_region",()=>{a.Z.amp?(0,g.m4)("vuukle_geo_region",JSON.stringify(e),168):s.Z.set("vuukle_geo_region",JSON.stringify(e),{expires:7,sameSite:"lax"})})},h=a.Z.amp?(0,g._2)("vuukle_geo_region"):s.Z.get("vuukle_geo_region"),m=window._vuukleGeo;if(h){let i=JSON.parse(h);this.browser=i.browser||"unknown",this.os=i.os||"unknown",this.device=i.device||"unknown",this.userCountry="string"==typeof e&&e!==i.country_code?e:i.country_code,this.provideUserInfoInGlobalObject({...i,country_code:this.userCountry}),(0,o.IW)(o.PP.geoRequestCache),(0,o.rX)(o.J8.platformStartToGeoCache,o.PP.platformStart,o.PP.geoRequestCache),r(this.userCountry),this.userCountry!==i.country_code&&l({browser:this.browser,device:this.device,os:this.os,region:t,country_code:this.userCountry}),this.userCountryDetermined=!0}else if(m)(0,o.IW)(o.PP.geoRequestCache),(0,o.rX)(o.J8.platformStartToGeoCache,o.PP.platformStart,o.PP.geoRequestCache),r(m.country_code),this.onGeoDataReceived.forEach(e=>e({country:m.country_code})),this.userCountryDetermined=!0,m.country_code!==e&&"string"==typeof e&&l({browser:m.browser,device:m.device,os:m.os,region:m.region||t,country_code:e});else if(e){let i=n.default.GDPRCountryCodes.includes(e),s="California"===t;n.default.isGDPR=i,n.default.isCCPA=s,this.userCountry=e,this.canUseCookies=!i&&!s,this.device=await c(),this.os=await u(),this.browser=await d();let a={country_code:e,region:t,os:this.os,device:this.device,browser:this.browser};i||s?n.default.checkForConsent():n.default.cookieConsentKnown=!0,l(a),this.userCountryDetermined=!0,this.provideUserInfoInGlobalObject(a)}}}let w=new b},7087:function(e,t,i){"use strict";i.d(t,{Z:()=>l});var s=i(9847),a=i(6892),o=i(9533),n=i(9600);class r{anonCommenting=!1;defaultCookieOptions={expires:30,sameSite:"Lax"};useIsolatedToken=!1;guestCommenting=!1;regularCommenting=!0;ssoTokenChangeListeners=new Map;ssoLogoutListeners=new Map;isRegularTokenPresent(){let e=`vuukle_${this.useIsolatedToken?a.Z.apiKey+"-":""}token`;return a.Z.amp?null!==(0,o._2)(e):void 0!==s.Z.get(e)}isAnonymousTokenPresent(){return a.Z.amp?null!==(0,o._2)("vuukle_anonymous_token"):void 0!==s.Z.get("vuukle_anonymous_token")}addSSOTokenListener(e,t){this.ssoTokenChangeListeners.set(e,t)}addSSOLogoutListener(e,t){this.ssoLogoutListeners.set(e,t)}fireTokenListeners(e){this.ssoTokenChangeListeners.forEach(t=>t(e||this.getToken()||""))}fireSSOLogoutListeners(){this.ssoLogoutListeners.forEach(e=>e())}get tokenName(){return this.isRegularTokenPresent()||this.regularCommenting?`vuukle_${this.useIsolatedToken?a.Z.apiKey+"-":""}token`:this.guestCommenting&&!this.anonCommenting?"vuukle_guest_token":"vuukle_anonymous_token"}get isSSO(){return this.useIsolatedToken}setSSOInfo(e){this.useIsolatedToken=e}setGuestCommenting(e){this.guestCommenting=e}setRegularCommenting(e){this.regularCommenting=e}setAnonymousCommenting(e){this.anonCommenting=e}saveToken(e){n.Z.canUseCookies?i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet(this.useIsolatedToken?"vuukle_token":this.tokenName,()=>{a.Z.amp?(0,o.ti)(this.tokenName,e):s.Z.set(this.tokenName,e,this.defaultCookieOptions)})}):n.Z.addStorageUpdateCallback(()=>{i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet(this.useIsolatedToken?"vuukle_token":this.tokenName,()=>{a.Z.amp?(0,o.ti)(this.tokenName,e):s.Z.set(this.tokenName,e,this.defaultCookieOptions)})})})}setGuestToken(e){n.Z.canUseCookies?i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vuukle_guest_token",()=>{a.Z.amp?(0,o.ti)("vuukle_guest_token",e):s.Z.set("vuukle_guest_token",e,this.defaultCookieOptions)})}):n.Z.addStorageUpdateCallback(()=>{i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vuukle_guest_token",()=>{a.Z.amp?(0,o.ti)("vuukle_guest_token",e):s.Z.set("vuukle_guest_token",e,this.defaultCookieOptions)})})})}getAnonToken(){return a.Z.amp?(0,o._2)("vuukle_anonymous_token")||"":s.Z.get("vuukle_anonymous_token")||""}setAnonToken(e){if(e||(a.Z.amp?(0,o.ti)("vuukle_anonymous_token",null):s.Z.remove("vuukle_anonymous_token",n.Z.sameSiteCookieOptions)),!n.Z.canUseCookies){e&&n.Z.addStorageUpdateCallback(()=>{i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vuukle_anonymous_token",()=>{a.Z.amp?(0,o.ti)("vuukle_anonymous_token",e):s.Z.set("vuukle_anonymous_token",e,n.Z.sameSiteCookieOptions)})})});return}e&&i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vuukle_anonymous_token",()=>{a.Z.amp?(0,o.ti)("vuukle_anonymous_token",e):s.Z.set("vuukle_anonymous_token",e,n.Z.sameSiteCookieOptions)})})}removeToken(){a.Z.amp?(0,o.ti)(this.tokenName,null):s.Z.remove(this.tokenName,this.defaultCookieOptions)}getToken(){return a.Z.amp?(0,o._2)(this.tokenName)||void 0:s.Z.get(this.tokenName)}}let l=new r},894:function(e,t,i){"use strict";i.d(t,{Z:()=>a});var s=i(6172);let a=class{id;url;params;hasSkeleton;lazyLoad;intersectionObserverOptions;iframe;iframeLoaded;iframeWasViewed;iframeWindow;iframeSkeleton;onLoadCallbacks;constructor(e,t,i,s={},a=!1,o=!0,n={}){if(this.id=e,this.url=i,this.params=s,this.hasSkeleton=a,this.lazyLoad=o,this.intersectionObserverOptions=n,this.onLoad=e=>{if("function"==typeof e&&("function"==typeof e&&this.onLoadCallbacks.add(e),this.iframeLoaded))return e(this.iframeWindow)},this.iframeOnLoad=()=>{this.iframeWindow=this.iframe.contentWindow,this.iframeLoaded=!0,this.iframeSkeleton?.remove(),this.onLoadCallbacks.size>0&&this.onLoadCallbacks.forEach(e=>e(this.iframeWindow))},!this.id)throw Error("Iframe id is required");if(!i)throw Error("Iframe url is required");this.iframeLoaded=!1,this.iframeWasViewed=!1,this.onLoadCallbacks=new Set;let r=document.createElement("iframe"),l=`${i}?version=${s.version}`;this.onLoad(e=>e.postMessage({configuration:s},l)),r.style.width="100%",r.style.minWidth="100%",r.height="0",r.name=this.id,r.id=this.id,r.title=t,r.frameBorder="0",r.scrolling="no",this.iframe=r,this.lazyLoad||this.loadIframe()}loadIframe(){this.iframe.addEventListener("load",()=>this.iframeOnLoad()),this.iframe.src=`${this.url}?version=${this.params.version}`}get isInView(){return!!((0,s.w1)(this.iframe)||(0,s.v4)(this.iframe))&&(this.iframeWasViewed=!0,!0)}onLoad;iframeOnLoad}},1003:function(e,t,i){"use strict";i.d(t,{Z:()=>a});var s=i(5530);let a=class{config;windowUrl;currentWindow;windowName;loaded;onLoadCallbacks;configuration;constructor(e){this.config=e,this.windowName="modal-window",this.loaded=!1,this.onLoadCallbacks=new Set,this.onLoad=e=>{if("function"==typeof e){if(this.loaded&&this.currentWindow)return e(this.currentWindow);"function"==typeof e&&this.onLoadCallbacks.add(e)}},this.executeAllCallbacks=()=>{this.loaded=!0,this.onLoadCallbacks.forEach(e=>{this.currentWindow&&e(this.currentWindow)}),this.onLoadCallbacks.clear()};let t=s.Z.urls.modal;this.configuration={amp:e.amp,sdk:e.sdk,apiKey:e.apiKey,host:e.host,url:e.url,img:e.img,title:e.title,articleId:e.articleId,globalLang:e.language,lang:e.comments&&e.comments.transliteration.language,font:e.theme&&e.theme.font,link:e.link,anonymous:e.comments&&e.comments.auth&&e.comments.auth.anonymous,version:s.Z.versions.modal},this.windowUrl=`${t}?version=${this.configuration.version}`,this.onLoad(e=>e.postMessage({configuration:this.configuration},"*"))}openModalInWindow(){let e=window.open(this.windowUrl,this.windowName,"status = 1, height = 540, width = 600, resizable = 0, top=200, left=400, screenX=400, screenY=200");if(this.currentWindow=e,e){let t=window.setInterval(()=>{e&&e.closed&&(window.clearInterval(t),this.currentWindow=null,this.loaded=!1,e.close())},1e3)}}closeWindow(){this.currentWindow?.close(),this.currentWindow=null,this.loaded=!1}onLoad;executeAllCallbacks}},339:function(e,t,i){"use strict";function s(e,t,i){return Math.min(Math.max(e,i),t)}i.d(t,{E:()=>b,A:()=>p});var a=class extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}};let o=e=>parseInt(e.replace(/_/g,""),36),n="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{let i=o(t.substring(0,3)),s=o(t.substring(3)).toString(16),a="";for(let e=0;e<6-s.length;e++)a+="0";return e[i]=`${a}${s}`,e},{}),r=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),l=RegExp(`^#${r("([a-f0-9])",3)}([a-f0-9])?$`,"i"),d=RegExp(`^#${r("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),c=RegExp(`^rgba?\\(\\s*(\\d+)\\s*${r(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),u=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,h=/^[a-z]+$/i,g=e=>Math.round(255*e),m=(e,t,i)=>{let s=i/100;if(0===t)return[s,s,s].map(g);let a=(e%360+360)%360/60,o=t/100*(1-Math.abs(2*s-1)),n=o*(1-Math.abs(a%2-1)),r=0,l=0,d=0;a>=0&&a<1?(r=o,l=n):a>=1&&a<2?(r=n,l=o):a>=2&&a<3?(l=o,d=n):a>=3&&a<4?(l=n,d=o):a>=4&&a<5?(r=n,d=o):a>=5&&a<6&&(r=o,d=n);let c=s-o/2;return[r+c,l+c,d+c].map(g)};var f=i(6914);function p(e){let t="rgba(0, 0, 0, 0)";if(!e)return t;let i=getComputedStyle(e);if("none"!==i.backgroundImage)return"";let s=i.backgroundColor;return s===t?p(e.parentElement):s}function b(e){let t;if(!e)return 1;let i=p(e.parentElement);i.includes("rgba")&&(i=function(e){let t=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(!t)return e;{let[,e,i,s,a]=t,o=1-Number(a),n=Math.min(Math.round(Number(e)+255*o),255),r=Math.min(Math.round(Number(i)+255*o),255),l=Math.min(Math.round(Number(s)+255*o),255);return`rgb(${n}, ${r}, ${l})`}}(i));try{t=(0,f.So)(function(e){if("transparent"===e)return 0;function t(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}let[i,o,g]=function(e){if("string"!=typeof e)throw new a(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];let t=e.trim();t=h.test(e)?function(e){let t=n[function(e){let t=5381,i=e.length;for(;i;)t=33*t^e.charCodeAt(--i);return(t>>>0)%2341}(e.toLowerCase().trim())];if(!t)throw new a(e);return`#${t}`}(e):e;let i=l.exec(t);if(i){let e=Array.from(i).slice(1);return[...e.slice(0,3).map(e=>parseInt(r(e,2),16)),parseInt(r(e[3]||"f",2),16)/255]}let o=d.exec(t);if(o){let e=Array.from(o).slice(1);return[...e.slice(0,3).map(e=>parseInt(e,16)),parseInt(e[3]||"ff",16)/255]}let g=c.exec(t);if(g){let e=Array.from(g).slice(1);return[...e.slice(0,3).map(e=>parseInt(e,10)),parseFloat(e[3]||"1")]}let f=u.exec(t);if(f){let[t,i,o,n]=Array.from(f).slice(1).map(parseFloat);if(s(0,100,i)!==i||s(0,100,o)!==o)throw new a(e);return[...m(t,i,o),Number.isNaN(n)?1:n]}throw new a(e)}(e);return .2126*t(i)+.7152*t(o)+.0722*t(g)}(i))}catch(e){t=1}return t}},6172:function(e,t,i){"use strict";function s(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,s=i.document.querySelector(`meta[${e}='${t}']`);return s?s.content:""}function a(e){let t=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth,a=t.top<=i&&t.top+t.height>=0,o=t.left<=s&&t.left+t.width>=0;return a&&o}function o(e){let t,i;return!!e&&1===e.nodeType&&(i=document.documentElement,!!(t=e.getBoundingClientRect())&&t.bottom>=0&&t.right>=0&&t.top<=i.clientHeight&&t.left<=i.clientWidth)}async function n(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;return new Promise(a=>{let o=0,n=setInterval(()=>{let t=s.document.querySelector(e);t&&(clearInterval(n),a(t)),o===i&&(clearInterval(n),a(null)),o++},t)})}i.d(t,{bq:()=>s,br:()=>n,fs:()=>r,n0:()=>u,oS:()=>l,v4:()=>o,vh:()=>d,w1:()=>a,zd:()=>c});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return new Promise((s,a)=>{let o=i.document.createElement("script");o.type="text/javascript",o.src=e,o.onload=()=>s(e),o.onerror=a,o.async=!0,t instanceof Object&&Object.keys(t).forEach(e=>o[e]=t[e]);try{i.document.head.appendChild(o)}catch(e){a(e)}})};function l(e){return new DOMParser().parseFromString(e,"text/html").body.textContent}function d(e){let t=document.createElement("p");return t.innerHTML=e,t.innerText.trim()}function c(){try{return window.self!==window.top}catch(e){return!0}}function u(){try{return!window.top?.location.hostname}catch(e){return!0}}},6914:function(e,t,i){"use strict";i.d(t,{$f:()=>p,Ew:()=>r,So:()=>d,kC:()=>c,qN:()=>m,qs:()=>n,tA:()=>g,wt:()=>b,xz:()=>l});var s=i(9847),a=i(9533),o=i(6892);function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function r(e,t){return`
    <svg
      width="${e}px"
      viewbox="${t||"0 0 143 30"}"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g transform="translate(-150.000000, -31.000000)" fill-rule="nonzero">
          <g transform="translate(150.000000, 31.000000)">
            <path
              d="M41.8097027,29.0691892 L42.3657568,29.0691892 L54.204,1.80093081 L48.8013243,1.80093081 L44.2726216,12.2153514 C43.2397297,14.5605405 42.2069189,18.3368108 42.2069189,18.3368108 C42.2069189,18.3368108 41.1342973,14.5208108 40.1014865,12.2153514 L35.4535946,1.80093081 L29.4948649,1.80093081 L41.8097027,29.0691892 Z M59.7741892,29.1883784 C62.118,29.1883784 64.0645946,28.0754595 65.0974054,26.0481892 L64.9782162,28.8307297 L70.3412432,28.8307297 L70.3412432,11.8972703 L64.9782162,11.8972703 L64.9782162,20.9602703 C64.9782162,23.1067297 63.7864865,24.339 61.6413243,24.339 C59.7345405,24.339 58.8207568,23.226 58.8207568,21.318 L58.8207568,11.8972703 L53.4578919,11.8972703 L53.4578919,21.6757297 C53.4578919,26.4854595 56.0797297,29.1883784 59.7741892,29.1883784 Z M80.7617838,29.1883784 C83.1056757,29.1883784 85.0524324,28.0754595 86.0845946,26.0481892 L85.9662162,28.8307297 L91.3289189,28.8307297 L91.3289189,11.8972703 L85.9662162,11.8972703 L85.9662162,20.9602703 C85.9662162,23.1067297 84.7743243,24.339 82.6289189,24.339 C80.7218919,24.339 79.8081892,23.226 79.8081892,21.318 L79.8081892,11.8972703 L74.4458919,11.8972703 L74.4458919,21.6757297 C74.4458919,26.4854595 77.0671622,29.1883784 80.7617838,29.1883784 Z M100.915946,23.9414595 L102.345405,22.431 L106.556757,28.8307297 L112.793514,28.8307297 L106.158649,18.8138108 L112.157838,11.8972703 L106.198378,11.8972703 L100.637838,18.4162703 C100.796757,17.343 100.915946,16.0312703 100.915946,14.7592703 L100.915946,0.131416216 L95.5524324,0.131416216 L95.5524324,28.8307297 L100.915946,28.8307297 L100.915946,23.9414595 Z M115.301351,28.8307297 L120.624324,28.8307297 L120.624324,0.131416216 L115.301351,0.131416216 L115.301351,28.8307297 Z M129.844865,21.9937297 L142.675946,21.9937297 C143.073243,16.071 139.776486,11.5395405 133.697838,11.5395405 C128.454324,11.5395405 124.362973,15.1965405 124.362973,20.3242703 C124.362973,25.5314595 128.256486,29.1883784 134.293784,29.1883784 C137.82973,29.1883784 139.894865,28.1151892 141.524595,26.6841892 L138.465405,23.3849189 C137.631081,23.9811892 136.161081,24.7364595 134.214324,24.7364595 C131.790811,24.7364595 130.361351,23.7427297 129.844865,21.9937297 Z M129.765405,18.8931892 C130.202432,16.866 131.631892,15.9120811 133.738378,15.9120811 C135.843243,15.9120811 137.035135,17.0250811 137.272703,18.8931892 L129.765405,18.8931892 Z"
              id="Shape"
              fill="#FACC2B"
            />
            <path
              d="M12.4448919,5.99524054 C5.66632703,5.99524054 0.171030811,10.9249459 0.171030811,17.0061892 C0.171030811,19.2473514 0.919248649,21.3307297 2.20112432,23.0697568 C2.03273514,25.079027 1.54816216,27.9091622 0.171030811,29.2876216 C0.171030811,29.2876216 4.37897838,28.6966216 7.22951351,26.9742973 C8.81278378,27.6419189 10.5797838,28.0171622 12.4448919,28.0171622 C19.2235135,28.0171622 24.7187838,23.0874324 24.7187838,17.0061892 C24.7187838,10.9249459 19.2235135,5.99524054 12.4448919,5.99524054 Z"
              id="Path"
              fill="#FACC2B"
            />
            <path
              d="M12.4448919,5.99524054 C5.66632703,5.99524054 0.171030811,10.9249459 0.171030811,17.0061892 C0.171030811,19.2473514 0.919248649,21.3307297 2.20112432,23.0697568 C2.03273514,25.079027 1.54816216,27.9091622 0.171030811,29.2876216 C0.171030811,29.2876216 4.37897838,28.6966216 7.22951351,26.9742973 C8.81278378,27.6419189 10.5797838,28.0171622 12.4448919,28.0171622 C19.2235135,28.0171622 24.7187838,23.0874324 24.7187838,17.0061892 C24.7187838,10.9249459 19.2235135,5.99524054 12.4448919,5.99524054 Z"
              id="Path"
              fill="#4885ED"
            />
            <path
              d="M12.4421351,24.8694324 L12.7312703,24.8694324 L18.8872703,10.6898108 L16.0778919,10.6898108 L13.7228919,16.1052973 C13.1858108,17.3249189 12.6487297,19.2884595 12.6487297,19.2884595 C12.6487297,19.2884595 12.0908919,17.3041622 11.5538108,16.1052973 L9.13686486,10.6898108 L6.03832703,10.6898108 L12.4421351,24.8694324 Z"
              id="Path"
              fill="#FFFFFF"
            />
            <path
              d="M28.6454595,12.7881892 C28.6454595,6.70699459 23.1501892,1.77718703 16.3715676,1.77718703 C11.4767027,1.77718703 7.25202973,4.34843514 5.28135405,8.06723514 C7.29767838,6.76494324 9.7697027,5.99514324 12.4439189,5.99514324 C19.2225405,5.99514324 24.7178108,10.9248649 24.7178108,17.0061892 C24.7178108,19.3322432 23.9117027,21.4883514 22.5394054,23.2662162 C25.2882973,24.594973 28.6454595,25.0696216 28.6454595,25.0696216 C27.2682973,23.6915676 26.7837568,20.8614324 26.6153514,18.8517568 C27.8972432,17.1127297 28.6454595,15.0293514 28.6454595,12.7881892 Z"
              id="Path"
              fill="#FACC2B"
            />
          </g>
        </g>
      </g>
    </svg>
  `}function l(){function e(e){return e.toString().padStart(2,"0")}let t=new Date;return`[${t.getHours().toString()}:${e(t.getMinutes())}:${e(t.getSeconds())}]`}function d(e){return+(Math.round(Number(e+"e+2"))+"e-2")}function c(e){return e[0].toUpperCase()+e.slice(1)}let u=()=>((0,a.ti)("vuukle_test_user_ls","true"),!!(0,a._2)("vuukle_test_user_ls")&&((0,a.ti)("vuukle_test_user_ls",null),!0)),h=()=>(s.Z.set("vuukle_test_user_cookie","true",{sameSite:"Lax",secure:!0}),!!s.Z.get("vuukle_test_user_cookie")&&(s.Z.remove("vuukle_test_user_cookie"),!0));function g(){return o.Z.amp?u():h()}let m=e=>{let t=navigator.userAgent.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//);return t&&t[0]===e.toString()},f=e=>Object.keys(e).filter(t=>void 0!==e[t]&&null!==e[t]).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&"),p=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i instanceof FormData?"":"application/json",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Promise((n,r)=>{let l=new XMLHttpRequest,d="GET"===e?`${t}?${"object"==typeof i&&null!==i?f(i):{}}`:t;l.open(e,d,!0),s&&l.setRequestHeader("Content-Type",s),a&&l.setRequestHeader("Authorization",`Bearer ${a}`),o&&(l.withCredentials=!0),l.onload=()=>{l.status>=200&&l.status<300?n(JSON.parse(l.response)):r(Error(l.statusText))},l.onerror=()=>r(Error(l.statusText)),l.onabort=()=>r(Error("cancelled")),"GET"===e?l.send():i instanceof FormData?l.send(i):l.send(JSON.stringify(i))})},b=(e,t,i)=>{let s=[];for(let a=e;a<=t;a+=i)s.push(a);return s}},9533:function(e,t,i){"use strict";i.d(t,{_2:()=>n,m4:()=>o,ti:()=>a});var s=i(3921);function a(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;try{null===t?(i.localStorage.removeItem(e),i.localStorage.removeItem(`${e}_duration`)):i.localStorage.setItem(e,t)}catch(t){(0,s.qu)("warn",`Error saving/removing data to/from localStorage  ${e}`,t.message)}}function o(e,t,i){a(`${e}_duration`,(Date.now()+60*i*6e4).toString()),a(e,t)}function n(e){try{let t=localStorage.getItem(`${e}_duration`);if(!t)return localStorage.getItem(e);if(Date.now()>parseInt(t))return a(`${e}_duration`,null),a(e,null),null;return localStorage.getItem(e)}catch(t){return(0,s.qu)("warn",`Error getting data from localStorage: ${e}`,t.message),null}}},8356:function(e,t,i){"use strict";function s(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}i.d(t,{$f:()=>n,ZV:()=>s,vh:()=>o});var a=e=>Object.keys(e).filter(t=>void 0!==e[t]&&null!==e[t]).map(t=>"".concat(t,"=").concat(encodeURIComponent(e[t]))).join("&");function o(e){var t=document.createElement("p");return t.innerHTML=e,t.innerText.trim()}var n=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i instanceof FormData?"":"application/json",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Promise((r,l)=>{var d=new XMLHttpRequest,c="GET"===e?"".concat(t,"?").concat("object"==typeof i&&null!==i?a(i):{}):t;d.open(e,c,!0),s&&d.setRequestHeader("Content-Type",s),o&&d.setRequestHeader("Authorization","Bearer ".concat(o)),n&&(d.withCredentials=!0),d.onload=()=>{d.status>=200&&d.status<300?r(JSON.parse(d.response)):l(Error(d.statusText))},d.onerror=()=>l(Error(d.statusText)),d.onabort=()=>l(Error("cancelled")),"GET"===e?d.send():i instanceof FormData?d.send(i):d.send(JSON.stringify(i))})}},9847:function(e,t,i){"use strict";function s(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)e[s]=i[s]}return e}i.d(t,{Z:()=>a});let a=function e(t,i){function a(e,a,o){if("undefined"!=typeof document){"number"==typeof(o=s({},i,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var r in o)o[r]&&(n+="; "+r,!0!==o[r]&&(n+="="+o[r].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+n}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],s={},a=0;a<i.length;a++){var o=i[a].split("="),n=o.slice(1).join("=");try{var r=decodeURIComponent(o[0]);if(s[r]=t.read(n,r),e===r)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){a(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},4123:function(e,t,i){"use strict";i.d(t,{Z:()=>s});var s=function(e,t,i){var s=null,a=null,o=function(){s&&(clearTimeout(s),a=null,s=null)},n=function(){if(!t)return e.apply(this,arguments);var n=this,r=arguments,l=i&&!s;if(o(),a=function(){e.apply(n,r)},s=setTimeout(function(){if(s=null,!l){var e=a;return a=null,e()}},t),l)return a()};return n.cancel=o,n.flush=function(){var e=a;o(),e&&e()},n}},556:function(e,t,i){"use strict";i.d(t,{Z:()=>k});var s="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,o=(s||a||Function("return this")()).Symbol;let n=function(e,t){for(var i=-1,s=null==e?0:e.length,a=Array(s);++i<s;)a[i]=t(e[i],i,e);return a};var r=Array.isArray,l=Object.prototype,d=l.hasOwnProperty,c=l.toString,u=o?o.toStringTag:void 0;let h=function(e){var t=d.call(e,u),i=e[u];try{e[u]=void 0;var s=!0}catch(e){}var a=c.call(e);return s&&(t?e[u]=i:delete e[u]),a};var g=Object.prototype.toString,m=o?o.toStringTag:void 0;let f=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":m&&m in Object(e)?h(e):g.call(e)},p=function(e){return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==f(e)};var b=1/0,w=o?o.prototype:void 0,y=w?w.toString:void 0;let v=function e(t){if("string"==typeof t)return t;if(r(t))return n(t,e)+"";if(p(t))return y?y.call(t):"";var i=t+"";return"0"==i&&1/t==-b?"-0":i};var C=0;let k=function(e){var t=++C;return(null==e?"":v(e))+t}}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(s,a){if(1&a&&(s=this(s)),8&a||"object"==typeof s&&s&&(4&a&&s.__esModule||16&a&&"function"==typeof s.then))return s;var o=Object.create(null);i.r(o);var n={};e=e||[null,t({}),t([]),t(t)];for(var r=2&a&&s;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach(e=>{n[e]=()=>s[e]});return n.default=()=>s,i.d(o,n),o}})(),i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,s)=>(i.f[s](e,t),t),[])),i.u=e=>"749"===e?"frb.platform.js":""+({104:"webntf",108:"webntfpop",114:"awl",153:"iia",174:"chu",199:"pba",202:"sch",225:"svrn",233:"cnsnt",253:"ged",295:"abd",298:"awi",33:"uau",405:"oba",411:"sbi",524:"intl",543:"cmg",557:"pbl",605:"sbp",610:"mdi",685:"mdl",790:"stk",844:"ppv",897:"anv",92:"pbi",936:"sbl",984:"cst",992:"qcp"})[e]+".platform.js",i.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={};i.l=function(t,s,a,o){if(e[t])return void e[t].push(s);if(void 0!==a)for(var n,r,l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var c=l[d];if(c.getAttribute("src")==t){n=c;break}}n||(r=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,i.nc&&n.setAttribute("nonce",i.nc),n.src=t),e[t]=[s];var u=function(i,s){n.onerror=n.onload=null,clearTimeout(h);var a=e[t];if(delete e[t],n.parentNode&&n.parentNode.removeChild(n),a&&a.forEach(function(e){return e(s)}),i)return i(s)},h=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),r&&document.head.appendChild(n)}})(),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.rv=()=>"1.3.15",(()=>{i.g.importScripts&&(e=i.g.location+"");var e,t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var a=s.length-1;a>-1&&(!e||!/^http(s?):/.test(e));)e=s[a--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");i.p=e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")})(),(()=>{var e={909:0};i.f.j=function(t,s){var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else{var o=new Promise((i,s)=>a=e[t]=[i,s]);s.push(a[2]=o);var n=i.p+i.u(t),r=Error();i.l(n,function(s){if(i.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",r.name="ChunkLoadError",r.type=o,r.request=n,a[1](r)}},"chunk-"+t,t)}};var t=(t,s)=>{var a,o,[n,r,l]=s,d=0;if(n.some(t=>0!==e[t])){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);l&&l(i)}for(t&&t(s);d<n.length;d++)o=n[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},s=self.webpackChunk=self.webpackChunk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.ruid="bundler=rspack@1.3.15",(()=>{"use strict";var e=i(3921),t=i(6892),s=i(9847),a=i(5530),o=i(1026),n=i(9600),r=i(7087),l=i(5864),d=i(2595),c=i(339),u=i(8747),h=i(6914),g=i(9533);let m=class{isCreated=!1;mainPanelElement;panelContentDiv;constructor(){this.createCommentsPanel()}onPanelClose(){this.mainPanelElement.style.height="0",this.moveAdUnitTo("original-spot"),document.body.style.removeProperty("touch-action"),document.body.style.removeProperty("overflow")}showPanel(){this.mainPanelElement.style.height="100%",this.moveAdUnitTo("comments-panel"),document.body.style.setProperty("touch-action","none"),document.body.style.setProperty("overflow","hidden")}createCommentsPanel(){if(!this.isCreated){this.isCreated=!0;let e=document.createElement("div");e.tabIndex=-1,e.style.cssText=`
        height: 0;
        bottom: 0px;
        left: 0px;
        position: fixed;
        width: 100%;
        max-width: 100%;
        min-width: 100%;
        z-index: 100000;
        outline: none;
        transition: 0.3s all ease;
      `,this.mainPanelElement=e;let t=document.createElement("div");t.style.cssText=`
        transition: 0.3s all ease;
        position: absolute;
        background: rgb(255, 255, 255);
        bottom: 0px;
        height: 85%;
        max-height: calc(100% - 100px);
        max-width: 100%;
        min-width: 100%;
        box-shadow: rgb(204, 204, 204) 0px -2px 8px;    
      `;let i=document.createElement("div");i.style.cssText=`
        margin: 0px auto;
        min-width: 100%;
        z-index: 1;
        height: 100%;
        position: relative;
        width: 100%;
        overflow: auto;
      `;let s=document.createElement("div");s.style.cssText=`
        max-width: 700px;
        margin: 60px auto;
        margin-bottom: 10px;
      `,this.panelContentDiv=s;let a=document.createElement("button");a.style.cssText=`
        display: flex;
        justify-content: flex-end;
        position: absolute;
        align-items: center;
        cursor: pointer;
        right: 15px;
        top: 15px;
        color: rgb(0, 0, 0);
        font-size: 10px;
        font-weight: 900;
        line-height: 0.7;
        z-index: 100000;
        border: none;
        background: #fff;
      `,a.textContent="Close Panel",a.insertAdjacentHTML("beforeend",`
          <svg width="18px" height="18px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5V19M12 19L6 13M12 19L18 13" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `),a.addEventListener("click",this.onPanelClose.bind(this)),e.appendChild(t),t.appendChild(i),i.appendChild(a),i.appendChild(s),document.body.appendChild(e)}}};var f=i(4123),p=i(894);class b extends p.Z{config;articleIndex;constructor(e,t,i=""){if(super(e,"Vuukle Comments Widget",a.Z.urls.comments,{amp:t.amp,sdk:t.sdk,apiKey:t.apiKey,host:t.host,articleId:t.articleId,author:t.author||void 0,globalLang:t.language,img:t.img,lang:t.comments&&t.comments.transliteration.language,tags:t.tags,title:t.title,url:t.url,referrer:t.refHost,font:t.theme&&t.theme.font,emotesEnabled:t.emotes&&t.emotes.enabled||!0,refHost:t.refHost,l_d:t.comments&&t.comments.transliteration.enabledByDefault,totWideImg:t.recommendationsWideImages,link:t.link,gr:t.globalRecommendations,hideCommentBoxWithButton:t.comments&&t.comments.hideCommentInputBoxWithButton,wpSync:t.wordpressSync,disableButtons:t.comments&&t.comments.disableButtons,isInIframe:!0,hasAnonFallback:!!r.Z.getAnonToken(),isCustomText:!!t.customTranslationUrl,version:a.Z.versions.comments,debug:"true"===new URLSearchParams(window.location.search).get("vdebug")},!1,!1),this.config=t,this.articleIndex=i,this.bubbleOperationCallbacks=new Set,this.persistBubble=!1,this.realtimeBar=null,this.commentCount=0,this.createRealtimeBar=()=>{document.querySelector("#vuukle-comments-realtime-bar".concat(this.articleIndex))||(this.realtimeBar=document.createElement("div"),this.realtimeBar.style.cssText=`
        // position: fixed;
        // top: 0;
        // left: 0;
        width: 100%;
        height: 25px;
        background: #3997e9;
        color: #fff;
        cursor: pointer;
        font-size: 15px;
        font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',sans-serif;
        font-weight: 500;
        text-align: center;
        // z-index: 9999;
        display: none;
      `,this.realtimeBar.id="vuukle-comments-realtime-bar".concat(this.articleIndex),this.realtimeBar.textContent="",this.realtimeBar.onclick=()=>{this.iframe.scrollIntoView(),this.realtimeBar&&(this.realtimeBar.style.display="none",this.realtimeBar.textContent="",R.commentCountLock=!1),this.onLoad(e=>e.postMessage({loadNewRealtime:!0},"*"))},document.body.insertAdjacentElement("afterbegin",this.realtimeBar))},this.serverScrollLogger=e=>{if(e)return o.Z.log("view_comments",this.config),this.onLoad(e=>e.postMessage({isViewed:!0},"*")),()=>!1;let t=!1;return(0,f.Z)(e=>{e&&!t&&(o.Z.log("view_comments",this.config),this.onLoad(e=>e.postMessage({isViewed:!0},"*")),t=!0)},300)},this.intersectionObserverOptions={threshold:0,rootMargin:"400px 400px 400px 400px"},this.articleIndex=i,this.iframe.allow="web-share",this.iframe.style.minWidth="100%",this.iframe.style.overflow="hidden",this.iframe.style.order="1",this.iframe.style.minHeight=l.xw[t.apiKey]?.compact?"50px":"320px",this.onLoad(e=>e.postMessage({cardStyles:t.theme&&t.theme.cardStyles},"*")),this.onLoad(e=>e.postMessage({listenButtonStyles:t.theme&&t.theme.listenButtonStyles},"*")),window.location.hash&&window.location.hash.match(/commentID/)){let e=window.location.hash.split("-")[1];this.onLoad(t=>{if(t.postMessage({loadComment:e},"*"),"interactive"===document.readyState||"complete"==document.readyState)setTimeout(()=>{let e=this.iframe.getBoundingClientRect();window.scrollTo(e.x,e.y)},1500);else{let e=this.iframe;document.addEventListener("readystatechange",function t(){("interactive"===document.readyState||"complete"===document.readyState)&&setTimeout(()=>{let i=e.getBoundingClientRect();window.scrollTo(i.x,i.y),document.removeEventListener("readystatechange",t)},1500)})}}),this.loadIframe()}let s=this.serverScrollLogger(t.amp||!1);"undefined"!=typeof IntersectionObserver?new IntersectionObserver(e=>{e.forEach(e=>{let{boundingClientRect:t,intersectionRatio:i,isIntersecting:a}=e,o=i>.025||a;scheduler.postTask(()=>{s(o)},{priority:"background"}),o&&this.realtimeBar&&t.top>=-300&&(this.realtimeBar.style.display="none")})},{threshold:.1}).observe(this.iframe):window.addEventListener("scroll",()=>{scheduler.postTask(()=>{s(this.isInView)},{priority:"background"}),this.isInView&&this.realtimeBar&&this.iframe.getBoundingClientRect().top>=-300&&(this.realtimeBar.style.display="none")},!1)}bubbleOperationCallbacks;persistBubble;changeMinHeight(e){this.iframe.style.minHeight=`${e}px`}createScrollListenerForCommentBubble(e,t,i,s){let a=this.createCommentBubble(e);if(a){let e=0,r=s/100,{bubble:d,bubbleMenu:c,backButton:u,backMenu:h,containerButton:g}=a,m=this.bubbleOperationCallbacks;g.addEventListener("click",t=>{t.preventDefault(),e=document.documentElement.scrollTop,scheduler.postTask(()=>{o.Z.log("CWbubbleClick",this.config)},{priority:"background"}),this.iframe.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),h.style.display="flex",c.style.display="none",d.style.display="none"}),u.addEventListener("click",()=>{document.documentElement.scrollTop=e,h.style.display="none",c.style.display="none",d.style.display="flex"});let f=this,p=!1,b=!1;function n(){let e=window.scrollY,i=document.documentElement.scrollHeight,s=document.documentElement.clientHeight;b&&(f.isInView?(h.style.display="flex",c.style.display="none",d.style.display="none"):(h.style.display="none",d.style.display="flex")),!(e/(i-s)>=r)||t||p||(b=!0,d.style.display="flex",p=!0,m.forEach(e=>e()),setTimeout(()=>{f.persistBubble||(window.removeEventListener("scroll",n),d?.remove(),c?.remove(),h?.remove())},1e4))}l.ww.includes(this.config.apiKey)||window.addEventListener("scroll",n),t&&setTimeout(()=>{b=!0,d.style.display="flex",m.forEach(e=>e()),setTimeout(()=>{this.persistBubble||(window.removeEventListener("scroll",n),d?.remove(),c?.remove(),h?.remove())},1e4)},1e3*i)}}createCommentBubble(e){if(document.querySelector(`#vuukle-comments-bubble-${this.id}`))return;let t=document.createElement("div"),i=document.createElement("span"),s=document.createElement("button"),a=document.createElement("button"),o=document.createElement("span"),r=document.createElement("div"),l=document.createElement("button"),d=document.createElement("div"),c=document.createElement("button");t.className="vuukle-comments-bubble",t.style.cssText=`
      position: fixed;
      display: none;
      align-items: center;
      justify-content: center;
      left: 50%;
      transform: translate(-50%, 0);
      bottom: 100px;
      width: 128px;
      height: 40px;
      background: #fff;
      color: #000;
      border: 1px solid #c1c1c1;
      border-radius: 6px;
      box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.15);
      text-align: center;
      transition: all 0.5s;
      text-decoration: none;
      z-index: 100000;
    `,r.className="vuukle-comments-bubble-menu",r.style.cssText=`
      position: fixed;
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      left: 50%;
      transform: translate(-50%, 0);
      bottom: 160px;
      width: 128px;
      height: 40px;
      background: #fff;
      color: #000;
      border: 1px solid #c1c1c1;
      border-radius: 6px;
      box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.15);
      text-align: center;
      transition: all 0.5s;
      text-decoration: none;
      z-index: 100000;
  `,d.className="vuukle-comments-bubble-back-button-container",d.style.cssText=`
      position: fixed;
      display: none;
      align-items: center;
      justify-content: center;
      left: 50%;
      transform: translate(-50%, 0);
      bottom: 100px;
      width: 128px;
      height: 40px;
      background: #fff;
      color: #000;
      border: 1px solid #c1c1c1;
      border-radius: 6px;
      box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.15);
      text-align: center;
      transition: all 0.5s;
      text-decoration: none;
      z-index: 100000;    
    `,i.style.cssText=`
      color: #000;
      line-height: 25px;
      text-align: center;
      padding: 0px 5px;
      font-size: 13px;
      font-weight: 400;
      z-index: 100000;
    `,s.className="vuukle-comments-bubble-three-dots",s.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      border-left: 1px solid #ccc;
      padding-left: 10px;
      display: ${n.Z.isMobileUser?"block":"none"};
      opacity: ${n.Z.isMobileUser?"1":"0"};
      animation: three-dots-fade-in 0.5s;
    `,a.className="vuukle-comments-bubble-container-button",a.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    `,l.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
      justify-content: center;
    `,c.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      width: 100%;
      justify-content: center;
    `,c.innerHTML=`
      <span>Back</span>
      <svg fill="#000000" width="14px" height="14px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><line x1="12" y1="21" x2="12" y2="3" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></line><polyline points="15 6 12 3 9 6" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline></svg>
    `,l.innerHTML=`
      <svg width="24px" height="24px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z" fill="#000000"/><path d="M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z" fill="#000"/></svg>
      <span>Hide</span>
    `,s.innerHTML=`
      <svg height="20px" width="20px" fill="#ccc" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16">
        <path d="M8,6.5A1.5,1.5,0,1,1,6.5,8,1.5,1.5,0,0,1,8,6.5ZM.5,8A1.5,1.5,0,1,0,2,6.5,1.5,1.5,0,0,0,.5,8Zm12,0A1.5,1.5,0,1,0,14,6.5,1.5,1.5,0,0,0,12.5,8Z"/>
      </svg>
    `,o.innerHTML=`
      <svg fill="#000" width="14px" height="14px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <line x1="12" y1="3" x2="12" y2="21" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></line>
        <polyline points="9 18 12 21 15 18" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline>
      </svg>
    `,a.insertAdjacentHTML("afterbegin",'<svg style="cursor: pointer; width: 24px; height: 24px; fill: #4885ED; vertical-align: middle; display: block;" viewbox="0 0 24 24"><path d="M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z"></path></svg>'),t.id=`vuukle-comments-bubble-${this.id}`;let u=document.createElement("style");return u.id=`vuukle-comments-bubble-styles-${this.id}`,u.innerHTML=`
      .vuukle-comments-bubble:hover .vuukle-comments-bubble-three-dots {
        display: flex !important;
        opacity: 1 !important;
      }

      @keyframes three-dots-fade-in {
        0% { opacity: 0; }
        100% { opacity: 1; }
      }
    `,l.addEventListener("click",()=>{t.remove(),u.remove(),r.remove(),d.remove()}),s.addEventListener("click",e=>{e.preventDefault(),"none"===r.style.display?r.style.display="flex":r.style.display="none"}),i.innerHTML=0===e?"":e.toString(),a.appendChild(i),a.appendChild(o),t.appendChild(a),t.appendChild(s),r.appendChild(l),d.appendChild(c),document.body.appendChild(t),document.body.appendChild(u),document.body.appendChild(r),document.body.appendChild(d),{bubble:t,bubbleMenu:r,containerButton:a,backMenu:d,backButton:c}}changeBubblePosition(e){this.bubbleOperationCallbacks.add(()=>{let t=document.getElementById(`vuukle-comments-bubble-${this.id}`);t&&("left"===e?(t.style.removeProperty("right"),t.style.left="20px"):(t.style.removeProperty("left"),t.style.right="20px"))})}makeBubblePersistent(e){this.persistBubble=e}realtimeBar;commentCount;get isCommentInputBoxInView(){let e=this.iframe.getBoundingClientRect();if(!R.commentInputBoxRect)return e.bottom>0&&e.right>0&&e.left<window.innerWidth&&e.top<window.innerHeight;{let t=R.commentInputBoxRect,i=new DOMRect(e.left+t.left,e.top+t.top,t.width,t.height);return i.bottom>0&&i.right>0&&i.left<window.innerWidth&&i.bottom<window.innerHeight}}createRealtimeBar;serverScrollLogger}let w=class extends m{widgetObject;index;articleConfig;loadVuukleData;widgetsCreator;listenerInstance;modalListenerInstance;loadVuukleSent;constructor(e,t,i,s,a){super(),this.widgetObject=e,this.index=t,this.articleConfig=i,this.loadVuukleData=s,this.widgetsCreator=a,this.loadVuukleSent=!1,this.createCommentsAndModalInstance()}sendLoadVuukleData(e){let t=setInterval(()=>{if(this.loadVuukleSent)return void clearInterval(t);void 0!==this.listenerInstance&&void 0!==this.modalListenerInstance&&(this.listenerInstance.postMessage({loadVuukle:e}),e.settings.theme.color&&this.listenerInstance?.setThemeColor(e.settings.theme.color),this.modalListenerInstance.postMessage({loadVuukle:e}),this.loadVuukleSent=!0,clearInterval(t))},100)}moveAdUnitTo(e){let t=this.widgetObject.iframe.parentElement;if(t){let i="comments-panel"===e?t.querySelector(".vuukle-ads"):this.panelContentDiv.querySelector(".vuukle-ads");if(i){"comments-panel"===e?this.panelContentDiv.prepend(i):t.prepend(i);let s=i.querySelector('div[id*="div-gpt-ad"]');if(s){let e=s.id;window.vuuklehb&&window.vuuklehb.vRefresh&&window.vuuklehb.vRefresh(e,!0)}}}}async createCommentsAndModalInstance(){let e=new b("v-comments".concat(this.index),this.articleConfig,this.index),t=new y(e,this.index,this.articleConfig,this.widgetsCreator,void 0,void 0,void 0,void 0,void 0);this.listenerInstance=t;let s=new(await i.e("984").then(i.bind(i,7494))).default(e,void 0,void 0,[],void 0,this.articleConfig),a=new(await i.e("610").then(i.bind(i,4822))).default("comments-panel-modal-iframe".concat(this.index),this.articleConfig),o=new(await i.e("685").then(i.bind(i,5675))).ModalListener(a,this.articleConfig,[],t,void 0,void 0,void 0);this.modalListenerInstance=o;let n=!1,r=!1;t.updateModalInstance(a,o),R.widgetsOnPageWithThemeSupport[`${this.index}-2`]={modalListener:o,commentsListener:t},s.initializeModal(a),this.loadVuukleSent||void 0===this.loadVuukleData||(n=!0,o.postMessage({loadVuukle:this.loadVuukleData})),a.loadIframe();let l=document.createElement("div");l.appendChild(a.iframe),document.body.appendChild(l),this.panelContentDiv.appendChild(e.iframe),!this.loadVuukleSent&&void 0!==this.loadVuukleData&&(r=!0,t.postMessage({loadVuukle:this.loadVuukleData}),this.loadVuukleData.settings.theme.color&&this.listenerInstance?.setThemeColor(this.loadVuukleData.settings.theme.color)),this.loadVuukleSent=n&&r,e.loadIframe()}};class y extends u.Y{widgetObject;index;articleConfig;widgetsCreator;emotesListener;powerbarListeners;audioWidgetListeners;quizListener;modalListener;modalIframe;themeColor;commentsPanel;loadVuukleData;isAdblockDetected;constructor(t,s,a,o,u,m=[],f=[],p,b){if(super(t),this.widgetObject=t,this.index=s,this.articleConfig=a,this.widgetsCreator=o,this.emotesListener=u,this.powerbarListeners=m,this.audioWidgetListeners=f,this.quizListener=p,this.modalListener=b,this.listener=async t=>{if(this.isValidEvent(t)){if((0,e.qu)("log","[Vuukle.js | Comments] message:",t),t.data.syncWidget instanceof Object&&this.synchronizeWidgets(t),t.data.reportEvent&&this.reportToAnalyticsServer(t),"object"==typeof t.data.realtimeMessage&&"commentPosted"===t.data.realtimeMessage.type&&R.postedCommentCount++,t.data.commentInputBoxRect&&(R.commentInputBoxRect=t.data.commentInputBoxRect),t.data.realtimeCommentsLoaded&&(R.commentCountLock=!1),t.data.realtimeRepliesLoaded&&"number"==typeof t.data.realtimeRepliesLoaded&&(this.widgetObject.commentCount+=t.data.realtimeRepliesLoaded),t.data.loadModal){t.data.loginTypes&&this.articleConfig.amp&&this.articleConfig.ampLoginTypes&&(t.data.loginTypes=this.articleConfig.ampLoginTypes),this.modalListener?this.modalListener.postMessage(t.data):await this.widgetsCreator.createModal(t.data);let e=this.widgetObject.iframe.parentElement;this.modalListener?.switchThemeToDarkMode(.3>(0,c.E)(e)),this.modalListener?.changeThemeColor(this.themeColor),this.modalListener?.sendAdblockDetectedMessage(this.isAdblockDetected),t.data.loginTypes&&this.powerbarListeners.forEach(e=>{e.postMessage({loginTypesSent:!0})})}if(t.data.vuukle_event&&this.shareEventToPublished(t.data.vuukle_event,this.articleConfig.eventHandler),t.data.articleData instanceof Object&&this.updateCommentCounts(t),t.data.settings&&t.data.settings.theme&&t.data.settings.theme.color&&this.updateTXColor(t),t.data.anonToken&&(r.Z.setAnonymousCommenting(!0),r.Z.setRegularCommenting(!1),r.Z.setGuestCommenting(!1),r.Z.saveToken(t.data.anonToken),r.Z.setAnonToken(t.data.anonToken)),t.data.removeAnonToken&&(r.Z.setAnonToken(null),r.Z.removeToken()),"string"==typeof t.data.updatedUID&&(n.Z.userAPIKey=t.data.updatedUID,this.setUserID(t.data.updatedUID),this.emotesListener?.updateVotedEmote(),this.powerbarListeners.forEach(e=>{e.setUserIdAvailable(!0),e.updateRecommendedState()})),t.data.modalData&&this.openModalWithMessage(t),t.data.callSSO&&(r.Z.setSSOInfo(!0),this.performSSOAuth()),t.data.openBrowserLink&&(window.location.href=t.data.openBrowserLink),"boolean"==typeof t.data.isEmailVerified&&this.modalListener&&this.modalListener.postMessage({isEmailVerified:t.data.isEmailVerified}),"string"==typeof t.data.userId&&this.powerbarListeners.forEach(e=>e.postMessage({userId:t.data.userId})),t.data.alertMessage&&d.Z.createNotification(t.data.alertMessage.text,t.data.alertMessage.type),t.data.userInfo&&this.emotesListener&&this.emotesListener.postMessage({userInfo:t.data.userInfo}),t.data.loggedOut&&this.handleLogout(),"listenState"in t.data&&!("firstClick"in t.data)){let{listenState:e}=t.data;this.powerbarListeners.forEach(t=>t.postMessage({listenState:e})),this.audioWidgetListeners.forEach(t=>t.postMessage({listenState:e}))}if("listenState"in t.data&&"firstClick"in t.data){let{firstClick:e,listenState:i}=t.data;this.powerbarListeners.forEach(t=>t.postMessage({listenState:i,firstClick:e})),this.audioWidgetListeners.forEach(t=>t.postMessage({listenState:i,firstClick:e}))}if("audioSrc"in t.data&&this.shareAudioSyncMessage(t.data,"audioSrc"),"currentTime"in t.data&&this.shareAudioSyncMessage(t.data,"currentTime"),"hasEnded"in t.data&&this.shareAudioSyncMessage(t.data,"hasEnded"),"welcomeAudioStarted"in t.data&&this.shareAudioSyncMessage(t.data,"welcomeAudioStarted"),"welcomeAudioSrc"in t.data&&this.shareAudioSyncMessage(t.data,"welcomeAudioSrc"),"welcomeAudioTime"in t.data&&this.shareAudioSyncMessage(t.data,"welcomeAudioTime"),t.data.forgetToken&&(r.Z.removeToken(),this.powerbarListeners.forEach(e=>{e.postMessage({loginToken:null})}),this.emotesListener?.postMessage({loginToken:null}),this.modalListener?.postMessage({removeSLToken:!0}),this.quizListener?.postMessage({loginToken:null})),t.data.shareLoginTypes&&this.modalListener?.postMessage({loginTypes:this.articleConfig.amp&&this.articleConfig.ampLoginTypes?this.articleConfig.ampLoginTypes:t.data.shareLoginTypes}),t.data.cookieUsageAgreed&&(i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("vuukle_cookie_usage_agreed",()=>{(0,g.ti)("vuukle_cookie_usage_agreed","true")}),e.default.hasConsent=!0,e.default.cookieConsentKnown=!0}),n.Z.canUseCookies=!0,this.quizListener?.postMessage({cookieNoticeConfirmed:!0}),this.widgetsCreator.communicationCreator.confirmCookieNotice()),t.data.loadMoreArticlesClicked&&this.articleConfig.sdk&&(window.webkit?.messageHandlers?.LoadMoreArticles?.postMessage("Load more articles"),console.log("Load more articles clicked")),t.data.loadMoreCommentsClicked&&this.articleConfig.sdk&&(window.webkit?.messageHandlers?.LoadMoreComments?.postMessage("Load more comments"),console.log("Load more comments clicked")),"getScrollY"===t.data.type){let e=window.scrollY,i=document.querySelector(t.data.selector).offsetTop;this.postMessage({type:"scrollYResponse",scrollY:e,offsetTop:i})}}},window.addEventListener("message",this.listener),window.addEventListener("click",e=>{let i=t.iframe.parentElement,s=e.target;s&&i&&(s===i||i.contains(s)||this.postMessage({closeCommentsModal:!0}))}),this.postMessage({canUseCookies:n.Z.canUseCookies}),r.Z.addSSOTokenListener(`${t.id}-listener`,e=>{this.postMessage({authenticateUser:{token:e}})}),r.Z.addSSOLogoutListener(`${t.id}-listener`,()=>{this.postMessage({authenticateUser:{signOut:!0}})}),a.amp){a.comments.hideRecommendedArticles&&this.postMessage({disableToT:!0}),a.theme?.darkMode&&this.postMessage({enableDarkMode:!0});let e=setInterval(()=>{window.hasResized&&(this.postMessage({hasResized:!0}),clearInterval(e))},5e3)}this.postMessage({loginToken:r.Z.getToken()});let w=50,y=setInterval(()=>{if(0===w)return void clearInterval(y);let e=t.iframe.parentElement;if(e){let t=(0,c.A)(e);this.postMessage({backgroundColor:t}),this.postMessage({shouldUseDarkMode:.3>(0,c.E)(e)}),clearInterval(y)}w--},100);if(this.audioWidgetListeners.length>0&&this.postMessage({showAudioButton:!1}),l.xw[a.apiKey]?.compact&&this.postMessage({compactMode:!0}),this.postMessage({isMobile:n.Z.isMobileUser}),this.postMessage({cookiesDisabled:!(0,h.tA)()}),n.Z.userCountryDetermined){let e="true"===(0,g._2)("vuukle_cookie_usage_agreed");i.e("543").then(i.bind(i,2237)).then(t=>{t.default.isGDPR&&void 0===window.__tcfapi&&(e?(n.Z.canUseCookies=!0,t.default.hasConsent=!0):this.postMessage({showCookieNotice:!0})),t.default.isGDPR&&void 0!==window.__tcfapi&&t.default.addVendorPresenceListener(e=>{e||this.postMessage({showCookieNotice:!0})})})}else{let e=setInterval(()=>{if(n.Z.userCountryDetermined){let t="true"===(0,g._2)("vuukle_cookie_usage_agreed");i.e("543").then(i.bind(i,2237)).then(e=>{e.default.isGDPR&&void 0===window.__tcfapi&&(t?(n.Z.canUseCookies=!0,e.default.hasConsent=!0):this.postMessage({showCookieNotice:!0})),e.default.isGDPR&&void 0!==window.__tcfapi&&e.default.addVendorPresenceListener(e=>{e||this.postMessage({showCookieNotice:!0})})}),clearInterval(e)}},1e3)}}listener;async setUserID(e){let t=await i.e("543").then(i.bind(i,2237));n.Z.canUseCookies?t.default.executeWhenStorageValueCanBeSet("vuukle_user_id",()=>{(0,g.ti)("vuukle_user_id",e)}):n.Z.addStorageUpdateCallback(()=>{t.default.executeWhenStorageValueCanBeSet("vuukle_user_id",()=>{(0,g.ti)("vuukle_user_id",e)})})}setLoadVuukleData(e){this.loadVuukleData=e,this.commentsPanel?.sendLoadVuukleData(e)}setThemeColor(e){this.themeColor=e}showCommentsPanel(){void 0===this.commentsPanel&&(this.commentsPanel=new w(this.widgetObject,`${this.index}-2`,this.articleConfig,this.loadVuukleData,this.widgetsCreator)),this.commentsPanel.showPanel()}shareAudioSyncMessage(e,t){let i=e[t];this.powerbarListeners.forEach(e=>e.postMessage({[t]:i})),this.audioWidgetListeners.forEach(e=>e.postMessage({[t]:i}))}updateCommentCounts(e){let{articleData:t}=e.data;R.fillVuukleCountElement(this.index,t.commentCount||0)}reportToAnalyticsServer(e){let{action:t}=e.data.reportEvent;"string"==typeof t&&o.Z.log(t,this.articleConfig)}performSSOAuth(){let e=this.articleConfig.comments?.auth?.sso?.onClick||this.articleConfig.auth?.sso?.onClick;"function"==typeof e?e():console.error(`[Vuukle] \u{26A0} Please configure SSO to allow users to authenticate.`)}openModalWithMessage(e){if(this.modalListener){this.modalListener.postMessage({modalData:{...e.data.modalData,data:{...e.data.modalData.data,..."login"===e.data.modalData.type?{loginFrom:"comments"}:{}}},loginTypes:this.articleConfig.amp&&this.articleConfig.ampLoginTypes?this.articleConfig.ampLoginTypes:e.data.loginTypes});let t=document.querySelector(`#${this.modalIframe.id}`);t&&(t.style.display=e.data.modalData.hideModal?"none":"block")}}handleLogout(){if(i.e("543").then(i.bind(i,2237)).then(e=>{(e.default.isGDPR||e.default.isCCPA)&&!n.Z.canUseCookies&&this.deleteCookies()}),this.emotesListener&&(this.emotesListener.postMessage({userInfo:{apiKey:null}}),this.emotesListener.updateVotedEmote()),this.quizListener&&this.quizListener.postMessage({loginToken:null}),r.Z.isSSO){let e=this.articleConfig.auth?.sso?.onLogout||this.articleConfig.comments.auth?.sso?.onLogout;e&&e()}}synchronizeWidgets(e){e.data.syncWidget.commentAdded&&this.powerbarListeners.forEach(t=>t.postMessage({syncWidget:{commentAdded:e.data.syncWidget.commentAdded}})),e.data.syncWidget.addCommentsToCounter&&this.powerbarListeners.forEach(t=>t.postMessage({syncWidget:{addCommentsToCounter:e.data.syncWidget.addCommentsToCounter}}))}updateTXColor(e){let t=document.querySelector(a.Z.selectors.trafficExchange.concat(this.index));if(t){let i=document.createElement("style");i.innerHTML=`
        #${t.id} .vuukle-tx-read-more {
          background: ${e.data.settings.theme.color};
        }
      `,document.head.appendChild(i)}}deleteCookies(){this.postMessage({deleteCookies:!0}),this.emotesListener&&this.emotesListener.removeCookies(),this.powerbarListeners.forEach(e=>{e.postMessage({deleteCookies:!0}),e.removeCookies()}),this.modalListener&&this.modalListener.postMessage({deleteCookies:!0}),n.Z.deleteCookies()}shareEventToPublished(e,t){"function"==typeof t&&t(e)}updateModalInstance(e,t){this.modalListener=t,this.modalIframe=e}updateQuizListenerInstance(e){this.quizListener=e}setIsAdblockDetected(e){this.isAdblockDetected=e}changeTheme(e){this.postMessage({changeTheme:e})}addCustomTriggerForCommentsPanel(e){let t=document.querySelector(e);t&&t.addEventListener("click",()=>{this.showCommentsPanel()})}}class v{widgetObject;constructor(e){this.widgetObject=e}isValidEvent(e){if(!(e instanceof Object)&&!(e.data instanceof Object)&&!e.data.sourceWindowName)return!1;let t=!1;if(Array.isArray(this.widgetObject))for(let i of this.widgetObject)i.id===e.data.sourceWindowName&&(t=!0);else t=e.data.sourceWindowName===this.widgetObject.id;return t}postMessage(e){Array.isArray(this.widgetObject)?this.widgetObject.forEach(t=>{t.onLoad(t=>t.dispatchEvent(new MessageEvent("message",{data:e})))}):this.widgetObject.onLoad(t=>t.dispatchEvent(new MessageEvent("message",{data:e})))}removeMessageListener(){window.removeEventListener("message",this.listener)}}let C=class extends m{widgetObject;constructor(e){super(),this.widgetObject=e}onPanelClose(){super.onPanelClose(),this.widgetObject.hostDiv.appendChild(this.widgetObject.attachmentDiv)}showPanel(){super.showPanel(),this.panelContentDiv.appendChild(this.widgetObject.attachmentDiv),this.widgetObject.widgetLoaded||this.widgetObject.loadWidget()}moveAdUnitTo(e){let t=this.widgetObject.hostDiv;if(t){let i="comments-panel"===e?t.querySelector(".vuukle-ads"):this.panelContentDiv.querySelector(".vuukle-ads");if(i){"comments-panel"===e?this.panelContentDiv.prepend(i):t.prepend(i);let s=i.querySelector('div[id*="div-gpt-ad"]');if(s){let e=s.id;window.vuuklehb&&window.vuuklehb.vRefresh&&window.vuuklehb.vRefresh(e,!0)}}}}};class k extends v{widgetObject;index;articleConfig;widgetsCreator;emotesListener;powerbarListeners;audioWidgetListeners;quizListener;modalListener;modalIframe;themeColor;commentsPanel;isAdblockDetected;constructor(t,s,a,o,u,m=[],f=[],p,b){if(super(t),this.widgetObject=t,this.index=s,this.articleConfig=a,this.widgetsCreator=o,this.emotesListener=u,this.powerbarListeners=m,this.audioWidgetListeners=f,this.quizListener=p,this.modalListener=b,this.listener=async t=>{if(this.isValidEvent(t)){if((0,e.qu)("log","[Vuukle.js | Comments] message:",t),t.data.syncWidget instanceof Object&&this.synchronizeWidgets(t),t.data.reportEvent&&this.reportToAnalyticsServer(t),t.data.commentInputBoxRect&&(R.commentInputBoxRect=t.data.commentInputBoxRect),t.data.realtimeCommentsLoaded&&(R.commentCountLock=!1),t.data.realtimeRepliesLoaded&&"number"==typeof t.data.realtimeRepliesLoaded&&(this.widgetObject.commentCount+=t.data.realtimeRepliesLoaded),t.data.loadModal){t.data.loginTypes&&this.articleConfig.amp&&this.articleConfig.ampLoginTypes&&(t.data.loginTypes=this.articleConfig.ampLoginTypes),this.modalListener?this.modalListener.postMessage(t.data):await this.widgetsCreator.createModal(t.data);let e=this.widgetObject.hostDiv;this.modalListener?.switchThemeToDarkMode(.3>(0,c.E)(e)),this.modalListener?.changeThemeColor(this.themeColor),this.modalListener?.sendAdblockDetectedMessage(this.isAdblockDetected),t.data.loginTypes&&this.powerbarListeners.forEach(e=>{e.postMessage({loginTypesSent:!0})})}if(t.data.vuukle_event&&this.shareEventToPublished(t.data.vuukle_event,this.articleConfig.eventHandler),t.data.articleData instanceof Object&&this.updateCommentCounts(t),t.data.settings&&t.data.settings.theme&&t.data.settings.theme.color&&this.updateTXColor(t),t.data.anonToken&&(r.Z.setAnonymousCommenting(!0),r.Z.setRegularCommenting(!1),r.Z.setGuestCommenting(!1),r.Z.saveToken(t.data.anonToken),r.Z.setAnonToken(t.data.anonToken)),t.data.removeAnonToken&&(r.Z.setAnonToken(null),r.Z.removeToken()),"string"==typeof t.data.updatedUID&&(n.Z.userAPIKey=t.data.updatedUID,this.setUserID(t.data.updatedUID),this.emotesListener?.updateVotedEmote(),this.powerbarListeners.forEach(e=>{e.setUserIdAvailable(!0),e.updateRecommendedState()})),t.data.modalData&&this.openModalWithMessage(t),t.data.callSSO&&(r.Z.setSSOInfo(!0),this.performSSOAuth()),t.data.openBrowserLink&&(window.location.href=t.data.openBrowserLink),"boolean"==typeof t.data.isEmailVerified&&this.modalListener&&this.modalListener.postMessage({isEmailVerified:t.data.isEmailVerified}),"string"==typeof t.data.userId&&this.powerbarListeners.forEach(e=>e.postMessage({userId:t.data.userId})),t.data.alertMessage&&d.Z.createNotification(t.data.alertMessage.text,t.data.alertMessage.type),t.data.userInfo&&this.emotesListener&&this.emotesListener.postMessage({userInfo:t.data.userInfo}),t.data.loggedOut&&this.handleLogout(),"listenState"in t.data&&!("firstClick"in t.data)){let{listenState:e}=t.data;this.powerbarListeners.forEach(t=>t.postMessage({listenState:e})),this.audioWidgetListeners.forEach(t=>t.postMessage({listenState:e}))}if("listenState"in t.data&&"firstClick"in t.data){let{firstClick:e,listenState:i}=t.data;this.powerbarListeners.forEach(t=>t.postMessage({listenState:i,firstClick:e})),this.audioWidgetListeners.forEach(t=>t.postMessage({listenState:i,firstClick:e}))}if("audioSrc"in t.data&&this.shareAudioSyncMessage(t.data,"audioSrc"),"currentTime"in t.data&&this.shareAudioSyncMessage(t.data,"currentTime"),"hasEnded"in t.data&&this.shareAudioSyncMessage(t.data,"hasEnded"),"welcomeAudioStarted"in t.data&&this.shareAudioSyncMessage(t.data,"welcomeAudioStarted"),"welcomeAudioSrc"in t.data&&this.shareAudioSyncMessage(t.data,"welcomeAudioSrc"),"welcomeAudioTime"in t.data&&this.shareAudioSyncMessage(t.data,"welcomeAudioTime"),t.data.forgetToken&&(r.Z.removeToken(),this.powerbarListeners.forEach(e=>{e.postMessage({loginToken:null})}),this.emotesListener?.postMessage({loginToken:null}),this.modalListener?.postMessage({removeSLToken:!0}),this.quizListener?.postMessage({loginToken:null})),t.data.shareLoginTypes&&this.modalListener?.postMessage({loginTypes:this.articleConfig.amp&&this.articleConfig.ampLoginTypes?this.articleConfig.ampLoginTypes:t.data.shareLoginTypes}),t.data.cookieUsageAgreed&&(i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("vuukle_cookie_usage_agreed",()=>{(0,g.ti)("vuukle_cookie_usage_agreed","true")}),e.default.hasConsent=!0,e.default.cookieConsentKnown=!0}),n.Z.canUseCookies=!0,this.quizListener?.postMessage({cookieNoticeConfirmed:!0}),this.widgetsCreator.communicationCreator.confirmCookieNotice()),t.data.loadMoreArticlesClicked&&this.articleConfig.sdk&&(window.webkit?.messageHandlers?.LoadMoreArticles?.postMessage("Load more articles"),console.log("Load more articles clicked")),t.data.loadMoreCommentsClicked&&this.articleConfig.sdk&&(window.webkit?.messageHandlers?.LoadMoreComments?.postMessage("Load more comments"),console.log("Load more comments clicked")),"getScrollY"===t.data.type){let e=window.scrollY,i=document.querySelector(t.data.selector).offsetTop;this.postMessage({type:"scrollYResponse",scrollY:e,offsetTop:i})}}},window.addEventListener("message",this.listener),window.addEventListener("click",e=>{let i=t.hostDiv,s=e.target;s&&i&&(s===i||i.contains(s)||this.postMessage({closeCommentsModal:!0}))}),this.postMessage({canUseCookies:n.Z.canUseCookies}),r.Z.addSSOTokenListener(`${t.id}-listener`,e=>{this.postMessage({authenticateUser:{token:e}})}),r.Z.addSSOLogoutListener(`${t.id}-listener`,()=>{this.postMessage({authenticateUser:{signOut:!0}})}),a.amp){a.comments.hideRecommendedArticles&&this.postMessage({disableToT:!0}),a.theme?.darkMode&&this.postMessage({enableDarkMode:!0});let e=setInterval(()=>{window.hasResized&&(this.postMessage({hasResized:!0}),clearInterval(e))},5e3)}this.postMessage({loginToken:r.Z.getToken()});let w=50,y=setInterval(()=>{if(0===w)return void clearInterval(y);let e=t.hostDiv;if(e){let t=(0,c.A)(e);this.postMessage({backgroundColor:t}),this.postMessage({shouldUseDarkMode:.3>(0,c.E)(e)}),clearInterval(y)}w--},100);if(this.audioWidgetListeners.length>0&&this.postMessage({showAudioButton:!1}),l.xw[a.apiKey]?.compact&&this.postMessage({compactMode:!0}),this.postMessage({isMobile:n.Z.isMobileUser}),this.postMessage({cookiesDisabled:!(0,h.tA)()}),n.Z.userCountryDetermined){let e="true"===(0,g._2)("vuukle_cookie_usage_agreed");i.e("543").then(i.bind(i,2237)).then(t=>{t.default.isGDPR&&void 0===window.__tcfapi&&(e?(n.Z.canUseCookies=!0,t.default.hasConsent=!0):this.postMessage({showCookieNotice:!0})),t.default.isGDPR&&void 0!==window.__tcfapi&&t.default.addVendorPresenceListener(e=>{e||this.postMessage({showCookieNotice:!0})})})}else{let e=setInterval(()=>{if(n.Z.userCountryDetermined){let t="true"===(0,g._2)("vuukle_cookie_usage_agreed");i.e("543").then(i.bind(i,2237)).then(e=>{e.default.isGDPR&&void 0===window.__tcfapi&&(t?(n.Z.canUseCookies=!0,e.default.hasConsent=!0):this.postMessage({showCookieNotice:!0})),e.default.isGDPR&&void 0!==window.__tcfapi&&e.default.addVendorPresenceListener(e=>{e||this.postMessage({showCookieNotice:!0})})}),clearInterval(e)}},1e3)}}listener;async setUserID(e){let t=await i.e("543").then(i.bind(i,2237));n.Z.canUseCookies?t.default.executeWhenStorageValueCanBeSet("vuukle_user_id",()=>{(0,g.ti)("vuukle_user_id",e)}):n.Z.addStorageUpdateCallback(()=>{t.default.executeWhenStorageValueCanBeSet("vuukle_user_id",()=>{(0,g.ti)("vuukle_user_id",e)})})}setThemeColor(e){this.themeColor=e}showCommentsPanel(){void 0===this.commentsPanel&&(this.commentsPanel=new C(this.widgetObject)),this.commentsPanel.showPanel()}shareAudioSyncMessage(e,t){let i=e[t];this.powerbarListeners.forEach(e=>e.postMessage({[t]:i})),this.audioWidgetListeners.forEach(e=>e.postMessage({[t]:i}))}updateCommentCounts(e){let{articleData:t}=e.data;R.fillVuukleCountElement(this.index,t.commentCount||0)}reportToAnalyticsServer(e){let{action:t}=e.data.reportEvent;"string"==typeof t&&o.Z.log(t,this.articleConfig)}performSSOAuth(){let e=this.articleConfig.comments?.auth?.sso?.onClick||this.articleConfig.auth?.sso?.onClick;"function"==typeof e?e():console.error(`[Vuukle] \u{26A0} Please configure SSO to allow users to authenticate.`)}openModalWithMessage(e){if(this.modalListener){this.modalListener.postMessage({modalData:{...e.data.modalData,data:{...e.data.modalData.data,..."login"===e.data.modalData.type?{loginFrom:"comments"}:{}}},loginTypes:this.articleConfig.amp&&this.articleConfig.ampLoginTypes?this.articleConfig.ampLoginTypes:e.data.loginTypes});let t=document.querySelector(`#${this.modalIframe.id}`);t&&(t.style.display=e.data.modalData.hideModal?"none":"block")}}handleLogout(){if(i.e("543").then(i.bind(i,2237)).then(e=>{(e.default.isGDPR||e.default.isCCPA)&&!n.Z.canUseCookies&&this.deleteCookies()}),this.emotesListener&&(this.emotesListener.postMessage({userInfo:{apiKey:null}}),this.emotesListener.updateVotedEmote()),this.quizListener&&this.quizListener.postMessage({loginToken:null}),r.Z.isSSO){let e=this.articleConfig.auth?.sso?.onLogout||this.articleConfig.comments.auth?.sso?.onLogout;e&&e()}}synchronizeWidgets(e){e.data.syncWidget.commentAdded&&this.powerbarListeners.forEach(t=>t.postMessage({syncWidget:{commentAdded:e.data.syncWidget.commentAdded}})),e.data.syncWidget.addCommentsToCounter&&this.powerbarListeners.forEach(t=>t.postMessage({syncWidget:{addCommentsToCounter:e.data.syncWidget.addCommentsToCounter}}))}updateTXColor(e){let t=document.querySelector(a.Z.selectors.trafficExchange.concat(this.index));if(t){let i=document.createElement("style");i.innerHTML=`
        #${t.id} .vuukle-tx-read-more {
          background: ${e.data.settings.theme.color};
        }
      `,document.head.appendChild(i)}}deleteCookies(){this.postMessage({deleteCookies:!0}),this.emotesListener&&this.emotesListener.removeCookies(),this.powerbarListeners.forEach(e=>{e.postMessage({deleteCookies:!0}),e.removeCookies()}),this.modalListener&&this.modalListener.postMessage({deleteCookies:!0}),n.Z.deleteCookies()}shareEventToPublished(e,t){"function"==typeof t&&t(e)}updateModalInstance(e,t){this.modalListener=t,this.modalIframe=e}updateQuizListenerInstance(e){this.quizListener=e}setIsAdblockDetected(e){this.isAdblockDetected=e}changeTheme(e){this.postMessage({changeTheme:e})}addCustomTriggerForCommentsPanel(e){let t=document.querySelector(e);t&&t.addEventListener("click",()=>{this.showCommentsPanel()})}}class S extends u.Y{widgetObject;articleConfig;powerbarListeners;communicationCreator;constructor(t,a,o=[]){super(t),this.widgetObject=t,this.articleConfig=a,this.powerbarListeners=o,this.listener=t=>{if(this.isValidEvent(t)&&((0,e.qu)("log","[Vuukle.js | Emotes] message:",t),t.data.syncWidget instanceof Object&&this.powerbarListeners.forEach(e=>e.postMessage({syncWidget:t.data.syncWidget})),t.data.getVotedEmote&&this.postMessage({votedEmote:this.getVotedEmote()||null}),t.data.deleteVotedEmote&&this.deleteEmote(),t.data.emoteVote&&this.setEmote(t.data.emoteVote),t.data.noArticles&&!this.articleConfig.amp)){let e=this.widgetObject.iframe.parentElement;e&&this.communicationCreator.createQuizInstanceNearElement(e)}},this.deleteEmoteRequest=async e=>(0,h.$f)("DELETE","https://api.vuukle.com/api/v1/emote_ratings/remove",{apiKey:this.articleConfig.apiKey,articleAvatar:this.articleConfig.img,articleId:this.articleConfig.articleId,cookieId:e,host:this.articleConfig.host,tag:this.articleConfig.tags,title:this.articleConfig.title,uri:this.articleConfig.url},"application/json",r.Z.getToken(),!0),this.postEmoteVote=async e=>(0,h.$f)("POST","https://api.vuukle.com/api/v1/emote_ratings",{amp:this.articleConfig.amp,apiKey:this.articleConfig.apiKey,articleAvatar:this.articleConfig.img,articleId:this.articleConfig.articleId,emote:e,host:this.articleConfig.host,tag:this.articleConfig.tags,title:this.articleConfig.title,uri:this.articleConfig.url},"application/json",r.Z.getToken(),!0),this.getVotedEmote=()=>{let e=this.articleConfig.amp?parseInt((0,g._2)(this.getVotedCookieName())||""):parseInt(s.Z.get(this.getVotedCookieName())||"",10);if(e>=1&&e<=6)return e},this.setEmote=async e=>{let t={expires:60,sameSite:"Lax"},a=await this.postEmoteVote(e);return!1==a.success&&a.errors.includes("invalid_apikey")&&console.warn("[VUUKLE] Emote post request was not completed because the apiKey is either invalid or not given. Please check your configuration."),n.Z.canUseCookies?this.articleConfig.amp?i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet(this.getVotedCookieName(),()=>{(0,g.m4)(this.getVotedCookieName(),e.toString(),1440)}),t.default.executeWhenStorageValueCanBeSet(this.getCookieId(),()=>{(0,g.m4)(this.getCookieId(),a.data.cookieId,1440)})}):i.e("543").then(i.bind(i,2237)).then(i=>{i.default.executeWhenStorageValueCanBeSet(this.getVotedCookieName(),()=>{s.Z.set(this.getVotedCookieName(),e.toString(),t)}),i.default.executeWhenStorageValueCanBeSet(this.getCookieId(),()=>{s.Z.set(this.getCookieId(),a.data.cookieId,t)})}):n.Z.addStorageUpdateCallback(()=>{this.articleConfig.amp?i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet(this.getVotedCookieName(),()=>{(0,g.m4)(this.getVotedCookieName(),e.toString(),1440)}),t.default.executeWhenStorageValueCanBeSet(this.getCookieId(),()=>{(0,g.m4)(this.getCookieId(),a.data.cookieId,1440)})}):i.e("543").then(i.bind(i,2237)).then(i=>{i.default.executeWhenStorageValueCanBeSet(this.getVotedCookieName(),()=>{s.Z.set(this.getVotedCookieName(),e.toString(),t)}),i.default.executeWhenStorageValueCanBeSet(this.getCookieId(),()=>{s.Z.set(this.getCookieId(),a.data.cookieId,t)})})}),a},this.deleteEmote=()=>{let e=this.articleConfig.amp?(0,g._2)(this.getCookieId())||"":s.Z.get(this.getCookieId())||"";return this.deleteEmoteRequest(e)},this.removeCookies=()=>{let e={expires:60,sameSite:"Lax"};if(this.articleConfig.amp){(0,g.ti)(this.getCookieId(),null),(0,g.ti)(this.getVotedCookieName(),null);try{let e=Object.keys(localStorage);e&&e.forEach(e=>{e.includes("vuukle_emotes_vote")&&(0,g.ti)(e,null)})}catch(e){}}else{s.Z.remove(this.getCookieId(),{expires:30,sameSite:"Lax"}),s.Z.remove(this.getVotedCookieName(),e);let t=Object.keys(s.Z.get());t&&t.forEach(t=>{t.includes("vuukle_emotes_vote")&&s.Z.remove(t,e)})}},this.getCookieId=()=>n.Z.userAPIKey&&!n.Z.userAPIKey.startsWith("$")?`vuukle_emotes_vote_${this.articleConfig.host}&${this.articleConfig.articleId}&CookieId&${n.Z.userAPIKey}`:`vuukle_emotes_vote_${this.articleConfig.host}&${this.articleConfig.articleId}&CookieId`,this.getVotedCookieName=()=>n.Z.userAPIKey&&!n.Z.userAPIKey.startsWith("$")?`vuukle_emotes_vote_${this.articleConfig.host}&${this.articleConfig.articleId}&${n.Z.userAPIKey}`:`vuukle_emotes_vote_${this.articleConfig.host}&${this.articleConfig.articleId}`,window.addEventListener("message",this.listener),this.postMessage({canUseCookies:n.Z.canUseCookies}),this.articleConfig.amp&&(this.articleConfig.emotes.hideRecommendedArticles&&this.postMessage({disableRecommendations:!0}),a.theme?.darkMode&&this.postMessage({enableDarkMode:!0})),this.postMessage({loginToken:r.Z.getToken()}),this.postMessage({votedEmote:this.getVotedEmote()});let l=50,d=setInterval(()=>{if(0===l)return void clearInterval(d);let e=t.iframe.parentElement;if(e){let t=(0,c.A)(e);this.postMessage({backgroundColor:t}),this.postMessage({shouldUseDarkMode:.3>(0,c.E)(e)}),clearInterval(d)}l--},100)}listener;updateVotedEmote(){this.postMessage({votedEmote:this.getVotedEmote()||null})}deleteEmoteRequest;postEmoteVote;getVotedEmote;setEmote;deleteEmote;removeCookies;getCookieId;getVotedCookieName;setCommunicationCreatorInstance(e){this.communicationCreator=e}changeTheme(e){this.postMessage({changeTheme:e})}}var x=i(3114),L=i(1003),A=i(6172),I=i(7630);class E extends u.Y{widgetObject;modalListener;articleConfig;index;widgetsCreator;emotesListener;powerbarListeners;userFormDataHandler;static marketResearchQuestionAnswers={};modalWindow;modalWindowListener;modalIframe;commentsListener;iframelessCommentsListener;ctaPopup;loginTypes;themeColor;customLogoLink;formerHeight;audienceData;fireFirstPartyDataPixel;heatMapAnalysisScriptInserted;heatMapAnalysisEnabled;hasSpaceForSurveyAds;constructor(t,s,l,u,h,m,f=[]){super(t),this.widgetObject=t,this.modalListener=s,this.articleConfig=l,this.index=u,this.widgetsCreator=h,this.emotesListener=m,this.powerbarListeners=f,this.userFormDataHandler=new I.Z(this.articleConfig.apiKey),this.loginTypes=[],this.themeColor="",this.customLogoLink="",this.formerHeight=275,this.fireFirstPartyDataPixel=!1,this.heatMapAnalysisScriptInserted=!1,this.heatMapAnalysisEnabled=!1,this.hasSpaceForSurveyAds=!0,this.getMarketResearchQuestionAnswers=()=>E.marketResearchQuestionAnswers,this.listener=t=>{if(this.isValidEvent(t)){if((0,e.qu)("log","[Vuukle.js | Quiz] message:",t),t.data.loginTypes&&(this.loginTypes=t.data.loginTypes),t.data.getQuestionAnswer&&this.postMessage({chosenAnswer:this.getQuestionAnswer(t.data.getQuestionAnswer)}),t.data.getRecordedIdOfReportedQuestion&&this.postMessage({recordedQuestionId:this.getReportedQuestion(t.data.getRecordedIdOfReportedQuestion)}),t.data.setReportedQuestion){let{quizId:e,reportId:i}=t.data.setReportedQuestion;this.setReportedQuestion(e,i)}if(t.data.setQuestionAnswer){let{quizId:e,answer:i}=t.data.setQuestionAnswer;this.setQuestionAnswer(e,i),window.gtag&&R.sendGAEvents&&window.gtag("event",this.articleConfig.overrideGAEventNames?.quizzly_click||"quizzly_click",{event_category:"vuukle_engagement"})}if(void 0!==t.data.userAge&&"string"==typeof t.data.surveyId&&this.setDemographicQuestionAge(t.data.surveyId,t.data.userAge),void 0!==t.data.userGender&&"string"==typeof t.data.surveyId&&this.setDemographicQuestionGender(t.data.surveyId,t.data.userGender),"requestLogin"in t.data&&this.handleLoginRequest(t),t.data.loggedOutQW&&(r.Z.removeToken(),this.commentsListener?.postMessage({loggedOutQW:!0}),this.iframelessCommentsListener?.postMessage({loggedOutQW:!0}),this.modalListener?.postMessage({removeSLToken:!0}),this.powerbarListeners.forEach(e=>{e.postMessage({loginToken:null})}),this.emotesListener?.postMessage({loginToken:null}),r.Z.isSSO)){let e=this.articleConfig.auth?.sso?.onLogout||this.articleConfig.comments.auth?.sso?.onLogout;e&&e()}if(t.data.callSSO&&this.performSSOAuth(),t.data.removeAnswersForTheseIds&&this.removeAnswersForIDs(t.data.removeAnswersForTheseIds),t.data.showCTAPopup&&("function"==typeof window.quizCallToActionCallback?window.quizCallToActionCallback(this,this.ctaPopup):(this.ctaPopup.initializePopup(),this.ctaPopup.showPopup())),t.data.openLink&&(window.location.href=t.data.openLink),t.data.openLinkInNewTab)if(t.data.shouldOpenInNewTab){let e=document.createElement("a");e.href=t.data.openLinkInNewTab,e.target="_blank",e.rel="nofollow noopener",e.click()}else this.openLinkInModal(t.data.openLinkInNewTab);if(t.data.showRecommendedQuizzes&&this.openModalRecommendedQuizzes(),t.data.preloadModal&&this.sendMessageToModal({aMessage:"msg"}),t.data.alertMessage&&d.Z.createNotification(t.data.alertMessage.text,t.data.alertMessage.type),t.data.articleSharedWithNetwork&&o.Z.log(`share_${t.data.articleSharedWithNetwork}`,this.articleConfig),t.data.customLogoLink&&(this.customLogoLink=t.data.customLogoLink),t.data.cookieUsageAgreed&&(i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("vuukle_cookie_usage_agreed",()=>{(0,g.ti)("vuukle_cookie_usage_agreed","true")}),e.default.hasConsent=!0,e.default.cookieConsentKnown=!0}),n.Z.canUseCookies=!0,this.commentsListener?.postMessage({cookieNoticeConfirmed:!0})),t.data.questionToUpdateFrequencyFor&&this.updateQuestionFrequency(t.data.questionToUpdateFrequencyFor),t.data.userId&&this.setUserID(t.data.userId),t.data.removeUserId&&(0,g.ti)("vuukle_user_id",null),t.data.closeCommentsModal&&(this.commentsListener?.postMessage({closeCommentsModal:!0}),this.iframelessCommentsListener?.postMessage({closeCommentsModal:!0})),"object"==typeof t.data.marketResearchQuestionAnswer&&null!==t.data.marketResearchQuestionAnswer&&"answer"in t.data.marketResearchQuestionAnswer&&"topic"in t.data.marketResearchQuestionAnswer){let e=t.data.marketResearchQuestionAnswer.topic.replace(/\s+/g,"-");E.marketResearchQuestionAnswers[e]=t.data.marketResearchQuestionAnswer.answer,"function"==typeof this.articleConfig.quiz.onMarketResearchQuestionAnswered&&this.articleConfig.quiz.onMarketResearchQuestionAnswered(E.marketResearchQuestionAnswers)}if(t.data.targetingTopic){let e=(0,A.zd)()&&!(0,A.n0)()&&window.top?window.top:window,i=t.data.targetingTopic.replace(/\s+/g,"-");if(this.fireFirstPartyDataPixel){let t=this.audienceData.audienceSegments.find(e=>e.topic===i)?.segment_id;if(t){let s=e.document.createElement("script");s.async=!0,s.id="google-pcd-tag",s.src="https://pagead2.googlesyndication.com/pagead/js/pcd.js",s.dataset.audiencePixel=`dc_iu=/${this.audienceData.networkCode}/DFPAudiencePixel;dc_seg=${t};quizzly_audience=${i}`,e.document.body.appendChild(s)}}else e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],e.googletag.cmd.push(()=>{e.googletag.pubads().setTargeting("quizzly_audience",i)});t.data.removeUserData&&this.deleteCookies()}if(t.data.insertHeatMapAnalysisScript&&this.insertHeatmapAnalysisScript(),t.data.questionToRemoveFromFreqCapObject&&this.removeQuestionFromFrequencyCapObject(t.data.questionToRemoveFromFreqCapObject),t.data.removeMaxHeightLimit&&this.widgetObject.iframe.style.removeProperty("max-height"),t.data.requestUserData&&this.requestUserDataForm(),t.data.removeUserFormData&&this.userFormDataHandler.deleteData(),t.data.expandQuizForAd&&this.hasSpaceForSurveyAds&&(this.postMessage({setOnlyMaxHeightTo:550}),this.widgetObject.changeHeight(550)),t.data.shrinkQuizToFormerSize&&(this.postMessage({setOnlyMaxHeightTo:275===this.formerHeight?265:this.formerHeight}),this.widgetObject.changeHeight(this.formerHeight)),t.data.surveyIdToAddInLocalStorage&&this.saveSurveyIdInLocalStorage(t.data.surveyIdToAddInLocalStorage),"boolean"==typeof t.data.showQuizAd){let e=document.querySelector(`${a.Z.selectors.quiz.concat(this.index)} + div[id*="vuukle-ad"]`);e||(e=document.querySelector(`${a.Z.selectors.quizAlt.concat(this.index)} + div[id*="vuukle-ad"]`)),t.data.showQuizAd&&(e&&(e.style.display="block"),this.widgetObject.changeWidth("100%")),!t.data.showQuizAd&&e&&(e&&(e.style.display="none"),this.widgetObject.changeWidth("610px"))}}},this.saveSurveyIdInLocalStorage=e=>{i.e("543").then(i.bind(i,2237)).then(t=>{let i=(0,g._2)("quizzly_surveys_response_groups");if(i){let s=JSON.parse(i);i.includes(e)||s.push(e),t.default.executeWhenStorageValueCanBeSet("quizzly_surveys_response_groups",()=>{(0,g.m4)("quizzly_surveys_response_groups",JSON.stringify(s),168)})}else{let i=[e];t.default.executeWhenStorageValueCanBeSet("quizzly_surveys_response_groups",()=>{(0,g.m4)("quizzly_surveys_response_groups",JSON.stringify(i),168)})}})},window.addEventListener("message",this.listener),l.amp&&(this.modalWindow=new L.Z(l)),this.postMessage({canUseCookies:n.Z.canUseCookies}),this.postMessage({loginToken:r.Z.getToken()}),r.Z.addSSOTokenListener(`${t.id}-listener`,e=>{this.postMessage({loginToken:e})}),r.Z.addSSOLogoutListener(`${t.id}-listener`,()=>{this.postMessage({loginToken:null})});let p=50,b=setInterval(()=>{if(0===p)return void clearInterval(b);let e=t.iframe.parentElement;e&&(this.postMessage({shouldUseDarkMode:.3>(0,c.E)(e)}),clearInterval(b)),p--},100);if(n.Z.userCountryDetermined){let e="true"===(0,g._2)("vuukle_cookie_usage_agreed");i.e("543").then(i.bind(i,2237)).then(t=>{t.default.isGDPR&&void 0===window.__tcfapi&&(e?(n.Z.canUseCookies=!0,t.default.hasConsent=!0):this.postMessage({showCookieNotice:!0})),t.default.isGDPR&&void 0!==window.__tcfapi&&t.default.addVendorPresenceListener(e=>{e||this.postMessage({showCookieNotice:!0})})})}else{let e=setInterval(()=>{n.Z.userCountryDetermined&&(i.e("543").then(i.bind(i,2237)).then(e=>{let t="true"===(0,g._2)("vuukle_cookie_usage_agreed");e.default.isGDPR&&void 0===window.__tcfapi&&(t?(n.Z.canUseCookies=!0,e.default.hasConsent=!0):this.postMessage({showCookieNotice:!0})),e.default.isGDPR&&void 0!==window.__tcfapi&&e.default.addVendorPresenceListener(e=>{e||this.postMessage({showCookieNotice:!0})})}),clearInterval(e))},1e3)}this.postMessage({userId:(0,g._2)("vuukle_user_id")});let w=(0,g._2)("quizzly_surveys_response_groups");w&&this.postMessage({responseGroups:w}),"function"!=typeof window.getQuizzlyMarketResearchQuestionAnswers&&(window.getQuizzlyMarketResearchQuestionAnswers=this.getMarketResearchQuestionAnswers.bind(this));let y=(0,A.zd)()||(0,A.n0)(),v=window.innerWidth>=600,C=window.innerHeight>=600||v;this.hasSpaceForSurveyAds=C,!y||C||l.quiz.forceExposedGroup||this.postMessage({forceControlGroup:!0})}getMarketResearchQuestionAnswers;async enableCTAPopup(e){let t=await i.e("992").then(i.bind(i,3877));this.ctaPopup=new t.default(e,this),this.postMessage({enableCTAButtonWithText:e?.callToActionText})}listener;saveSurveyIdInLocalStorage;deleteCookies(){n.Z.deleteCookies(),this.modalListener&&(this.modalListener.postMessage({deleteCookies:!0}),this.modalListener.postMessage({removeSLToken:!0})),this.emotesListener&&(this.emotesListener.removeCookies(),this.emotesListener.postMessage({loginToken:null})),this.powerbarListeners.forEach(e=>{e.postMessage({deleteCookies:!0}),e.postMessage({loginToken:null}),e.removeCookies()}),this.commentsListener&&(this.commentsListener.postMessage({deleteCookies:!0}),this.commentsListener.postMessage({loggedOutQW:!0})),this.iframelessCommentsListener&&(this.iframelessCommentsListener.postMessage({deleteCookies:!0}),this.iframelessCommentsListener.postMessage({loggedOutQW:!0}))}enableHeatMapAnalysis(){this.heatMapAnalysisEnabled=!0}insertHeatmapAnalysisScript(){if(!this.heatMapAnalysisScriptInserted&&this.heatMapAnalysisEnabled){this.heatMapAnalysisScriptInserted=!0;let e=document.createElement("script");e.type="text/javascript",e.async=!0,e.innerHTML=`
        (function(h,o,t,j,a,r){
          h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
          h._hjSettings={hjid:5095721,hjsv:6};
          a=o.getElementsByTagName('head')[0];
          r=o.createElement('script');r.async=1;
          r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
          a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
      `,document.body.appendChild(e)}}setThemeColor(e){this.themeColor=e}setUserID(e){n.Z.userAPIKey=e,n.Z.canUseCookies?i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vuukle_user_id",()=>{(0,g.ti)("vuukle_user_id",e)})}):n.Z.addStorageUpdateCallback(()=>{i.e("543").then(i.bind(i,2237)).then(t=>{t.default.executeWhenStorageValueCanBeSet("vuukle_user_id",()=>{(0,g.ti)("vuukle_user_id",e)})})})}removeAnswersForIDs(e){let t=(0,g._2)("vuukle_quiz_answers");if(t){let s=JSON.parse(t);e.forEach(e=>{void 0!==s[e]&&null!==s[e]&&delete s[e]}),(e.includes("age")||e.includes("gender"))&&delete s.demographicQuestionAnswers,i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("vuukle_quiz_answers",()=>{(0,g.ti)("vuukle_quiz_answers",JSON.stringify(s))})})}}openAndInitializeWindowedModal(){this.modalWindow=new L.Z(this.articleConfig),this.modalWindow.openModalInWindow(),this.modalWindowListener=new x.u(this.modalWindow,this.articleConfig,this)}async handleLoginRequest(e){this.articleConfig.amp?(this.openAndInitializeWindowedModal(),e.data.loginTypes&&(this.loginTypes=e.data.loginTypes),this.modalWindowListener.postMessage({loadModal:!0,modalData:{type:"login",data:{showQuizzlyLogo:!0,loginFrom:"quiz",customLogoLink:this.customLogoLink}},loginTypes:this.articleConfig.amp&&this.articleConfig.ampLoginTypes?this.articleConfig.ampLoginTypes:e.data.loginTypes||this.loginTypes}),this.modalWindowListener.changeThemeColor(this.themeColor)):(e.data.loginTypes||this.articleConfig.amp&&this.articleConfig.ampLoginTypes?(await this.sendMessageToModal({loadModal:!0,loginTypes:this.articleConfig.amp&&this.articleConfig.ampLoginTypes?this.articleConfig.ampLoginTypes:e.data.loginTypes}),this.loginTypes=e.data.loginTypes):await this.sendMessageToModal({modalData:{type:"login",data:{showQuizzlyLogo:!0,loginFrom:"quiz",customLogoLink:this.customLogoLink}},loginTypes:this.articleConfig.amp&&this.articleConfig.ampLoginTypes?this.articleConfig.ampLoginTypes:this.loginTypes}),this.toggleModal(!0))}async requestUserDataForm(){try{let e=this.userFormDataHandler.retrieveUserData();this.articleConfig.amp?(this.openAndInitializeWindowedModal(),this.modalWindowListener.postMessage({loadModal:!0,modalData:{data:e||{},type:"userInfo"}}),this.modalWindowListener.changeThemeColor(this.themeColor)):(await this.sendMessageToModal({modalData:{data:e||{},type:"userInfo"}}),this.toggleModal(!0))}catch(e){this.articleConfig.amp?(this.openAndInitializeWindowedModal(),this.modalWindowListener.postMessage({loadModal:!0,modalData:{type:"userInfo"}}),this.modalWindowListener.changeThemeColor(this.themeColor)):(await this.sendMessageToModal({modalData:{type:"userInfo"}}),this.toggleModal(!0))}}performSSOAuth(){let e=this.articleConfig.comments?.auth?.sso?.onClick||this.articleConfig.auth?.sso?.onClick;"function"==typeof e?e():console.error(`[Vuukle] \u{26A0} Please configure SSO to allow users to authenticate.`)}async openLinkInModal(e){await this.sendMessageToModal({modalData:{type:"iframeLink",data:{pageLink:e}}}),this.toggleModal(!0)}async openModalRecommendedQuizzes(){this.articleConfig.amp?(this.openAndInitializeWindowedModal(),this.modalWindowListener.postMessage({loadModal:!0,modalData:{type:"recommendedQuizzes",data:{}}}),this.modalWindowListener.changeThemeColor(this.themeColor)):(await this.sendMessageToModal({modalData:{type:"recommendedQuizzes",data:{}}}),this.toggleModal(!0))}async sendMessageToModal(e){if(this.modalListener)this.modalListener.postMessage(e);else if(this.widgetsCreator){await this.widgetsCreator.createModal(e);let t=this.widgetObject.iframe.parentElement;this.modalListener?.switchThemeToDarkMode(.3>(0,c.E)(t)),this.modalListener?.changeThemeColor(this.themeColor),this.commentsListener?.postMessage({modalLoaded:!0})}}updateModalInstance(e,t){this.modalIframe=e,this.modalListener=t}updateCommentsListenerInstance(e){this.commentsListener=e}updateIframelessCommentsInstance(e){this.iframelessCommentsListener=e}setFormerHeight(e){this.formerHeight=e}toggleModal(e){let t=document.querySelector(`#${this.modalIframe?.id}`);t&&(t.style.display=e?"block":"none")}removeQuestionFromFrequencyCapObject(e){i.e("543").then(i.bind(i,2237)).then(t=>{let i=(0,g._2)("vuukle_quiz_frequency_cap");if(i){let s=JSON.parse(i);s[e]&&(delete s[e],t.default.executeWhenStorageValueCanBeSet("vuukle_quiz_frequency_cap",()=>{(0,g.ti)("vuukle_quiz_frequency_cap",JSON.stringify(s))}))}})}updateQuestionFrequency(e){let t=(0,g._2)("vuukle_quiz_frequency_cap");if(t){let s=JSON.parse(t),a=s[e];a?(a.frequency+=1,a.lastSeen=Date.now()):(a={frequency:1,firstSeen:Date.now(),lastSeen:Date.now()},s[e]=a),i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("vuukle_quiz_frequency_cap",()=>{(0,g.ti)("vuukle_quiz_frequency_cap",JSON.stringify(s))})})}else{let t={};t[e]={frequency:1,lastSeen:Date.now(),firstSeen:Date.now()},i.e("543").then(i.bind(i,2237)).then(e=>{e.default.executeWhenStorageValueCanBeSet("vuukle_quiz_frequency_cap",()=>{(0,g.ti)("vuukle_quiz_frequency_cap",JSON.stringify(t))})})}}getQuestionAnswer(e){let t=(0,g._2)("vuukle_quiz_answers");return t?JSON.parse(t)[e]:null}getReportedQuestion(e){let t=(0,g._2)("vuukle_quiz_reported_questions");return t?JSON.parse(t)[e]:null}setDemographicQuestionGender(e,t){let s=()=>{let s=(0,g._2)("vuukle_quiz_answers");i.e("543").then(i.bind(i,2237)).then(i=>{s||(i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_answers",()=>{(0,g.ti)("vuukle_quiz_answers","{}")}),s=(0,g._2)("vuukle_quiz_answers"));let a=JSON.parse(s||"{}");a.demographicQuestionAnswers||(a.demographicQuestionAnswers={}),a.demographicQuestionAnswers[e]||(a.demographicQuestionAnswers[e]={}),a.demographicQuestionAnswers[e].gender=t,i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_answers",()=>{(0,g.ti)("vuukle_quiz_answers",JSON.stringify(a))})})};n.Z.canUseCookies?s():n.Z.addStorageUpdateCallback(()=>{s()})}setDemographicQuestionAge(e,t){let s=()=>{let s=(0,g._2)("vuukle_quiz_answers");i.e("543").then(i.bind(i,2237)).then(i=>{s||(i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_answers",()=>{(0,g.ti)("vuukle_quiz_answers","{}")}),s=(0,g._2)("vuukle_quiz_answers"));let a=JSON.parse(s||"{}");a.demographicQuestionAnswers||(a.demographicQuestionAnswers={}),a.demographicQuestionAnswers[e]||(a.demographicQuestionAnswers[e]={}),a.demographicQuestionAnswers[e].age=t,i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_answers",()=>{(0,g.ti)("vuukle_quiz_answers",JSON.stringify(a))})})};n.Z.canUseCookies?s():n.Z.addStorageUpdateCallback(()=>{s()})}setQuestionAnswer(e,t){let s=()=>{let s=(0,g._2)("vuukle_quiz_answers");i.e("543").then(i.bind(i,2237)).then(i=>{s||(i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_answers",()=>{(0,g.ti)("vuukle_quiz_answers","{}")}),s=(0,g._2)("vuukle_quiz_answers"));let a=JSON.parse(s||"{}");a[e]=t,i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_answers",()=>{(0,g.ti)("vuukle_quiz_answers",JSON.stringify(a))})})};n.Z.canUseCookies?s():n.Z.addStorageUpdateCallback(()=>{s()})}setReportedQuestion(e,t){let s=()=>{let s=(0,g._2)("vuukle_quiz_reported_questions");i.e("543").then(i.bind(i,2237)).then(i=>{s||(i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_reported_questions",()=>{(0,g.ti)("vuukle_quiz_reported_questions","{}")}),s=(0,g._2)("vuukle_quiz_reported_questions"));let a=JSON.parse(s||"{}");a[e]=t,i.default.executeWhenStorageValueCanBeSet("vuukle_quiz_reported_questions",()=>{(0,g.ti)("vuukle_quiz_reported_questions",JSON.stringify(a))})})};n.Z.canUseCookies?s():n.Z.addStorageUpdateCallback(()=>{s()})}trackTimeSpentOnWidget(){let e=0,t=!1,i=!1,s=!1;new IntersectionObserver(a=>{a.forEach(a=>{if(a.isIntersecting)e=Math.floor(Date.now()/1e3),t=!0,i=!0;else{let a=Math.floor(Date.now()/1e3);i=!1,t&&!s&&o.Z.log("quizzly_view_time",this.articleConfig,[{key:"ViewingStartedTs",value:e},{key:"ViewingEndedTs",value:a}]),s=!1}})},{threshold:.1}).observe(this.widgetObject.iframe),window.addEventListener("visibilitychange",()=>{i&&"hidden"===document.visibilityState&&(s=!0,o.Z.logPost("quizzly_view_time",this.articleConfig,!0,[{key:"ViewingStartedTs",value:e},{key:"ViewingEndedTs",value:Math.floor(Date.now()/1e3)}]))})}changeTheme(e){this.postMessage({changeTheme:e})}enableAudienceTrackingPixel(e,t){this.fireFirstPartyDataPixel=!0,this.audienceData={audienceSegments:t,networkCode:e}}}let T=e=>{for(;e.lastChild;)e.removeChild(e.lastChild)},M=e=>{let t=/\d+/g.exec(e);return t&&t[0]?t[0]||"":void 0},_=function(e,t,i,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,o=a.document.createElement("div");switch(o.id=e.concat(t),i){case"after":s.insertAdjacentElement("afterend",o);break;case"before":s.insertAdjacentElement("beforebegin",o);break;case"prependInside":s.insertAdjacentElement("afterbegin",o);break;default:s.appendChild(o)}return o},z=(e,t)=>{for(let i of t)if(e.includes(i))return!0;return!1},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;for(let i=0;i<e.length;i++)if(new RegExp(e[i]).test(t.location.pathname))return!0;return!1},q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return t.googletag.pubads().getSlots().find(t=>t.getSlotElementId()===e)};var W=i(556);let D=class{hideLabelLogo;advertisementID;uniqueID;constructor(e=!1,t=!0){this.hideLabelLogo=e,t&&(this.uniqueID=(0,W.Z)()),this.advertisementID=`div-gpt-ad-1497448474263${this.uniqueID?`-${this.uniqueID}`:""}`}createWrapperElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.createElement("div"),i=document.createElement("div"),s=document.createElement("script");return t.className="vuukle-ads",t.setAttribute("style","display: block !important;height: auto;margin: 0px auto;text-align: center; clear: both; overflow: hidden;"),i.id=this.advertisementID,s.type="text/javascript",s.innerHTML="",i.appendChild(s),t.appendChild(i),e||setTimeout(()=>{let e=this.createAdLabel(t);t.insertAdjacentElement("afterbegin",e),this.watchAdDiv(t,i)},3e3),[t,i]}createAdLabel(e){let t=(0,c.E)(e),i=document.createElement("div");i.className="vuukle-ad-label",i.style.cssText=`
      display: flex;
      justify-content: space-evenly;
      flex-basis: 100%;
      margin: 0 auto 5px;
      width: 100px;
      height: 11px;
      line-height: 1.1 !important;
      padding: 0px;
    `;let s=document.createElement("span");s.style.display="none";let a=document.createElement("a");a.ariaLabel="Vuukle",a.href="https://vuukle.com",a.target="_blank",a.rel="noopener nofollow",a.style.cssText=`
      background-color: transparent; 
      box-shadow: none;
    `,a.innerHTML=(0,h.Ew)(11,"0 0 30 30"),s.appendChild(a);let o=document.createElement("span");return o.textContent="Advertisement",o.style.cssText=`
      display: block;
      font-size: 10px !important;
      color: ${t<=.3?"#fff":"#6c757d"};
      margin: 0px;
      text-align: center;
      flex: 1;
      padding: 0px;
      line-height: 1 !important;
    `,i.appendChild(s),i.appendChild(o),i}watchAdDiv(e,t){function i(){setTimeout(()=>{let i=e.querySelector(".vuukle-ad-label"),s=t.firstElementChild&&t.firstElementChild.querySelector("iframe");if(i&&s){let e=80>parseInt(s.width)?80:parseInt(s.width);i.style.width=e+"px",s.style.setProperty("width",`${e}px`,"important")}else i&&(i.style.width="80px")},0)}void 0!==window.ResizeObserver&&new window.ResizeObserver(i).observe(t),new MutationObserver(i).observe(t,{childList:!0,subtree:!0})}};class Z extends D{articleConfig;scrollingAd;wrapper;adDiv;static prebidLoaded=!1;static prebidBlocked=!1;static initialPeriodPassed=!1;static noGPT=!1;constructor(t,s="",a,r,d=!1,c=!1,u=0,g=!1){super(c,""===s),this.articleConfig=t,this.scrollingAd=g,this.additionalAds=[];let m="object"==typeof t.ads&&t.ads.gptOverride,f=r||m||"1497448474263";if(this.advertisementID=a?`div-gpt-ad-${f}-${a}`.concat(s):`div-gpt-ad-${f}-${this.uniqueID}`.concat(s),u>0&&!n.Z.isMobileUser)this.createSideAds(d,u);else{let[e,t]=this.createWrapperElement(d);this.wrapper=e,this.adDiv=t}et.canRefreshAds&&this.refreshAdUntilVisible(),l.xw[this.articleConfig.apiKey].trackUnfilledAds&&setTimeout(()=>{this.wrapper.offsetParent&&i.e("295").then(i.bind(i,2864)).then(i=>{this.areAdsPresent()||i.default.adblockDetected||((0,e.Gf)("warn",!0,`Vuukle - ${(0,h.xz)()} [Platform.js] Unfilled ad -`,this.advertisementID),o.Z.log("unfilled_ads",t,[{key:"unfilledAdId",value:this.advertisementID}]))})},1e4)}constructInterscrollerAd(e){let t=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),a=(0,A.zd)();a?i.style.cssText=`
        height: 250px;
        overflow: scroll;
      `:(t.style.cssText=`
        position: relative;
        width: 100%;
        display: flex;
        justify-content: space-between;
        flex-direction: column;
      `,i.style.cssText=`
        height: 250px;
        display: flex;
        justify-content: center;
      `,s.style.cssText=`
        position: absolute;
        height: 250px;
        width: 300px;
        clip-path: inset(0px calc(100% - 300px) calc(100% - 250px) 0px);
        display: flex;
        flex-direction: column;
      `,this.adDiv.style.cssText+=`
        position: fixed;
        top: 50vh;
        transform: translate(0px, ${e?"-20%":"-50%"});
      `),this.wrapper.style.cssText+=`
      width: 300px;
    `,this.wrapper.appendChild(t),t.appendChild(i),i.appendChild(s),e&&(s.appendChild(e),a||(e.style.cssText+=`
          position: fixed;
          top: 50vh;
          transform: translate(0px, -130%);
        `)),s.appendChild(this.adDiv)}async createSideAds(e,t){this.advertisementID+="a";let[i,s]=this.createWrapperElement(e);this.wrapper=i,this.adDiv=s,this.wrapper.style.display="flex",this.wrapper.style.justifyContent="center",this.wrapper.style.flexWrap="wrap";for(let e=0;e<t;e++){let t=document.createElement("div"),i=this.advertisementID;t.id=i=i.substring(0,i.length-1)+"bcdefghijklmnopqrstuvwxyz"[e],t.style.marginLeft="3px",this.wrapper.appendChild(t),this.additionalAds.push(t)}}areAdsPresent(){return!!this.wrapper.querySelector('div[id*="google_ads_iframe"]')}additionalAds;refreshAdUntilVisible(){let t=0,s=setInterval(()=>{if(!Z.prebidLoaded||!Z.initialPeriodPassed)return;let a=!1;if(i.e("295").then(i.bind(i,2864)).then(e=>{if(Z.prebidBlocked||e.default.adblockDetected){clearInterval(s),a=!0;return}}),!a){if(Z.noGPT||!this.wrapper.offsetParent)return void clearInterval(s);this.areAdsPresent()?clearInterval(s):(this.refreshAd(),t++,(0,e.Gf)("info",!0,`Vuukle - ${(0,h.xz)()} [Platform.js] Refreshing ad: ${t}`,this.advertisementID)),5===t&&clearInterval(s)}},1e4)}initVuukleHBQueue(){window.vuuklehb=window.vuuklehb||{},window.vuuklehb.que=window.vuuklehb.que||[],window.vuuklehb.que.push(()=>{window.vuuklehb.vInitSlot&&window.vuuklehb.vInitSlot(this.advertisementID)})}refreshAd(){window.vuuklehb&&window.vuuklehb.vRefresh&&window.vuuklehb.vRefresh(this.advertisementID,!0)}createWrapperElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=super.createWrapperElement(e),i=t[0],s=i.querySelector("script");return s instanceof HTMLScriptElement&&s.parentNode&&s.parentNode.removeChild(s),this.scrollingAd&&(i.style.position=(0,h.qN)(12)||(0,h.qN)(11)||(0,h.qN)(10)?"-webkit-sticky":"sticky",i.style.top="0",i.style.clear="both",setTimeout(()=>{let e=i.parentElement;for(;e&&"BODY"!==e.tagName;)e.style.setProperty("overflow","visible","important"),e=e.parentElement},0)),[i,t[1]]}watchAdDiv(e,t){let i=[()=>t.firstElementChild?.querySelector("iframe")];this.additionalAds.forEach(e=>{i.push(()=>e.firstElementChild?.querySelector("iframe"))});let s=()=>{scheduler.postTask(()=>{let t=e.querySelector(".vuukle-ad-label");if(t){let e=0;i.forEach(i=>{let s=i(),a=s?.width,o=a?Math.max(parseInt(a),80):80;if(e+=o||0,t.style.width=e+"px",s?.style.setProperty("margin","0 auto"),s?.style.setProperty("width",`${a}px`,"important"),l.xw[this.articleConfig.apiKey].enforceAdHeight){let e=s?.height;s?.style.setProperty("height",`${e}px`,"important")}})}})};if(void 0!==window.ResizeObserver){let e=new window.ResizeObserver(s);e.observe(t),this.additionalAds.forEach(t=>{t&&e.observe(t)})}let a=new MutationObserver(s);if(a.observe(t,{childList:!0,subtree:!0}),this.additionalAds.forEach(e=>{e&&a.observe(e)}),this.scrollingAd){let t=e.parentElement;t&&(t.style.height=n.Z.isMobileUser?"348px":"424px",t.style.clear="both")}}}class O{apiKeyConfig;articleConfig;static canCreateTXAds;static articleCounter=0;currentAdIds;constructor(e,t){this.apiKeyConfig=e,this.articleConfig=t,this.currentAdIds=[],this.getLocation=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,s=i.document.querySelectorAll(e)[O.articleCounter-1];if(s||O.articleCounter-1==0)return s;for(let s=O.articleCounter-1;s>0;s--){let a=i.document.querySelectorAll(e)[s];if(a&&!a.parentElement?.querySelector(`div[id*=${t}]`))return a}return null},O.articleCounter++}getLocation;isTrafficExchange(e){return e.includes("vuukle-traffic-exchange-ad")}async getInsertLocationForAnAd(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,a=null,o=n.Z.isMobileUser&&e?e:t;if("string"==typeof o){let e="boolean"==typeof O.canCreateTXAds&&!0===O.canCreateTXAds;if(this.isTrafficExchange(o)&&!e)return null;(a=this.articleConfig.endlessMode?this.getLocation(o,i):s.document.querySelector(o))||(a=await (0,A.br)(o,this.apiKeyConfig.adWaitTimeInterval||250,this.apiKeyConfig.numberOfChecksForAdTargets||40,s))}if("function"==typeof o&&(a=o()),Array.isArray(o))for(let e of o){let t=this.articleConfig.endlessMode?this.getLocation(e,i):s.document.querySelector(e);if(t){a=t;break}}return a}applyCustomCSS(e,t){if(!t)return;let i=(n.Z.isMobileUser?this.apiKeyConfig.customMobileCSS?.[e]:this.apiKeyConfig.customDesktopCSS?.[e])||this.apiKeyConfig.customCSS?.[e];i&&(t.style.cssText+=i)}applyGreyBackground(e,t){e.style.backgroundColor="#f3f3f3",t&&(t.wrapper.style.padding="15px 0")}insertTXInsideElement(e,t,i){let s;"string"==typeof t&&(s=document.querySelector(t)),"function"==typeof t&&(s=t()),s&&s instanceof HTMLElement&&_(a.Z.selectors.trafficExchange.replace("#",""),i,e,s)}createFirstAd(t,i){if(!t)return void(0,e.qu)("warn","[Platform.js] AD Element is missing");if(t.querySelector(".vuukle-ads"))return;let s=new Z(this.articleConfig,"",this.articleConfig.endlessMode?void 0:"1",i,this.apiKeyConfig.targets?.default?.hideAdLabel,this.apiKeyConfig.hideLabelLogo,this.apiKeyConfig.targets?.default?.sideAds||0,this.apiKeyConfig.targets?.default?.scrollingAd);if(this.currentAdIds.push(s.advertisementID),this.apiKeyConfig.targets?.default?.scrollingAd||this.apiKeyConfig.targets?.default?.greyBg){let e=document.createElement("div");t.appendChild(e),e.appendChild(s.wrapper),this.apiKeyConfig.targets?.default?.greyBg&&this.applyGreyBackground(e,s)}else t.appendChild(s.wrapper);s.wrapper.style.minHeight||(s.wrapper.style.minHeight="330px"),this.articleConfig.endlessMode&&s.initVuukleHBQueue(),this.applyCustomCSS("default",s.wrapper),void 0!==this.apiKeyConfig.targets?.default?.postInsertionOperation&&this.apiKeyConfig.targets?.default?.postInsertionOperation?.()}createSecondAd(t,i,s,a){let o=document.querySelector("#vuukle-ad-2".concat(s));if((!t||2!==t.querySelectorAll(".vuukle-ads").length)&&(!o||2!==o.querySelectorAll(".vuukle-ads").length)&&(i||o)){let i=new Z(this.articleConfig,"",this.articleConfig.endlessMode?void 0:"2",a,this.apiKeyConfig.targets?.secondDefault?.hideAdLabel,this.apiKeyConfig.hideLabelLogo,this.apiKeyConfig.targets?.secondDefault?.sideAds||0,this.apiKeyConfig.targets?.secondDefault?.scrollingAd);if(this.currentAdIds.push(i.advertisementID),o)o.appendChild(i.wrapper);else{if(!t)return void(0,e.qu)("warn","[Platform.js] Second AD Element is missing");if(this.apiKeyConfig.targets?.secondDefault?.scrollingAd||this.apiKeyConfig.targets?.secondDefault?.greyBg){let e=document.createElement("div");t.appendChild(e),e.appendChild(i.wrapper),e.style.order="2",this.apiKeyConfig.targets?.secondDefault?.greyBg&&this.applyGreyBackground(e,i)}else t.appendChild(i.wrapper);i.wrapper.style.order="2"}this.articleConfig.endlessMode&&i.initVuukleHBQueue(),i.wrapper.style.minHeight||(i.wrapper.style.minHeight="330px"),this.applyCustomCSS("secondDefault",i.wrapper),void 0!==this.apiKeyConfig.targets?.secondDefault?.postInsertionOperation&&this.apiKeyConfig.targets?.secondDefault?.postInsertionOperation?.()}}createAdAtCustomLocation(t,i,s,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!t)return void(0,e.qu)("warn","[Platform.js] Custom AD Element is missing");if(t.querySelector(".vuukle-ads"))return;let l=new Z(this.articleConfig,r,s,o,this.apiKeyConfig.targets?.[i]?.hideAdLabel,this.apiKeyConfig.hideLabelLogo,0,this.apiKeyConfig.targets?.[i]?.scrollingAd);if(this.currentAdIds.push(l.advertisementID),t.appendChild(l.wrapper),(n.Z.isMobileUser||!n.Z.isMobileUser&&this.apiKeyConfig.quizzlyInterscroller?.enableOnDesktop)&&this.apiKeyConfig.quizzlyInterscroller?.adTarget&&this.apiKeyConfig.quizzlyInterscroller?.adTarget===i){let e=document.querySelector(a.Z.selectors.quiz.concat(r))||document.querySelector(a.Z.selectors.quizAlt.concat(r));e&&l.constructInterscrollerAd(e)}this.articleConfig.endlessMode&&l.initVuukleHBQueue();let d=t.parentElement;d&&this.isTrafficExchange(d.id)&&l.refreshAd(),void 0!==this.apiKeyConfig.targets?.[i]?.postInsertionOperation&&this.apiKeyConfig.targets?.[i]?.postInsertionOperation?.();let c=null,u=void 0!==this.apiKeyConfig.insertQuizAndAd;if(l.wrapper.nextElementSibling&&l.wrapper.nextElementSibling.id.includes("vuukle-quiz")&&(c=l.wrapper.nextElementSibling),l.wrapper.previousElementSibling&&l.wrapper.previousElementSibling.id.includes("vuukle-quiz")&&(c=l.wrapper.previousElementSibling),c&&c.parentElement&&!u){let e=c.parentElement,t=e.parentElement;!n.Z.isMobileUser&&t&&t.offsetWidth>605&&(e.style.gap="5px")}return l}async createGPTUnit(e,t,i,s,a){let o=a?a.toString():M(e),r=this.createAdAtCustomLocation(t,e,n.Z.isMobileUser&&this.apiKeyConfig.targets?.[e]?.gptNumberMobile?this.apiKeyConfig.targets?.[e]?.gptNumberMobile:o,i,s);this.apiKeyConfig.targets?.[e]?.greyBg&&t&&this.applyGreyBackground(t,r)}generateVerticalSideAds(e,t){let i=e=>`
       position: fixed;
       z-index: 3000;
       ${e}: 0px;
       margin-left: 5px;
       top: 30px;
       width: 160px;
       height: 600px;
       display: block;
       text-align: center;
       margin-top: 50px;
     `;this.apiKeyConfig.targets?.[t].enableLeftVertical&&e?e.style.cssText+=i("left"):this.apiKeyConfig.targets?.[t].enableRightVertical&&e&&(e.style.cssText+=i("right"))}async createCustomAd(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.apiKeyConfig.targets?.[e].passbackUnit?(new(await i.e("199").then(i.bind(i,76))).default(this.apiKeyConfig,s,e),this.apiKeyConfig.targets?.[e].passbackUnit?.replaceWithGPT&&setTimeout(()=>{s&&T(s),this.createGPTUnit(e,s,t,a,this.apiKeyConfig.targets?.[e]?.gptNumber)},1e3*(this.apiKeyConfig.targets?.[e]?.passbackUnit?.replaceTime||30))):this.apiKeyConfig.targets?.[e].outbrainUnit?new(await i.e("405").then(i.bind(i,8881))).default(this.apiKeyConfig.targets[e].outbrainUnit,s):this.createGPTUnit(e,s,t,a,this.apiKeyConfig.targets?.[e]?.gptNumber),this.generateVerticalSideAds(s,e),this.applyCustomCSS(e,s)}async insertAdDivAtGivenSelector(t,i){if(this.apiKeyConfig.targets){let{selector:s,mobileSelector:a,insert:o,gptId:r,gptIdMobile:l}=this.apiKeyConfig.targets[i],d=await this.getInsertLocationForAnAd(a,s,i),c=document.getElementById(i.concat(t));if(d&&!c){let e=_(i,t,o,d);if(this.apiKeyConfig.targets?.[i].skipAdCreation)return;this.createCustomAd(i,n.Z.isMobileUser&&l?l:r,e,t)}else{let t=n.Z.isMobileUser&&a?a:s;(0,e.qu)("warn","string"==typeof t?`[Platform.js] Element at the selector '${t}' is missing`:"[Platform.js] Element at the evaluated selector is missing")}}}decideWhetherAdShouldBeDynamicallyInserted(e,t,i){if("function"==typeof this.apiKeyConfig.getDateFunction&&this.apiKeyConfig.injectAdsDynamicallyBeforeDate&&!i){let i=this.apiKeyConfig.getDateFunction();if(!(i instanceof Date))return void this.insertAdDivAtGivenSelector(e,t);let s=new Date(this.apiKeyConfig.injectAdsDynamicallyBeforeDate);i.valueOf()<s.valueOf()&&this.insertAdDivAtGivenSelector(e,t)}else this.insertAdDivAtGivenSelector(e,t)}async createAdvancedAd(e,t,i){this.apiKeyConfig.targets&&Object.keys(this.apiKeyConfig.targets).forEach(async s=>{if(this.apiKeyConfig.targets?.[s].adUnitExcludedGeos&&this.apiKeyConfig.targets?.[s].adUnitExcludedGeos.includes(n.Z.userCountry)||this.apiKeyConfig.targets?.[s].adUnitGeos&&!this.apiKeyConfig.targets?.[s].adUnitGeos.includes(n.Z.userCountry)||(this.apiKeyConfig.targets?.[s].ignorePaths||this.apiKeyConfig.targets?.[s].ignorePathsMobile)&&P(n.Z.isMobileUser&&this.apiKeyConfig.targets?.[s].ignorePathsMobile?this.apiKeyConfig.targets?.[s].ignorePathsMobile:this.apiKeyConfig.targets?.[s].ignorePaths||[]))return;if("boolean"==typeof this.apiKeyConfig.targets?.[s].onlyDesktop){let e=n.Z.isMobileUser&&this.apiKeyConfig.targets?.[s].onlyDesktop,t=!n.Z.isMobileUser&&!this.apiKeyConfig.targets?.[s].onlyDesktop;if(e||t)return}"function"==typeof this.apiKeyConfig.targets?.[s].preInsertionOperation&&this.apiKeyConfig.targets[s].preInsertionOperation?.();let a="object"==typeof this.articleConfig.ads&&this.articleConfig.ads.noDefaults;if("default"!==s&&"secondDefault"!==s||a)if(this.apiKeyConfig.targets?.[s]?.insert&&(this.apiKeyConfig.targets[s].selector||this.apiKeyConfig.targets[s].mobileSelector))this.decideWhetherAdShouldBeDynamicallyInserted(i,s,!!this.apiKeyConfig.targets?.[s].bypassDynamicInjectionDateLimit);else{if(this.apiKeyConfig.targets?.[s].skipAdCreation)return;let e=document.getElementById(s.concat(i));e||(e=await (0,A.br)(`#${s.concat(i)}`,250,20)),this.createCustomAd(s,n.Z.isMobileUser&&this.apiKeyConfig.targets?.[s].gptIdMobile?this.apiKeyConfig.targets[s].gptIdMobile:this.apiKeyConfig.targets?.[s].gptId,e,i)}else"default"===s?this.createFirstAd(e,n.Z.isMobileUser&&this.apiKeyConfig.targets?.default?.gptIdMobile?this.apiKeyConfig.targets?.default?.gptIdMobile:this.apiKeyConfig.targets?.default?.gptId):this.createSecondAd(e,t,i,n.Z.isMobileUser&&this.apiKeyConfig.targets?.default?.gptIdMobile?this.apiKeyConfig.targets?.secondDefault?.gptIdMobile:this.apiKeyConfig.targets?.secondDefault?.gptId)})}replaceAdsWhenInView(t,i,s,a){let o=[],r={},l={},d=[],c=[],u=()=>{let i=t=>{if(o.includes(t))return;let i=document.querySelector(`div[id="${t}"]`);if(i){let s=new IntersectionObserver(i=>{i.forEach(i=>{let{intersectionRatio:s}=i;l[t]=(0,h.So)(100*s),(0,e.Gf)("log",!0,`[Platform.js] Current visibility of ${t}: ${l[t]}%`)})},{threshold:(0,h.wt)(0,1,.05)});s.observe(i),o.push(t),r[t]=s}};t.forEach(e=>i(e)),c.forEach(e=>i(e))};setInterval(()=>{u()},5e3),setInterval(()=>{let h=t=>{if(l[t]>=s[t]){r[t]?.disconnect(),o.indexOf(t)>-1&&o.splice(o.indexOf(t),1);let s=i[t];d.includes(t)||(d.push(t),d.push(s));let u=document.createElement("div");u.id=s,c.includes(t)||c.push(s);let h=document.querySelector(`div[id="${t}"]`);if(h){h.replaceWith(u);let i=this.createAdAtCustomLocation(u,s,n.Z.isMobileUser&&this.apiKeyConfig.targets?.[s]?.gptNumberMobile?this.apiKeyConfig.targets?.[s]?.gptNumberMobile:M(s),n.Z.isMobileUser&&this.apiKeyConfig.targets?.[s].gptIdMobile?this.apiKeyConfig.targets[s].gptIdMobile:this.apiKeyConfig.targets?.[s].gptId,a);i&&i.refreshAd(),(0,e.Gf)("log",!0,`[Platform.js] ${t} ad with the visibility of ${l[t]}% replaced with ${s}`)}}l[t]<s[t]&&(0,e.Gf)("log",!0,`[Platform.js] ${t} is not visible enough to the user (Current visibility: ${l[t]}%, Required visibility: ${s[t]}%). Skipping replacement...`),u()};t.forEach(e=>{d.includes(e)||h(e)}),c.forEach(e=>{h(e)})},3e4)}performCustomAdRefreshes(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!window.googletag.pubads)return void setTimeout(()=>this.performCustomAdRefreshes(t),100);let s={},a={},o={},r=[],l=[],d=t.inViewRefreshPercentage||50,c=()=>{window.googletag.pubads().getSlots().forEach(t=>{if(l.includes(t.getSlotElementId()))return;let i=document.querySelector(`div[id="${t.getSlotElementId()}"]`)?.parentElement;i&&(new IntersectionObserver(i=>{i.forEach(i=>{let{intersectionRatio:a}=i;s[t.getSlotElementId()]=(0,h.So)(100*a),(0,e.Gf)("log",!0,`[Platform.js] Current visibility of ${t.getElementById()}: ${s[t.getSlotElementId()]}%`)})},{threshold:(0,h.wt)(0,1,.05)}).observe(i),l.push(t.getSlotElementId()))})};window.googletag.cmd.push(()=>{let e=window.googletag.pubads().getSlots();if(e&&e.length>0)c();else{let e=setInterval(()=>{let t=window.googletag.pubads().getSlots();t&&t.length>0&&(c(),clearInterval(e))},200)}}),setInterval(()=>{window.googletag.cmd.push(()=>{c();let l=window.googletag.pubads().getSlots();l&&l.length>0&&l.forEach(l=>{let c=l.getResponseInformation()?.lineItemId||l.getResponseInformation()?.sourceAgnosticLineItemId,u=l.getSlotElementId(),h=document.querySelector(`div[id="${u}"]`),g=h?`${h.parentElement.offsetWidth}x${h.parentElement.offsetHeight}`:"";if(u.includes("1497448474263"))return;if(t.gamOrderIdExclusion&&t.gamOrderIdExclusion.includes(c))return void(0,e.Gf)("log",!0,`[Platform.js] ${u} ad with line item ID of ${c} detected, this ad is excluded from being refreshed. Skipping ad replacement...`);let m=()=>{let s=t.sizesForTargets[o[u]||g];if(s)for(let t of s){if(r.includes(t))continue;r.push(t);let s=document.createElement("div");s.id=t,h.replaceWith(s);let a=this.createAdAtCustomLocation(s,t,n.Z.isMobileUser&&this.apiKeyConfig.targets?.[t]?.gptNumberMobile?this.apiKeyConfig.targets?.[t]?.gptNumberMobile:M(t),n.Z.isMobileUser&&this.apiKeyConfig.targets?.[t].gptIdMobile?this.apiKeyConfig.targets[t].gptIdMobile:this.apiKeyConfig.targets?.[t].gptId,i);a&&a.refreshAd(),(0,e.Gf)("log",!0,`[Platform.js] ${u} ad replaced with ${t} of size ${g}`);break}};t.gamOrderIdInclusion&&t.gamOrderIdInclusion.includes(c)&&(t.disableViewableRefresh?(t.sizesForTargets[o[u]||g]&&(0,e.Gf)("log",!0,`[Platform.js] Replacing ${u} ad with line item ID of ${c} and of ${g} size...`),m()):"number"==typeof s[u]&&s[u]>=d&&(t.sizesForTargets[o[u]||g]&&(0,e.Gf)("log",!0,`[Platform.js] Replacing ${u} ad with line item ID of ${c} with visibility of ${s[u]}% of and of ${g} size...`),m()));let f=!t.onlyRefreshIfEmpty||t.onlyRefreshIfEmpty&&a[u];f&&t.disableViewableRefresh?(t.sizesForTargets[o[u]||g]&&(0,e.Gf)("log",!0,`[Platform.js] Replacing ${u} ${a[u]?"empty":""} ad of ${g} size...`),m()):f&&"number"==typeof s[u]&&s[u]>=d&&(t.sizesForTargets[o[u]||g]&&(0,e.Gf)("log",!0,`[Platform.js] Replacing ${u} ${a[u]?"empty":""} ad of with visibility of ${s[u]}% and of ${g} size...`),m())})})},3e4),window.googletag.pubads().addEventListener("slotRenderEnded",t=>{let i=t.slot.getSlotElementId(),n=document.querySelector(`div[id="${i}"]`),r=t.size?t.size.join("x"):n?`${n.parentElement.offsetWidth}x${n.parentElement.offsetHeight}`:"",l=t.lineItemId||t.sourceAgnosticLineItemId,d=t.isEmpty;t.size&&(o[i]=t.size.join("x"));let u={"Advertiser ID":t.advertiserId,"Campaign ID":t.campaignId,"Company IDs":t.companyIds,"Creative ID":t.creativeId,"Creative Template ID":t.creativeId,"Is backfill?":t.isBackfill,"Is empty?":t.isEmpty,"Label IDs":t.labelIds,"Line Item ID":t.lineItemId,Size:t.size?t.size.join("x"):r,"Slot content changed?":t.slotContentChanged,"Source Agnostic Creative ID":t.sourceAgnosticCreativeId,"Source Agnostic Line Item ID":t.sourceAgnosticLineItemId,"Yield Group IDs":t.yieldGroupIds};a[i]=d,(0,e.Gf)("log",!0,"[Platform.js] Ad render details",i,u,`size: ${r}`,`visibility %: ${s[i]}`,`line item ID: ${l}`,`is empty: ${d}`),c()})}findAndReplaceExistingAdUnits(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",{targets:t,replaceAdsAtTopLevel:i,adUnit:s,prebid7:a}=this.apiKeyConfig,o=i?window.top:window;if(i){let e=JSON.parse((0,g._2)(`vuukleconfhttps://cdn.vuukle.com/ads/${this.articleConfig.host}.json`)||"{}");e&&e.data&&(o._vuukleConfig=e.data),et.loadPrebid(s,a,o)}if(t){let i={};if(Object.keys(t).forEach(e=>{let s=n.Z.isMobileUser&&t[e].replaceExistingAd?.ignorePathsMobile?t[e].replaceExistingAd?.ignorePathsMobile:t[e].replaceExistingAd?.ignorePaths||[];if(t[e].replaceExistingAd&&!P(s||[],o)){i[e]=t[e];let s=n.Z.isMobileUser&&t[e].replaceExistingAd?.mobileSelector?t[e].replaceExistingAd?.mobileSelector:t[e].replaceExistingAd?.selector,a="";if("function"==typeof s&&(a=s().id),"string"==typeof s&&(a=s.slice(1)),Array.isArray(s)){for(let e of s)if(document.querySelector(e)){a=e.slice(1);break}}a&&this.currentAdIds.push(a)}}),Object.keys(i).length>0){let s=async t=>{if((this.apiKeyConfig.targets?.[t].ignorePaths||this.apiKeyConfig.targets?.[t].ignorePathsMobile)&&P(n.Z.isMobileUser&&this.apiKeyConfig.targets?.[t].ignorePathsMobile?this.apiKeyConfig.targets?.[t].ignorePathsMobile:this.apiKeyConfig.targets?.[t].ignorePaths||[],o))return;if("boolean"==typeof this.apiKeyConfig.targets?.[t].onlyDesktop){let e=n.Z.isMobileUser&&this.apiKeyConfig.targets?.[t].onlyDesktop,i=!n.Z.isMobileUser&&!this.apiKeyConfig.targets?.[t].onlyDesktop;if(e||i)return}let s=await this.getInsertLocationForAnAd(i[t].replaceExistingAd?.mobileSelector,i[t].replaceExistingAd?.selector,t,o);if(s&&!o.document.getElementById(t.concat(e))){T(s);let a=_(t,e,i[t].replaceExistingAd?.insert,s,o);this.createCustomAd(t,n.Z.isMobileUser&&this.apiKeyConfig.targets?.[t]?.gptIdMobile?this.apiKeyConfig.targets?.[t].gptIdMobile:this.apiKeyConfig.targets?.[t]?.gptId,a,e)}};setTimeout(()=>{let e=(e,i,s)=>{let a=e.getResponseInformation(),o=a?.lineItemId?.toString()||a?.sourceAgnosticLineItemId?.toString();return console.log(`[Platform] ${s} Detected line item for ${i} - ${o}, does the div of it exist on the page - ${!!document.querySelector(`#${i}`)}, Is it included in whitelist - ${t[s].replaceExistingAd?.publisher_gam_lineitems_whitelist?.includes(o)}`),o},a=()=>{let e=new Set,t=this.currentAdIds.filter(e=>!e.includes("div-gpt-ad-1497448474263")),i=()=>{t.forEach(t=>{let i=q(t,o);i&&e.add(i)})};if(i(),e.size>0){let t=e=>e.toString().padStart(2,"0");setInterval(()=>{i();let s=new Date,a=`[${s.getHours().toString()}:${t(s.getMinutes())}:${t(s.getSeconds())}]`;console.log(`[Platform] ${a} Refresh all slots`),e.forEach(e=>{o.googletag.pubads().refresh([e])})},3e4)}},n=!1;Object.keys(i).forEach(async i=>{if(t[i].replaceExistingAd?.publisher_gam_lineitems_whitelist){let r=!1,l=[],d=[],c=[],u=!1,h=this.currentAdIds.filter(e=>!e.includes("div-gpt-ad-1497448474263"));if(h.forEach((a,n)=>{let g=q(a,o);if(g){l.push(g);let o=e(g,a,i);if(o&&t[i].replaceExistingAd?.publisher_gam_lineitems_whitelist?.includes(o)&&(c.push(a),r=!0,s(i)),(void 0===o||"undefined"===o)&&document.querySelector(`#${a}`)){d.push(a);let o=!1;window.googletag.pubads().addEventListener("slotRenderEnded",n=>{if(n.slot===g){if(!o){console.log(`[Platform] ${a} is now rendered`);let o=e(g,a,i);o&&t[i].replaceExistingAd?.publisher_gam_lineitems_whitelist?.includes(o)&&(r=!0,s(i)),c.push(a),d.length<=c.length&&(u=!0)}o=!0}})}(d.length===c.length||0===d.length&&n===h.length-1)&&(u=!0)}}),!n){let e=setInterval(()=>{u&&!r&&(a(),clearInterval(e)),u&&r&&clearInterval(e)},500);n=!0}}else s(i)})},3e4)}}}static removeAllAds(){if(et.canCreateAds){let e=document.querySelectorAll(".vuukle-ads");if(0===e.length){let e=setInterval(()=>{let t=document.querySelectorAll(".vuukle-ads");t.length>0&&clearInterval(e),t.forEach(e=>{e.remove()})},2e3)}else e.forEach(e=>{e.remove()});et.canCreateAds=!1}}findAndReplaceAdSenseUnits(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[],i=[];if(this.apiKeyConfig.targets&&Object.keys(this.apiKeyConfig.targets).forEach(e=>{let s=!0;if(!((this.apiKeyConfig.targets?.[e].ignorePaths||this.apiKeyConfig.targets?.[e].ignorePathsMobile)&&P(n.Z.isMobileUser&&this.apiKeyConfig.targets?.[e].ignorePathsMobile?this.apiKeyConfig.targets?.[e].ignorePathsMobile:this.apiKeyConfig.targets?.[e].ignorePaths||[]))){if("boolean"==typeof this.apiKeyConfig.targets?.[e].onlyDesktop){let t=n.Z.isMobileUser&&this.apiKeyConfig.targets?.[e].onlyDesktop,i=!n.Z.isMobileUser&&!this.apiKeyConfig.targets?.[e].onlyDesktop;s=!t&&!i}if(this.apiKeyConfig.targets?.[e].replaceAdSense&&s){let i=M(e);t.push(i)}if((this.apiKeyConfig.targets?.[e].replaceAdSenseWithSlotID||this.apiKeyConfig.targets?.[e].replaceAdSenseWithSlotIDMobile)&&s){let t=n.Z.isMobileUser&&this.apiKeyConfig.targets?.[e].replaceAdSenseWithSlotIDMobile?this.apiKeyConfig.targets?.[e].replaceAdSenseWithSlotIDMobile:this.apiKeyConfig.targets?.[e].replaceAdSenseWithSlotID,s=M(e);i.push({gptNumber:s,slotID:t||"",targetName:e})}}}),0===t.length&&0===i.length)return;let s=document.querySelectorAll('ins[class="adsbygoogle"]'),a=[];s.length>0&&s.forEach(e=>{e&&a.push(e)}),setTimeout(()=>{i.length>0&&i.forEach(t=>{let i=document.querySelector(`ins[data-ad-slot="${t.slotID}"]`);if(i){let s=document.createElement("div");i.insertAdjacentElement("afterend",s),i.parentElement?.removeChild(i),this.createGPTUnit(t.targetName,s,void 0,e,t.gptNumber)}}),a.forEach(i=>{t.length>0&&(T(i),this.createGPTUnit("",i,void 0,e,t.shift()))})},3e4)}}let U=()=>new URLSearchParams(window.location.search).get("surveyId")&&!window.location.href.includes("quizzly.ai"),j=e=>U()||e,V=e=>{let t=new URLSearchParams(window.location.search);return e||t.get("surveyId")};class B extends p.Z{id;config;constructor(e,t){if(super(e,"Vuukle Quiz Widget",a.Z.urls.quiz,{apiKey:t.apiKey,host:t.host,articleId:t.articleId,tags:t.tags,title:t.title,url:t.url,img:t.img,version:a.Z.versions.quiz,language:t.language||"en",sponsoredOnly:j(!!t.quiz.sponsoredOnlyQuestions),sponsoredQuestionPosition:"number"==typeof t.quiz.sponsoredQuestionsPosition&&Math.max(1,t.quiz.sponsoredQuestionsPosition),forcedSponsoredSurveyId:V(t.quiz.forcedSponsoredSurveyId),forceExposedGroup:t.quiz.forceExposedGroup||U()},!1,!1),this.id=e,this.config=t,this.serverScrollLogger=e=>{if(e)return o.Z.log("view_quizzly",this.config),this.onLoad(e=>e.postMessage({isViewed:!0},"*")),()=>!1;let t=!1;return(0,f.Z)(e=>{e&&!t&&(o.Z.log("view_quizzly",this.config),this.onLoad(e=>e.postMessage({isViewed:!0},"*")),t=!0)},300)},this.iframe.style.maxHeight="265px",this.iframe.allow="web-share; clipboard-write",this.intersectionObserverOptions={threshold:0,rootMargin:"400px 400px 400px 400px"},t.quiz.compactMode&&!n.Z.isMobileUser&&(this.onLoad(e=>e.postMessage({compactMode:!0},"*")),this.changeHeight(250),this.changeWidth(250)),t.quiz.quizzlyExploreRedirect&&this.onLoad(e=>e.postMessage({redirectToExplore:!0},"*")),window.location.hash&&window.location.hash.match(/quizzly/))if("interactive"===document.readyState||"complete"==document.readyState)setTimeout(()=>{let e=this.iframe.getBoundingClientRect();window.scrollTo(e.x,e.y)},1500);else{let e=this.iframe;document.addEventListener("readystatechange",function t(){("interactive"===document.readyState||"complete"===document.readyState)&&setTimeout(()=>{let i=e.getBoundingClientRect();window.scrollTo(i.x,i.y),document.removeEventListener("readystatechange",t)},1500)})}}changeHeight(e){this.iframe.style.maxHeight="string"==typeof e?e:`${e}px`}changeWidth(e){this.iframe.style.maxWidth="string"==typeof e?e:`${e}px`,this.iframe.style.width="string"==typeof e?e:`${e}px`}serverScrollLogger;fireQuizViewEvent(){let e=this.serverScrollLogger(this.config.amp||!1);"undefined"!=typeof IntersectionObserver?new IntersectionObserver(t=>{t.forEach(t=>{let{intersectionRatio:i,isIntersecting:s}=t,a=i>.025||s;scheduler.postTask(()=>{e(a)},{priority:"background"})})},{threshold:.1}).observe(this.iframe):window.addEventListener("scroll",()=>{scheduler.postTask(()=>{e(this.isInView)},{priority:"background"})},!1)}}class ${index;commentsIframe;iframelessComments;emotesIframe;powerbars;subscribeWidgets;audioWidgets;quizWidget;articleConfig;widgetsCreator;constructor(e,t,s,a,r,l,d,c,u,h,g,m,f,p,b,w,y,v){this.index=e,this.commentsIframe=t,this.iframelessComments=s,this.emotesIframe=a,this.powerbars=r,this.subscribeWidgets=l,this.audioWidgets=d,this.quizWidget=c,this.articleConfig=u,this.widgetsCreator=h,this.powerbarListeners=[],this.subscribeListeners=[],this.audioListeners=[],this.initializeModal=async(e,t)=>{if(e){this.modalIframe=e;let s=await i.e("685").then(i.bind(i,5675));return this.modalListener=new s.ModalListener(this.modalIframe,this.articleConfig,this.powerbarListeners,this.commentsListener,this.iframelessCommentsListener,this.emotesListener,this.quizListener),this.modalListener.postMessage(t),$.widgetsOnPageWithThemeSupport[this.index].modalListener=this.modalListener,this.commentsListener?.updateModalInstance(e,this.modalListener),this.iframelessCommentsListener?.updateModalInstance(e,this.modalListener),this.powerbarListeners.forEach(t=>t.updateModalInstance(e,this.modalListener)),this.audioListeners.forEach(t=>t.updateModalInstance(e,this.modalListener)),this.quizListener?.updateModalInstance(e,this.modalListener),!0}return!1},g&&(this.commentsListener=g),m&&(this.iframelessCommentsListener=m),f&&(this.quizListener=f),this.powerbarListeners=p,b&&(this.emotesListener=b,this.emotesListener.setCommunicationCreatorInstance(this)),w&&(this.modalListener=w),this.subscribeListeners=y,this.audioListeners=v,this.requestInitialData(),n.Z.addCookieConsentListener("-"+e,e=>this.changeCookieSettingsForWidgets(e)),n.Z.addGeoListener("-"+e,e=>this.shareMessageWithWidgets(["comments","powerbar","audio"],{geoData:e})),o.Z.addIPListener("-"+e,e=>this.shareMessageWithWidgets(["comments","powerbar","audio"],{ip:e})),this.shareMessageWithWidgets(["comments","powerbar","audio"],{country:n.Z.userCountry}),this.shareMessageWithWidgets(["comments","powerbar","audio"],{userGUID:n.Z.userAPIKey}),i.e("295").then(i.bind(i,2864)).then(e=>{new e.default(u,{},this).detectAdBlockForWidgets()})}modalIframe;commentsListener;iframelessCommentsListener;quizListener;powerbarListeners;emotesListener;modalListener;subscribeListeners;static popupCreated=!1;audioListeners;static sendGAEvents=!1;static commentCountLock=!1;static commentInputBoxRect;static postedCommentCount=0;static widgetsOnPageWithThemeSupport={};static responseGroups=null;static quizWidgetsOnThePage=new Map;static sendResponseGroupsToQuizWidgets=()=>{this.quizWidgetsOnThePage.forEach(e=>{e.postMessage({responseGroups:$.responseGroups})})};static async createCommunicationCreatorInstance(t,s,a,o,n,r,l,d,c,u){let h,g,m,f,p,b=[],w=[],v=[];if((0,e.IW)(e.PP.commsCreatorStart),(0,e.rX)(e.J8.platformStartToCommsStart,e.PP.platformStart,e.PP.commsCreatorStart),n.length>0){for(let e of n){let s=await i.e("557").then(i.bind(i,1861));b.push(new s.PowerbarListener(e,n.filter(t=>t.id!==e.id),t,c,u,p))}$.widgetsOnPageWithThemeSupport[t]={},$.widgetsOnPageWithThemeSupport[t].powerbarListeners=$.widgetsOnPageWithThemeSupport[t].powerbarListeners||[],b.forEach(e=>{$.widgetsOnPageWithThemeSupport[t].powerbarListeners?.push(e)})}if(l.length>0){for(let e of l){let t=await i.e("114").then(i.bind(i,7467));v.push(new t.AudioWidgetListener(e,l.filter(t=>t.id!==e.id),c,b,p,u))}b.forEach(e=>{e.updateAudioListenerInstance(v)})}if(o&&(f=new S(o,c,b),$.widgetsOnPageWithThemeSupport[t]||($.widgetsOnPageWithThemeSupport[t]={}),$.widgetsOnPageWithThemeSupport[t].emotesListener=f),d&&(m=new E(d,p,c,t,u,f,b),$.widgetsOnPageWithThemeSupport[t]||($.widgetsOnPageWithThemeSupport[t]={}),$.widgetsOnPageWithThemeSupport[t].quizListener=m,$.quizWidgetsOnThePage.set(t,m),m.postMessage({responseGroups:$.responseGroups})),s&&(h=new y(s,t,c,u,f,b,v,m,p),$.widgetsOnPageWithThemeSupport[t]||($.widgetsOnPageWithThemeSupport[t]={}),$.widgetsOnPageWithThemeSupport[t].commentsListener=h,b.forEach(e=>{h&&e.updateCommentsListenerInstance(h)}),v.forEach(e=>{h&&e.updateCommentsListenerInstance(h)}),m?.updateCommentsListenerInstance(h)),a&&(g=new k(a,t,c,u,f,b,v,m,p),$.widgetsOnPageWithThemeSupport[t]||($.widgetsOnPageWithThemeSupport[t]={}),$.widgetsOnPageWithThemeSupport[t].iframelessCommentsListener=g,b.forEach(e=>{g&&e.updateIframelessCommentsListenerInstance(g)}),v.forEach(e=>{g&&e.updateIframelessCommentsInstance(g)}),g&&m?.updateIframelessCommentsInstance(g)),r.length>0)for(let e of r){let t=await i.e("936").then(i.bind(i,9899));w.push(new t.SubscribeListener(e))}return(0,e.IW)(e.PP.commsCreatorEnd),(0,e.rX)(e.J8.commsStartToEnd,e.PP.commsCreatorStart,e.PP.commsCreatorEnd),(0,e.rX)(e.J8.platformStartToCommsEnd,e.PP.platformStart,e.PP.commsCreatorEnd),new $(t,s,a,o,n,r,l,d,c,u,h,g,m,b,f,p,w,v)}shareMessageWithWidgets(e,t){let i={comments:this.commentsListener,iframelessComments:this.iframelessCommentsListener,emotes:this.emotesListener,modal:this.modalListener,quiz:this.quizListener},s={powerbar:this.powerbarListeners,subscribe:this.subscribeListeners,audio:this.audioListeners};for(let s of e)i[s]?.postMessage(t),"comments"===s&&i.iframelessComments?.postMessage(t);for(let i of e){let e=s[i];e&&e.forEach(e=>{e.postMessage(t)})}}activateCTAInQuiz(e){this.quizListener?.enableCTAPopup(e)}showEmotesArticlesByDefault(){this.emotesListener?.postMessage({loadArticlesByDefault:!0})}isQuizOnThePage(){return!!(this.quizWidget&&this.quizListener)}removeMessageListeners(){let e=[this.commentsListener,this.emotesListener,this.modalListener,this.quizListener],t=[this.powerbarListeners,this.subscribeListeners,this.audioListeners];for(let t of e)t?.removeMessageListener();for(let e of t)e?.forEach(e=>e.removeMessageListener())}toggleAudioButton(e){this.shareMessageWithWidgets(["comments"],{showAudioButton:e})}tellWidgetsAboutAdblock(){this.shareMessageWithWidgets(["comments","modal"],{adblockEnabled:!0}),this.commentsListener?.setIsAdblockDetected(!0),this.iframelessCommentsListener?.setIsAdblockDetected(!0)}enableQuizCompactMode(){this.shareMessageWithWidgets(["quiz"],{compactMode:!0}),this.quizWidget?.changeHeight(250),this.quizWidget?.changeWidth(250),this.quizListener?.setFormerHeight(250)}enable300x250QuizCompactMode(){this.shareMessageWithWidgets(["quiz"],{compact300x250:!0}),this.quizWidget?.changeHeight(250),this.quizWidget?.changeWidth(300),this.quizListener?.setFormerHeight(250)}tellQuizToChangeMaxHeight(e){this.shareMessageWithWidgets(["quiz"],{setMaxHeightTo:e}),this.quizWidget?.changeHeight(e),this.quizListener?.setFormerHeight(e)}tellQuizToChangeMaxWidth(e){this.shareMessageWithWidgets(["quiz"],{setMaxWidthTo:e}),this.quizWidget?.changeWidth(e)}toggleAdSpaceCreation(e){this.shareMessageWithWidgets(["comments"],{canCreateAdSpace:e})}tellCWToPostAnonToken(){this.shareMessageWithWidgets(["comments"],{anonToken:r.Z.getAnonToken()})}enableAudioAds(e){this.shareMessageWithWidgets(["powerbar","comments","audio"],{audioAdID:e})}async checkForAdblockers(){let e=await i.e("295").then(i.bind(i,2864));e.default.adblockDetectionHasExecuted||new e.default(this.articleConfig,l.xw[this.articleConfig.apiKey],this)}passCustomFontToWidgets(e){this.shareMessageWithWidgets(["quiz"],{customFont:e})}addCustomStylesQuiz(e){this.shareMessageWithWidgets(["quiz"],{customQuizStyles:e})}hideAddVuukle(){this.shareMessageWithWidgets(["comments"],{hideAddVuukle:!0})}hideVuukleLogoInFooter(){this.shareMessageWithWidgets(["comments"],{hideVuukleLogoInFooter:!0})}enableAudienceTrackingPixel(e,t){this.quizListener?.enableAudienceTrackingPixel(e,t)}trackTimeSpentOnQuiz(){this.quizListener?.trackTimeSpentOnWidget()}addCommentsPanelTrigger(e){this.commentsListener&&this.commentsListener.addCustomTriggerForCommentsPanel(e),this.iframelessCommentsListener&&this.iframelessCommentsListener.addCustomTriggerForCommentsPanel(e)}async getDataFromVuukleServers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{quizOverride:!1},t=(0,A.zd)()&&!(0,A.n0)()&&window.top?window.top:window,i=(0,A.bq)("property","article:modified_time",t);return await (0,h.$f)("GET","https://api.vuukle.com/api/v1/Comments/loadVuukle",{apiKey:this.articleConfig.apiKey,articleId:this.articleConfig.articleId,globalRecommendation:this.articleConfig.globalRecommendations,host:this.articleConfig.host,start:0,uri:this.articleConfig.url,quizEnabled:e.quizOverride||!!this.quizWidget,...this.quizWidget?{quizLngCode:document.documentElement.lang||"en",title:this.articleConfig.title}:{},...i?{modifiedTime:i}:{}},"text/plain")}async createQuizInstanceNearElement(e){if(this.quizWidget||document.querySelector(a.Z.selectors.quiz.concat(this.index))||l.xw[this.articleConfig.apiKey].excludeFromEmptyEmotesQuizInsertion||!this.articleConfig.quiz.enabled)return;let t=document.createElement("div");t.id=a.Z.selectors.quiz.slice(1).concat(this.index),e.insertAdjacentElement("afterend",t);let i=new B("quiz-iframe".concat(this.index),this.articleConfig);t.appendChild(i.iframe),this.quizWidget=i;let s=new E(this.quizWidget,this.modalListener,this.articleConfig,this.index,this.widgetsCreator,this.emotesListener,this.powerbarListeners);this.quizListener=s,$.widgetsOnPageWithThemeSupport[this.index]||($.widgetsOnPageWithThemeSupport[this.index]={}),$.widgetsOnPageWithThemeSupport[this.index].quizListener=s,$.quizWidgetsOnThePage.set(this.index,s),s.postMessage({responseGroups:$.responseGroups}),await this.requestInitialData(),this.applyQuizConfig(l.xw[this.articleConfig.apiKey],!1,this.index),this.modalListener?.updateQuizListenerInstance(this.quizListener),this.commentsListener?.updateQuizListenerInstance(this.quizListener),this.iframelessCommentsListener?.updateQuizListenerInstance(this.quizListener)}async requestPublicConfig(){try{let e=await (0,h.$f)("GET","https://api.vuukle.com/api/v1/Publishers/PublicConfigs",{apiKey:this.articleConfig.apiKey,host:this.articleConfig.host},"text/plain");if(!e.success)throw Error(e.errors[0]);if(e.data.geo&&n.Z.determineCookieUsability(e.data.geo.countryCode||null,e.data.geo.region||null),e.data.settings.comments.browserNotificationEnabled&&!s.Z.get("vuukle_notification_subscription")&&!s.Z.get("vuukle_notification_subscription_dismissed")&&window.ServiceWorker&&new(await i.e("108").then(i.bind(i,5144))).WebNotificationPopup,"boolean"!=typeof e.data.settings.ads||e.data.settings.ads||O.removeAllAds(),"/"!==window.location.pathname){let e=await (0,h.$f)("GET","https://api.vuukle.com/api/v1/Articles/GetIabTopic",{host:this.articleConfig.host,articleId:this.articleConfig.articleId},"text/plain");e.data?.article?.iabTopic&&(window._vuukleIabtopic=e.data.article.iabTopic)}}catch(e){n.Z.determineCookieUsability(null,null),e.message&&console.error("[Platform.js] Error",e.message)}}confirmCookieNotice(){this.shareMessageWithWidgets(["comments","quiz"],{cookieNoticeConfirmed:!0})}changeCommentsBubblePosition(e){this.commentsIframe&&this.commentsIframe.changeBubblePosition(e),this.iframelessComments&&this.iframelessComments.changeBubblePosition(e)}changeCommentsBubblePersistence(e){this.commentsIframe&&this.commentsIframe.makeBubblePersistent(e),this.iframelessComments&&this.iframelessComments.makeBubblePersistent(e)}async requestInitialData(){if(!this.commentsIframe&&!this.iframelessComments&&!this.emotesIframe&&!this.quizWidget&&0===this.powerbars.length&&0===this.audioWidgets.length&&0===this.subscribeWidgets.length&&!document.querySelector(a.Z.selectors.newsfeed.concat(this.index))){n.Z.isArticleBrandSafe=null,this.requestPublicConfig();return}try{let e=await this.getDataFromVuukleServers();if(!e.success)throw Error(e.errors[0]);if(e.data.geo&&n.Z.determineCookieUsability(e.data.geo.countryCode||null,e.data.geo.region||null),"boolean"!=typeof e.data.settings.ads||e.data.settings.ads||O.removeAllAds(),this.shareMessageWithWidgets(["comments","emotes","powerbar","subscribe","audio","quiz","modal"],{loadVuukle:e.data}),this.commentsListener?.setLoadVuukleData(e.data),window.getLoadVuukleSettings=()=>e.data.settings,e.data.settings.theme.color&&(this.commentsListener?.setThemeColor(e.data.settings.theme.color),this.iframelessCommentsListener?.setThemeColor(e.data.settings.theme.color),this.quizListener?.setThemeColor(e.data.settings.theme.color),this.powerbarListeners?.forEach(t=>t.setThemeColor(e.data.settings.theme.color))),e.data.article.iabTopic&&(window._vuukleIabtopic=e.data.article.iabTopic),void 0!==e.data.article.isArticleBrandSafe){n.Z.isArticleBrandSafe=e.data.article.isArticleBrandSafe,window._vuukleArticleBrandSafe=null===e.data.article.isArticleBrandSafe?"null":e.data.article.isArticleBrandSafe.toString();let t=(0,A.zd)()&&!(0,A.n0)()&&window.top?window.top:window;t.googletag=t.googletag||{},t.googletag.cmd=t.googletag.cmd||[],t.googletag.cmd.push(()=>{t.googletag.pubads().setTargeting("isArticleBrandSafe",null===e.data.article.isArticleBrandSafe?"null":e.data.article.isArticleBrandSafe.toString())})}if(e.data.settings.enabledFeatures){let t=e.data.settings.enabledFeatures;t.includes("CommentsWidget")||(this.commentsIframe?.iframe.remove(),this.iframelessComments?.hostDiv.remove()),t.includes("EmotesWidget")||this.emotesIframe?.iframe.remove(),t.includes("ShareBar")||this.powerbars.forEach(e=>e.iframe.remove())}let t=async t=>{e.data.settings.article.showCommentCount&&t.createScrollListenerForCommentBubble("number"==typeof e.data.article?.commentCount?e.data.article?.commentCount:0,0===e.data.settings.comments.commentBubbleLoadType,e.data.settings.comments.loadCommentBubbleAfter,e.data.settings.comments.loadCommentBubbleAt),e.data.settings.comments.hideCommentWidget&&!l.xw[this.articleConfig.apiKey]?.compact&&t.changeMinHeight(80)};e.data.settings.article.showNewsletterPopUp&&!$.popupCreated&&(new(await i.e("605").then(i.bind(i,9408))).default(e.data.settings.quiz.quizLogo),$.popupCreated=!0),$.fillVuukleCountElement(this.index,e.data.article?.commentCount||0),this.commentsIframe&&t(this.commentsIframe),this.iframelessComments&&t(this.iframelessComments),e.data.quiz&&this.quizListener&&(e.data.article.quizDisabled||this.quizListener.postMessage({quiz:e.data.quiz}),this.quizListener.postMessage({questionsAnsweredByUser:(0,g._2)("vuukle_quiz_answers")}),this.quizListener.postMessage({frequencyCaps:(0,g._2)("vuukle_quiz_frequency_cap")}),e.data.quiz.length>0&&e.data.article.quizDisabled&&this.quizListener.postMessage({fallbackQuiz:e.data.quiz}),0===e.data.quiz.length&&this.quizListener.postMessage({noQuiz:!0})),!e.data.quiz&&e.data.article.quizDisabled&&this.quizListener&&this.quizListener.postMessage({noQuiz:!0}),e.data.loginTypes.includes("anonymous")&&(r.Z.setAnonymousCommenting(!0),r.Z.setRegularCommenting(!1),r.Z.setGuestCommenting(!1),this.tellCWToPostAnonToken()),e.data.settings.comments.browserNotificationEnabled&&!s.Z.get("vuukle_notification_subscription")&&!s.Z.get("vuukle_notification_subscription_dismissed")&&window.ServiceWorker&&new(await i.e("108").then(i.bind(i,5144))).WebNotificationPopup}catch(e){n.Z.isArticleBrandSafe=null,n.Z.determineCookieUsability(null,null),this.commentsListener?this.commentsListener.postMessage({fetchFailLabel:!0}):this.iframelessCommentsListener?this.iframelessCommentsListener.postMessage({fetchFailLabel:!0}):this.powerbarListeners&&this.powerbarListeners.forEach(e=>{e.postMessage({fetchFailLabel:!0})}),this.powerbarListeners.forEach(e=>{e.postMessage({fetchFail:!0})}),this.quizListener&&this.quizListener.postMessage({noQuiz:!0}),"incorrect_apiKey"===e.message&&console.error("[Platform.js] ApiKey is not correct!")}}changeCookieSettingsForWidgets(e){this.shareMessageWithWidgets(["comments","emotes","powerbar","modal","quiz"],{canUseCookies:e}),n.Z.canUseCookies=e}enableHeatMapAnalysis(){this.quizListener?.enableHeatMapAnalysis()}enableRecommendedQuizzes(){this.shareMessageWithWidgets(["quiz"],{enableRecommendedQuizzes:!0})}disableQuizLogin(){this.shareMessageWithWidgets(["quiz"],{disableLogin:!0})}makeQuizQuestionsSponsoredOnly(){this.shareMessageWithWidgets(["quiz"],{sponsoredOnly:!0})}changeQuizSponsoredQuestionPosition(e){this.shareMessageWithWidgets(["quiz"],{sponsoredQuizPosition:e})}showAnswerCorrectnessOnLogin(e){this.shareMessageWithWidgets(["quiz"],{showRightOrWrongOnLogin:e})}hideTakeAnotherQuiz(e){this.shareMessageWithWidgets(["quiz"],{hideTakeAnotherQuiz:e})}applyQuizConfig(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0;e.insertQuizAndAd?.quizOptions?.postQuizInsertionCallback&&t&&e.insertQuizAndAd.quizOptions.postQuizInsertionCallback(i);let s=!!e.targets,a=e.targets&&Object.keys(e.targets).some(e=>e.includes("vuukle-ad"));if(this.widgetsCreator?.communicationCreator.isQuizOnThePage()&&!e.insertQuizAndAd&&s&&a){let e=document.createElement("style");e.innerHTML=`
          div[id*="vuukle-quiz"] + div[id*="vuukle-ad"] {
            min-height: 250px;
            min-width: 300px;
          }
        `,document.head.appendChild(e)}e.quizzlySponsoredSurveyPosition&&this.changeQuizSponsoredQuestionPosition(e.quizzlySponsoredSurveyPosition),e.showSponsoredQuestionsOnly&&this.makeQuizQuestionsSponsoredOnly(),(e.insertQuizAndAd?.quizOptions?.quizMaxHeight||e.quizMaxHeight)&&this.tellQuizToChangeMaxHeight(e.insertQuizAndAd?.quizOptions?.quizMaxHeight||e.quizMaxHeight||265),(e.insertQuizAndAd?.quizOptions?.quizMaxWidth||e.quizMaxWidth)&&this.tellQuizToChangeMaxWidth(e.insertQuizAndAd?.quizOptions?.quizMaxWidth||e.quizMaxWidth||300),e.disableQuizLogin&&this.disableQuizLogin(),e.compactQuizzly&&!n.Z.isMobileUser&&this.enableQuizCompactMode(),e.compactQuizzlyMobile&&n.Z.isMobileUser&&this.enableQuizCompactMode(),e.compact300x250Quizzly&&(e.compact300x250Quizzly.desktop&&!n.Z.isMobileUser||e.compact300x250Quizzly.mobile&&n.Z.isMobileUser)&&this.enable300x250QuizCompactMode(),e.moveQuizzly&&this.widgetsCreator?.moveQuizWidget(e.moveQuizzly),e.trackTimeSpentOnQuiz&&this.trackTimeSpentOnQuiz(),e.trackQuizView&&this.trackQuizView(),e.customFont&&"string"==typeof e.customFont.fontFamily&&("string"==typeof e.customFont.url||"string"==typeof e.customFont.externalFontStylesheetLink)&&scheduler.postTask(()=>{this.passCustomFontToWidgets(e.customFont)}),e.enableHeatMap&&this.enableHeatMapAnalysis(),e.enableRecommendedQuizzes&&this.enableRecommendedQuizzes(),e.showQuizAnswerRightOrWrongOnLogin&&this.showAnswerCorrectnessOnLogin(e.showQuizAnswerRightOrWrongOnLogin),e.hideTakeAnotherQuiz&&this.hideTakeAnotherQuiz(e.hideTakeAnotherQuiz)}trackQuizView(){this.quizWidget.fireQuizViewEvent()}sendAdToEmotes(e,t,i,s){this.shareMessageWithWidgets(["emotes"],{emotesAd:{emotesSlot:e,imageUrl:t,clickUrl:i,label:s}})}initializeModal;static fillVuukleCountElement(e,t){document.querySelectorAll(e?`[data=vuukle-count${e}]`:"[data=vuukle-count]").forEach(e=>{e.innerHTML=t<=0&&e.dataset.emptyText?e.dataset.emptyText:String(t)})}static attachResizeListener(){window.addEventListener("message",t=>{let i;try{i=JSON.parse(t.data)}catch(e){i=t.data}if("resize"===i.type&&i.sourceWindowName){(0,e.qu)("log","Resize message received",t);let s=document.querySelector(`iframe[name="${i.sourceWindowName}"]`);s instanceof HTMLIFrameElement&&(s.style.height=`${i.data.height}px`)}})}static removeWidgetsFromThemingObject(e){delete $.widgetsOnPageWithThemeSupport[e]}}$.attachResizeListener(),window.changeVuukleWidgetsTheme=e=>{("dark"===e||"light"===e)&&Object.keys($.widgetsOnPageWithThemeSupport).forEach(t=>{$.widgetsOnPageWithThemeSupport[t].commentsListener?.changeTheme(e),$.widgetsOnPageWithThemeSupport[t].iframelessCommentsListener?.changeTheme(e),$.widgetsOnPageWithThemeSupport[t].emotesListener?.changeTheme(e),$.widgetsOnPageWithThemeSupport[t].powerbarListeners?.forEach(t=>t.changeTheme(e)),$.widgetsOnPageWithThemeSupport[t].modalListener?.changeTheme(e),$.widgetsOnPageWithThemeSupport[t].quizListener?.changeTheme(e)})},window.sendResponseGroupsToQuizzly=()=>{$.responseGroups=(0,g._2)("quizzly_surveys_response_groups"),$.sendResponseGroupsToQuizWidgets()};let R=$,K=class{hostDiv;id;scriptUrl;params;lazyLoad;intersectionObserverOptions;widgetLoaded;widgetWasViewed;onLoadCallbacks;attachmentDiv;constructor(e,t,i,s={},a=!0,o={}){if(this.hostDiv=e,this.id=t,this.scriptUrl=i,this.params=s,this.lazyLoad=a,this.intersectionObserverOptions=o,this.onLoad=e=>{if("function"==typeof e){if(this.widgetLoaded)return e(this.hostDiv);"function"==typeof e&&this.onLoadCallbacks.add(e)}},this.widgetOnLoad=()=>{this.widgetLoaded=!0,this.onLoadCallbacks.size>0&&this.onLoadCallbacks.forEach(e=>e(this.hostDiv))},!this.hostDiv)throw Error("Widget host location is required to be present on the page");if(!this.id)throw Error("Widget id is required");if(!i)throw Error("Widget url is required");this.widgetLoaded=!1,this.widgetWasViewed=!1,this.onLoadCallbacks=new Set,this.onLoad(e=>e.dispatchEvent(new MessageEvent("message",{data:{configuration:s}})));let n=document.createElement("div");n.id=`${e.id}-${this.id}`,this.attachmentDiv=n,this.hostDiv.appendChild(n),this.lazyLoad||this.loadWidget()}loadWidget(){let e=document.createElement("script");e.src=this.scriptUrl,e.async=!0,e.addEventListener("load",()=>this.widgetOnLoad()),this.hostDiv.appendChild(e)}get isInView(){return!!((0,A.w1)(this.hostDiv)||(0,A.v4)(this.hostDiv))&&(this.widgetWasViewed=!0,!0)}onLoad;widgetOnLoad},N=class extends K{hostDiv;config;articleIndex;constructor(e,t,i,s=""){if(super(t,e,a.Z.iframelessWidgetUrls.comments,{amp:i.amp,sdk:i.sdk,apiKey:i.apiKey,host:i.host,widgetId:e,articleId:i.articleId,author:i.author||void 0,globalLang:i.language,img:i.img,lang:i.comments&&i.comments.transliteration.language,tags:i.tags,title:i.title,url:i.url,referrer:i.refHost,font:i.theme&&i.theme.font,emotesEnabled:i.emotes&&i.emotes.enabled||!0,refHost:i.refHost,l_d:i.comments&&i.comments.transliteration.enabledByDefault,totWideImg:i.recommendationsWideImages,link:i.link,gr:i.globalRecommendations,hideCommentBoxWithButton:i.comments&&i.comments.hideCommentInputBoxWithButton,wpSync:i.wordpressSync,disableButtons:i.comments&&i.comments.disableButtons,isInIframe:!1,hasAnonFallback:!!r.Z.getAnonToken(),isCustomText:!!i.customTranslationUrl,version:a.Z.versions.comments,debug:"true"===new URLSearchParams(window.location.search).get("vdebug")},!1),this.hostDiv=t,this.config=i,this.articleIndex=s,this.bubbleOperationCallbacks=new Set,this.persistBubble=!1,this.realtimeBar=null,this.commentCount=0,this.createRealtimeBar=()=>{document.querySelector("#vuukle-comments-realtime-bar".concat(this.articleIndex))||(this.realtimeBar=document.createElement("div"),this.realtimeBar.style.cssText=`
        // position: fixed;
        // top: 0;
        // left: 0;
        width: 100%;
        height: 25px;
        background: #3997e9;
        color: #fff;
        cursor: pointer;
        font-size: 15px;
        font-family: -apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',sans-serif;
        font-weight: 500;
        text-align: center;
        // z-index: 9999;
        display: none;
      `,this.realtimeBar.id="vuukle-comments-realtime-bar".concat(this.articleIndex),this.realtimeBar.textContent="",this.realtimeBar.onclick=()=>{this.hostDiv.scrollIntoView(),this.realtimeBar&&(this.realtimeBar.style.display="none",this.realtimeBar.textContent="",R.commentCountLock=!1),this.onLoad(e=>e.dispatchEvent(new MessageEvent("message",{data:{loadNewRealtime:!0}})))},document.body.insertAdjacentElement("afterbegin",this.realtimeBar))},this.serverScrollLogger=e=>{if(e)return o.Z.log("view_comments",this.config),this.onLoad(e=>e.dispatchEvent(new MessageEvent("message",{data:{isViewed:!0}}))),()=>!1;let t=!1;return(0,f.Z)(e=>{e&&!t&&(o.Z.log("view_comments",this.config),this.onLoad(e=>e.dispatchEvent(new MessageEvent("message",{data:{isViewed:!0}}))),t=!0)},300)},this.intersectionObserverOptions={threshold:0,rootMargin:"400px 400px 400px 400px"},this.articleIndex=s,this.attachmentDiv.style.order="1",this.attachmentDiv.style.minHeight=l.xw[i.apiKey]?.compact?"50px":"320px",this.onLoad(e=>e.dispatchEvent(new MessageEvent("message",{data:{renderAtSelector:`#${t.id}-${this.id}`}}))),this.onLoad(e=>e.dispatchEvent(new MessageEvent("message",{data:{cardStyles:i.theme&&i.theme.cardStyles}}))),this.onLoad(e=>e.dispatchEvent(new MessageEvent("message",{data:{listenButtonStyles:i.theme&&i.theme.listenButtonStyles}}))),window.location.hash&&window.location.hash.match(/commentID/)){let e=window.location.hash.split("-")[1];this.onLoad(t=>{if(t.dispatchEvent(new MessageEvent("message",{data:{loadComment:e}})),"interactive"===document.readyState||"complete"==document.readyState)setTimeout(()=>{let e=this.hostDiv.getBoundingClientRect();window.scrollTo(e.x,e.y)},1500);else{let e=this.hostDiv;document.addEventListener("readystatechange",function t(){("interactive"===document.readyState||"complete"===document.readyState)&&setTimeout(()=>{let i=e.getBoundingClientRect();window.scrollTo(i.x,i.y),document.removeEventListener("readystatechange",t)},1500)})}}),this.loadWidget()}let n=this.serverScrollLogger(i.amp||!1);"undefined"!=typeof IntersectionObserver?new IntersectionObserver(e=>{e.forEach(e=>{let{boundingClientRect:t,intersectionRatio:i,isIntersecting:s}=e,a=i>.025||s;scheduler.postTask(()=>{n(a)},{priority:"background"}),a&&this.realtimeBar&&t.top>=-300&&(this.realtimeBar.style.display="none")})},{threshold:.1}).observe(this.hostDiv):window.addEventListener("scroll",()=>{scheduler.postTask(()=>{n(this.isInView)},{priority:"background"}),this.isInView&&this.realtimeBar&&this.hostDiv.getBoundingClientRect().top>=-300&&(this.realtimeBar.style.display="none")},!1)}bubbleOperationCallbacks;persistBubble;changeMinHeight(e){this.hostDiv.style.minHeight=`${e}px`}createScrollListenerForCommentBubble(e,t,i,s){let a=this.createCommentBubble(e);if(a){let e=0,r=s/100,{bubble:d,bubbleMenu:c,backButton:u,backMenu:h,containerButton:g}=a,m=this.bubbleOperationCallbacks;g.addEventListener("click",t=>{t.preventDefault(),e=document.documentElement.scrollTop,scheduler.postTask(()=>{o.Z.log("CWbubbleClick",this.config)},{priority:"background"}),this.hostDiv.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),h.style.display="flex",c.style.display="none",d.style.display="none"}),u.addEventListener("click",()=>{document.documentElement.scrollTop=e,h.style.display="none",c.style.display="none",d.style.display="flex"});let f=this,p=!1,b=!1;function n(){let e=window.scrollY,i=document.documentElement.scrollHeight,s=document.documentElement.clientHeight;b&&(f.isInView?(h.style.display="flex",c.style.display="none",d.style.display="none"):(h.style.display="none",d.style.display="flex")),!(e/(i-s)>=r)||t||p||(b=!0,d.style.display="flex",p=!0,m.forEach(e=>e()),setTimeout(()=>{f.persistBubble||(window.removeEventListener("scroll",n),d?.remove(),c?.remove(),h?.remove())},1e4))}l.ww.includes(this.config.apiKey)||window.addEventListener("scroll",n),t&&setTimeout(()=>{b=!0,d.style.display="flex",m.forEach(e=>e()),setTimeout(()=>{this.persistBubble||(window.removeEventListener("scroll",n),d?.remove(),c?.remove(),h?.remove())},1e4)},1e3*i)}}createCommentBubble(e){if(document.querySelector(`#vuukle-comments-bubble-${this.id}`))return;let t=document.createElement("div"),i=document.createElement("span"),s=document.createElement("button"),a=document.createElement("button"),o=document.createElement("span"),r=document.createElement("div"),l=document.createElement("button"),d=document.createElement("div"),c=document.createElement("button");t.className="vuukle-comments-bubble",t.style.cssText=`
      position: fixed;
      display: none;
      align-items: center;
      justify-content: center;
      left: 50%;
      transform: translate(-50%, 0);
      bottom: 100px;
      width: 128px;
      height: 40px;
      background: #fff;
      color: #000;
      border: 1px solid #c1c1c1;
      border-radius: 6px;
      box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.15);
      text-align: center;
      transition: all 0.5s;
      text-decoration: none;
      z-index: 100000;
    `,r.className="vuukle-comments-bubble-menu",r.style.cssText=`
      position: fixed;
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      left: 50%;
      transform: translate(-50%, 0);
      bottom: 160px;
      width: 128px;
      height: 40px;
      background: #fff;
      color: #000;
      border: 1px solid #c1c1c1;
      border-radius: 6px;
      box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.15);
      text-align: center;
      transition: all 0.5s;
      text-decoration: none;
      z-index: 100000;
  `,d.className="vuukle-comments-bubble-back-button-container",d.style.cssText=`
      position: fixed;
      display: none;
      align-items: center;
      justify-content: center;
      left: 50%;
      transform: translate(-50%, 0);
      bottom: 100px;
      width: 128px;
      height: 40px;
      background: #fff;
      color: #000;
      border: 1px solid #c1c1c1;
      border-radius: 6px;
      box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.15);
      text-align: center;
      transition: all 0.5s;
      text-decoration: none;
      z-index: 100000;    
    `,i.style.cssText=`
      color: #000;
      line-height: 25px;
      text-align: center;
      padding: 0px 5px;
      font-size: 13px;
      font-weight: 400;
      z-index: 100000;
    `,s.className="vuukle-comments-bubble-three-dots",s.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      border-left: 1px solid #ccc;
      padding-left: 10px;
      display: ${n.Z.isMobileUser?"block":"none"};
      opacity: ${n.Z.isMobileUser?"1":"0"};
      animation: three-dots-fade-in 0.5s;
    `,a.className="vuukle-comments-bubble-container-button",a.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    `,l.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
      justify-content: center;
    `,c.style.cssText=`
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      width: 100%;
      justify-content: center;
    `,c.innerHTML=`
      <span>Back</span>
      <svg fill="#000000" width="14px" height="14px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><line x1="12" y1="21" x2="12" y2="3" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></line><polyline points="15 6 12 3 9 6" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline></svg>
    `,l.innerHTML=`
      <svg width="24px" height="24px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z" fill="#000000"/><path d="M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z" fill="#000"/></svg>
      <span>Hide</span>
    `,s.innerHTML=`
      <svg height="20px" width="20px" fill="#ccc" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16">
        <path d="M8,6.5A1.5,1.5,0,1,1,6.5,8,1.5,1.5,0,0,1,8,6.5ZM.5,8A1.5,1.5,0,1,0,2,6.5,1.5,1.5,0,0,0,.5,8Zm12,0A1.5,1.5,0,1,0,14,6.5,1.5,1.5,0,0,0,12.5,8Z"/>
      </svg>
    `,o.innerHTML=`
      <svg fill="#000" width="14px" height="14px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <line x1="12" y1="3" x2="12" y2="21" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></line>
        <polyline points="9 18 12 21 15 18" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></polyline>
      </svg>
    `,a.insertAdjacentHTML("afterbegin",'<svg style="cursor: pointer; width: 24px; height: 24px; fill: #4885ED; vertical-align: middle; display: block;" viewbox="0 0 24 24"><path d="M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z"></path></svg>'),t.id=`vuukle-comments-bubble-${this.id}`;let u=document.createElement("style");return u.id=`vuukle-comments-bubble-styles-${this.id}`,u.innerHTML=`
      .vuukle-comments-bubble:hover .vuukle-comments-bubble-three-dots {
        display: flex !important;
        opacity: 1 !important;
      }

      @keyframes three-dots-fade-in {
        0% { opacity: 0; }
        100% { opacity: 1; }
      }
    `,l.addEventListener("click",()=>{t.remove(),u.remove(),r.remove(),d.remove()}),s.addEventListener("click",e=>{e.preventDefault(),"none"===r.style.display?r.style.display="flex":r.style.display="none"}),i.innerHTML=0===e?"":e.toString(),a.appendChild(i),a.appendChild(o),t.appendChild(a),t.appendChild(s),r.appendChild(l),d.appendChild(c),document.body.appendChild(t),document.body.appendChild(u),document.body.appendChild(r),document.body.appendChild(d),{bubble:t,bubbleMenu:r,containerButton:a,backMenu:d,backButton:c}}changeBubblePosition(e){this.bubbleOperationCallbacks.add(()=>{let t=document.getElementById(`vuukle-comments-bubble-${this.id}`);t&&("left"===e?(t.style.removeProperty("right"),t.style.left="20px"):(t.style.removeProperty("left"),t.style.right="20px"))})}makeBubblePersistent(e){this.persistBubble=e}realtimeBar;commentCount;get isCommentInputBoxInView(){let e=this.hostDiv.getBoundingClientRect();if(!R.commentInputBoxRect)return e.bottom>0&&e.right>0&&e.left<window.innerWidth&&e.top<window.innerHeight;{let t=R.commentInputBoxRect,i=new DOMRect(e.left+t.left,e.top+t.top,t.width,t.height);return i.bottom>0&&i.right>0&&i.left<window.innerWidth&&i.bottom<window.innerHeight}}createRealtimeBar;serverScrollLogger};class Q extends p.Z{config;constructor(e,t){super(e,"Vuukle Emotes Widget",a.Z.urls.emotes,{amp:t.amp,apiKey:t.apiKey,host:t.host,articleId:t.articleId,img:t.img,author:t.author||void 0,tags:t.tags,title:t.title,url:t.url,totWideImg:t.recommendationsWideImages,gr:t.globalRecommendations,link:t.link,hideAllLabels:t.emotes&&t.emotes.hideAllLabels,disable:t.emotes&&JSON.stringify(t.emotes.disable),font:t.theme&&t.theme.font,commentsEnabled:t.comments&&t.comments.enabled&&!!document.querySelector(`div[id*=${a.Z.selectors.comments.substring(1)}]`),isCustomText:!!t.customTranslationUrl,useKV:!1,version:a.Z.versions.emotes,language:t.language||"en",isAndroidSDK:t.sdk&&n.Z.os.includes("Android")},!1,!1),this.config=t,this.iframe.style.minHeight="145px",this.iframe.style.display="flex",this.iframe.style.margin="auto",this.intersectionObserverOptions={threshold:0,rootMargin:"400px 400px 400px 400px"},this.onLoad(e=>e.postMessage({cardStyles:t.theme&&t.theme.cardStyles},"*")),this.onLoad(e=>e.postMessage({badgeStyles:t.theme&&t.theme.badgeStyles},"*"))}}class F{static initializedIDs=[];articleConfig;articleIndex;modal=new Map;comments=new Map;iframelessComments=new Map;emotes=new Map;quiz=new Map;powerbars=new Map;verticalPowerbars=new Map;subscribeWidgets=new Map;audioWidgets=new Map;communicationCreator;customText;constructor(t,s,a,o,n,r,l,d,c){this.setWidgetInstances(a,o,n,r,l,d,c),this.articleConfig=s,this.articleIndex=t,scheduler.postTask(()=>{this.initializeInsideDom()}).then(()=>{scheduler.postTask(async()=>{let e=await i.e("984").then(i.bind(i,7494));this.customText=new e.default([...this.comments.values()][0],[...this.iframelessComments.values()][0],[...this.emotes.values()][0],[...this.powerbars.values(),...this.verticalPowerbars.values()],[...this.quiz.values()][0],this.articleConfig)})}),scheduler.postTask(()=>{""===t&&(F.addNewsfeedToDOM(t),F.addTrafficExchangeToDOM(t,this.articleConfig.apiKey))}),(0,e.qu)("log",`[VUUKLE] Widgets of id '${t.substring(1)}' are generated!`)}setWidgetInstances(e,t,i,s,a,o,n){e&&this.comments.set(e[0],e[1]),t&&this.iframelessComments.set(t[0],t[1]),i&&this.emotes.set(i[0],i[1]),s[0]&&s[1]&&s[0].forEach((e,t)=>{s[1]&&s[1][t]&&this.powerbars.set(e,s[1][t])}),a[0]&&a[1]&&a[0].forEach((e,t)=>{a[1]&&a[1][t]&&this.subscribeWidgets.set(e,a[1][t])}),o[0]&&o[1]&&o[0].forEach((e,t)=>{o[1]&&o[1][t]&&this.audioWidgets.set(e,o[1][t])}),n&&this.quiz.set(n[0],n[1])}setCommunicationCreatorInstance(e){this.communicationCreator=e}static async createWidgetsCreatorInstance(t,i){if(t&&F.initializedIDs.indexOf(t)>=0)throw Error("âš  Widgets already have been created for this ID.");t&&F.initializedIDs.push(t),(0,e.IW)(e.PP.widgetsCreatorStart),(0,e.rX)(e.J8.platformStartToWidgetsStart,e.PP.platformStart,e.PP.widgetsCreatorStart);let s=await this.createCommentsWidget(t,i),a=await this.createIframelessCommentsWidget(t,i),o=this.createEmotesIframe(t,i),n=await this.createPowerbars(t,!!s?.[1]||!!a?.[1],!!o?.[1],i),r=await this.createSubscribeWidgets(t,i),l=await this.createAudioWidgets(t,i),d=await this.createQuizWidget(t,i),c=new F(t,i,s,a,o,n,r,l,d),u=await R.createCommunicationCreatorInstance(t,s?.[1],a?.[1],o?.[1],n[1]?n[1]:[],r[1]?r[1]:[],l[1]?l[1]:[],d?.[1],i,c);return c.setCommunicationCreatorInstance(u),(0,e.IW)(e.PP.widgetsCreatorEnd),(0,e.rX)(e.J8.widgetStartToEnd,e.PP.widgetsCreatorStart,e.PP.widgetsCreatorEnd),(0,e.rX)(e.J8.platformStartToWidgetsEnd,e.PP.platformStart,e.PP.widgetsCreatorEnd),c}static getLocation=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0,a=e.startsWith("#")?document.querySelector(e):document.querySelectorAll(e)[s-1];if(a||s-1==0)return a;for(let a=s-1;a>0;a--){let s=document.querySelectorAll(e)[a];if(s&&!s.parentElement?.querySelector(i?`div[class*=${t}]`:`div[id*=${t}]`))return s}return null};getElementLocation=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,i=t.document.querySelectorAll(e)[O.articleCounter-1];if(i||O.articleCounter-1==0)return i;for(let i=O.articleCounter-1;i>0;i--)return t.document.querySelectorAll(e)[i];return null};static insertWidget=async function(e,t,i){let s,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;if("string"==typeof t)s=n.endlessMode?F.getLocation(t,i,a,o):await (0,A.br)(t,200,25);else if("function"==typeof t)s=t(r);else for(let e of t){let t=n.endlessMode?F.getLocation(e,i,a,o):await (0,A.br)(e,200,25);if(t){s=t;break}}if(!s)return null;{if(a&&s.querySelector(`.${i}`)||!a&&s.querySelector(`#${i}`))return null;let t=document.createElement("div");switch(a?t.className=i:t.id=i,e){case"after":s.insertAdjacentElement("afterend",t);break;case"before":s.insertAdjacentElement("beforebegin",t);break;case"prependInside":s.insertAdjacentElement("afterbegin",t);break;default:s.appendChild(t)}return t}};static async createWidgets(e,t,s,o,r){e?.preInsertionOperation&&e.preInsertionOperation();let l=0,d=r.comments.size>0?[[...r.comments.keys()][0],[...r.comments.values()][0]]:void 0,c=r.iframelessComments.size>0?[[...r.iframelessComments.keys()][0],[...r.iframelessComments.values()][0]]:void 0,u=r.emotes.size>0?[[...r.emotes.keys()][0],[...r.emotes.values()][0]]:void 0,h=r.powerbars.size>0?[[...r.powerbars.keys()],[...r.powerbars.values()]]:[],g=r.subscribeWidgets.size>0?[[...r.subscribeWidgets.keys()],[...r.subscribeWidgets.values()]]:[],m=r.audioWidgets.size>0?[[...r.audioWidgets.keys()],[...r.audioWidgets.values()]]:[],f=r.quiz.size>0?[[...r.quiz.keys()][0],[...r.quiz.values()][0]]:void 0;if(e?.comments&&s.comments.useIframe&&await this.insertWidget(e.comments.insert,n.Z.isMobileUser&&e.comments.mobileSelector?e.comments.mobileSelector:e.comments.selector,a.Z.selectors.comments.slice(1).concat(o),!1,t,s,o)&&(d=await this.createCommentsWidget(o,s),l++),e?.comments&&!s.comments.useIframe&&await this.insertWidget(e.comments.insert,n.Z.isMobileUser&&e.comments.mobileSelector?e.comments.mobileSelector:e.comments.selector,a.Z.selectors.comments.slice(1).concat(o),!1,t,s,o)&&(c=await this.createIframelessCommentsWidget(o,s),l++),e?.emotes&&await this.insertWidget(e.emotes.insert,n.Z.isMobileUser&&e.emotes.mobileSelector?e.emotes.mobileSelector:e.emotes.selector,a.Z.selectors.emotes.slice(1).concat(o),!1,t,s,o)&&(u=this.createEmotesIframe(o,s),l++),e?.sharebar&&e?.sharebar.forEach(async e=>{await this.insertWidget(e.insert,n.Z.isMobileUser&&e.mobileSelector?e.mobileSelector:e.selector,e.isVertical?a.Z.selectors.verticalSharebar.slice(1).concat(o):a.Z.selectors.sharebar.slice(1).concat(o),!0,t,s,o)&&(h=await this.createPowerbars(o,!!d?.[1]||!!c?.[1],!!u?.[1],s),l++)}),e?.audio&&e.audio.forEach(async e=>{await this.insertWidget(e.insert,n.Z.isMobileUser&&e.mobileSelector?e.mobileSelector:e.selector,a.Z.selectors.audio.slice(1).concat(o),!0,t,s,o)&&(m=await this.createAudioWidgets(o,s),l++)}),e?.subscribe&&e.subscribe.forEach(async e=>{await this.insertWidget(e.insert,n.Z.isMobileUser&&e.mobileSelector?e.mobileSelector:e.selector,a.Z.selectors.subscribe.slice(1).concat(o),!0,t,s,o)&&(g=await this.createSubscribeWidgets(o,s),l++)}),e?.newsfeed&&await this.insertWidget(e.newsfeed.insert,n.Z.isMobileUser&&e.newsfeed.mobileSelector?e.newsfeed.mobileSelector:e.newsfeed.selector,a.Z.selectors.newsfeed.slice(1).concat(o),!1,t,s,o)&&(F.addNewsfeedToDOM(o),l++),e?.quiz&&await this.insertWidget(e.quiz.insert,n.Z.isMobileUser&&e.quiz.mobileSelector?e.quiz.mobileSelector:e.quiz.selector,a.Z.selectors.quiz.slice(1).concat(o),!1,t,s,o)&&(f=await this.createQuizWidget(o,s),l++),l>0){r.setWidgetInstances(d,c,u,h,g,m,f),r.initializeInsideDom();let e=async()=>{r.communicationCreator.removeMessageListeners(),r.setCommunicationCreatorInstance(await R.createCommunicationCreatorInstance(o,d?.[1],c?.[1],u?.[1],h[1]?h[1]:[],g[1]?g[1]:[],m[1]?m[1]:[],f?.[1],s,r)),r.customText=new(await i.e("984").then(i.bind(i,7494))).default(d?.[1],c?.[1],u?.[1],h[1]?h[1]:[],f?.[1],s)};if(r.communicationCreator)await e();else{let t=setInterval(async()=>{r.communicationCreator&&(clearInterval(t),await e())},100)}}e?.postInsertionOperation&&e.postInsertionOperation()}moveQuizWidget(e){let t,{selector:i,mobileSelector:s,insert:a}=e,o=n.Z.isMobileUser&&s?s:i;if("string"==typeof o)t=this.articleConfig.endlessMode?this.getElementLocation(o):document.querySelector(o);else if("function"==typeof o)t=o(this.articleIndex);else for(let e of o){let i=this.articleConfig.endlessMode?this.getElementLocation(e):document.querySelector(e);if(i){t=i;break}}if(t){let[e]=this.quiz,[i]=e;switch(a){case"after":t.insertAdjacentElement("afterend",i);break;case"before":t.insertAdjacentElement("beforebegin",i);break;case"prependInside":t.insertAdjacentElement("afterbegin",i);break;default:t.appendChild(i)}}}static createEmotesIframe(e,t){if(t.emotes&&t.emotes.enabled){let i=document.querySelector(a.Z.selectors.emotes.concat(String(e)||""));if(i instanceof HTMLDivElement)return i.style.cssText+="margin: auto",[i,new Q("emotes-iframe".concat(e),t)]}}static async createQuizWidget(e,t){if(t.quiz&&t.quiz.enabled){let i=document.querySelector(a.Z.selectors.quiz.concat(String(e)||""))||document.querySelector(a.Z.selectors.quizAlt.concat(String(e)||""));if(i)return[i,new B("quiz-iframe".concat(e),t)]}}static async createSubscribeWidgets(e,t){if(t.subscribe&&t.subscribe.enabled){let s=document.querySelectorAll(a.Z.selectors.subscribe.concat(String(e)||"")),o=[],n=[];for(let a=0;a<s.length;a++){let r=await i.e("411").then(i.bind(i,2206));o.push(s[a]),n.push(new r.default("subscribe-widget".concat(e).concat(`-${a}`),t))}return[o,n]}return[]}static async createAudioWidgets(e,t){if(t.audio&&t.audio.enabled){let s=document.querySelectorAll(a.Z.selectors.audio.concat(String(e)||"")),o=[],n=[];for(let a=0;a<s.length;a++){let r=await i.e("298").then(i.bind(i,7325));o.push(s[a]),n.push(new r.default("audio-widget".concat(e).concat(`-${a}`),t))}return[o,n]}return[]}static async createPowerbars(e,t,s,o){if(o.powerbar&&!1===o.powerbar.enabled||o.sharebar&&!1===o.sharebar.enabled)return[];let r=Array.prototype.slice.call(document.querySelectorAll(a.Z.selectors.powerbar.concat(String(e)))),l=Array.prototype.slice.call(document.querySelectorAll(a.Z.selectors.sharebar.concat(String(e)))),d=Array.prototype.slice.call(document.querySelectorAll(a.Z.selectors.verticalPowerbar.concat(String(e)))),c=Array.prototype.slice.call(document.querySelectorAll(a.Z.selectors.verticalSharebar.concat(String(e)))),u=[],h=[];for(let a=0;a<r.length;a++){let n=await i.e("92").then(i.bind(i,1985));u.push(r[a]),h.push(new n.default("h-sharebar".concat(e).concat(`-${a}`),o,"horizontal",t,s))}for(let a=0;a<l.length;a++){let n=await i.e("92").then(i.bind(i,1985));u.push(l[a]),h.push(new n.default("h-sharebar".concat(e).concat(`-${a}`),o,"horizontal",t,s))}for(let a=0;a<d.length;a++){d[a].style.zIndex="99999",d[a].style.width="60px",d[a].style.maxWidth="60px",d[a].style.position=d[a].style.position||"fixed",d[a].style.top=d[a].style.top||"10px",n.Z.isMobileUser&&(d[a].style.right="0",d[a].style.left="unset");let r=await i.e("92").then(i.bind(i,1985));u.push(d[a]),h.push(new r.default("v-sharebar".concat(e).concat(`-${a}`),o,"vertical",t,s))}for(let a=0;a<c.length;a++){c[a].style.zIndex="99999",c[a].style.width="60px",c[a].style.maxWidth="60px",c[a].style.position=c[a].style.position||"fixed",c[a].style.top=c[a].style.top||"10px",n.Z.isMobileUser&&(c[a].style.right="0",c[a].style.left="unset");let r=await i.e("92").then(i.bind(i,1985));u.push(c[a]),h.push(new r.default("v-sharebar".concat(e).concat(`-${a}`),o,"vertical",t,s))}return[u,h]}static async createIframelessCommentsWidget(e,t){if(t.comments.useIframe||t.comments&&!1===t.comments.enabled)return;let i=document.querySelector(a.Z.selectors.comments.concat(e));if(i instanceof HTMLDivElement)return i.style.cssText+="display: flex;flex-direction: column;width: 100%;align-items: stretch;overflow-anchor: auto;",i.parentElement&&(i.parentElement.style.cssText+="overflow-anchor: auto"),[i,new N("v-comments-iframeless".concat(e),i,t,e)]}static async createCommentsWidget(e,t){if(!t.comments.useIframe||t.comments&&!1===t.comments.enabled)return;let i=document.querySelector(a.Z.selectors.comments.concat(e));if(i instanceof HTMLDivElement)return i.style.cssText+="display: flex;flex-direction: column;width: 100%;align-items: stretch;overflow-anchor: auto;",i.parentElement&&(i.parentElement.style.cssText+="overflow-anchor: auto"),[i,new b("v-comments".concat(e),t,e)]}async createModal(e){let t=document.querySelector("body"),s=document.createElement("div");if(t instanceof HTMLBodyElement){t.appendChild(s);let a=await i.e("610").then(i.bind(i,4822));this.modal.set(s,new a.default("vuukle-modal".concat(this.articleIndex),this.articleConfig)),await this.communicationCreator.initializeModal([...this.modal.values()][0],e),this.customText.initializeModal([...this.modal.values()][0]),this.modal.forEach((e,t)=>t.appendChild(e.iframe))}}static addNewsfeedToDOM(e){let t=document.querySelector(a.Z.selectors.newsfeed.concat(e));if(t instanceof HTMLDivElement){let e=document.createElement("div");e.id="vuukle-newsfeed-app",t.appendChild(e),(0,A.fs)(a.Z.urls.newsfeed)}}static addTrafficExchangeToDOM(e,t){let i=document.querySelector(a.Z.selectors.trafficExchange.concat(e));if(i instanceof HTMLDivElement){let e=document.createElement("div");e.id="vuukle-traffic-exchange-app",l.xw[t]&&l.xw[t].trafficExchangeRows&&(e.dataset.rows=l.xw[t].trafficExchangeRows),i.appendChild(e),(0,A.fs)(a.Z.urls.trafficExchange)}}attachIObserver=(e,t)=>{let i=new IntersectionObserver(t=>{t.forEach(t=>{let{intersectionRatio:s,isIntersecting:a}=t;(s>.025||a)&&("loadIframe"in e&&e.loadIframe(),"loadWidget"in e&&!e.widgetLoaded&&e.loadWidget(),i.disconnect())})},{threshold:.02,...e.intersectionObserverOptions});i.observe(t)};initializeInsideDom(){this.comments.forEach((e,t)=>{t.querySelector('iframe[id*="v-comments"]')||t.appendChild(e.iframe)}),this.emotes.forEach((e,t)=>{t.querySelector('iframe[id*="emotes-iframe"]')||t.appendChild(e.iframe)}),this.quiz.forEach((e,t)=>{t.querySelector('iframe[id*="quiz-iframe"]')||t.appendChild(e.iframe)}),this.powerbars.forEach((e,t)=>{t.querySelector('iframe[id*="h-sharebar"]')||(this.attachIObserver(e,t),t.appendChild(e.iframe))}),this.verticalPowerbars.forEach((e,t)=>{t.querySelector('iframe[id*="v-sharebar"]')||(this.attachIObserver(e,t),t.appendChild(e.iframe))}),this.subscribeWidgets.forEach((e,t)=>{t.querySelector('iframe[id*="subscribe-widget"]')||(this.attachIObserver(e,t),t.appendChild(e.iframe))}),this.audioWidgets.forEach((e,t)=>{t.querySelector('iframe[id*="audio-widget"]')||(this.attachIObserver(e,t),t.appendChild(e.iframe))})}static removeWidgets(t){let i=this.initializedIDs.indexOf(t);if(-1===i)return void(0,e.qu)("log",`[VUUKLE] Widgets of id '${t.substring(1)}' aren't generated, nothing to remove`);this.initializedIDs.splice(i,1);let s=document.querySelector(`iframe[id*="v-comments${t}"]`),a=document.querySelector(`iframe[id*="vuukle-modal${t}"]`),r=document.querySelector(`iframe[id*="emotes-iframe${t}"]`),l=document.querySelectorAll(`iframe[id*="h-powerbar${t}"]`),d=document.querySelectorAll(`iframe[id*="v-powerbar${t}"]`),c=document.querySelectorAll(`iframe[id*="h-sharebar${t}"]`),u=document.querySelectorAll(`iframe[id*="v-sharebar${t}"]`),h=document.querySelectorAll(`iframe[id*="subscribe-widget${t}"]`),g=document.querySelectorAll(`iframe[id*="audio-widget${t}"]`),m=document.querySelector(`iframe[id*="quiz-iframe${t}"]`);s&&s.remove(),a&&a.remove(),r&&r.remove(),l&&l.forEach(e=>e.remove()),d&&d.forEach(e=>e.remove()),c&&c.forEach(e=>e.remove()),u&&u.forEach(e=>e.remove()),h&&h.forEach(e=>e.remove()),g&&g.forEach(e=>e.remove()),m&&m.remove(),n.Z.removeCookieListenerByIndex(t),n.Z.removeGeoListenersByIndex(t),o.Z.removeIPListenersByIndex(t),R.removeWidgetsFromThemingObject(t),R.quizWidgetsOnThePage.delete(t),(0,e.qu)("log",`[VUUKLE] Widgets of id '${t.substring(1)}' are removed!`)}}var G=i(8356);class H{stashedNewWidgetsCalls=new Map;articleIDs=new Map;firstTime=!0;initializeEndlessMode(){t.Z.singlePage||this.activateUrlChangeListener()}constructor(){window.VUUKLE_PLATFORM||(window.newVuukleWidgets=this.generateNewVuukleWidgets.bind(this),window.newVuukleDefaultWidgets=this.generateWidgetsAtDefaultSelectors.bind(this))}activateUrlChangeListener(){let e=document.location.href.replace(document.location.search,"");setInterval(()=>{if(e!==document.location.href.replace(document.location.search,"")){let t=document.location.href.replace(document.location.search,"");e=t;let i=this.stashedNewWidgetsCalls.get(t);i&&(i(),this.stashedNewWidgetsCalls.delete(t))}},1e3)}async generateNewVuukleWidgets(s){if("scheduler"in window||await i.e("202").then(i.t.bind(i,6906,23)),!s.articleId)if(s.url)s.articleId=s.url;else throw Error("Article ID is required to create new Vuukle Widgets");if(s.img||(console.warn(`[Vuukle] Article with the id ${s.articleId} has missing img.`),s.img=""),s.title||(console.warn(`[Vuukle] Article with the id ${s.articleId} has missing title.`),s.title=""),s.tags&&Array.isArray(s.tags)&&(s.tags=s.tags.join(",")),s.tags&&"string"!=typeof s.tags&&(s.tags=""),!t.Z.apiKey)throw Error("âš  [VUUKLE] API key is missing in the VUUKLE_CONFIG");let a={...t.Z,articleId:s.articleId,author:s.author,img:s.img||"",tags:s.tags||"",title:s.title||"",url:s.url||""};o.Z.viewPageFired=!1;let n=()=>{let i=async()=>{try{let e=await F.createWidgetsCreatorInstance("-"+String(s.elementsIndex),a);new et("-"+String(s.elementsIndex),a,e.communicationCreator,e)}catch(t){(0,e.qu)("error",t.message)}scheduler.postTask(()=>{t.Z.noViewPage||o.Z.log("view_page",a)},{priority:"background"})};t.Z.singlePage?scheduler.postTask(()=>{i()}):this.firstTime?(scheduler.postTask(()=>{i()}),this.firstTime=!1):this.stashedNewWidgetsCalls.set(String(s.url),()=>{scheduler.postTask(()=>{i()})}),this.articleIDs.set(String(s.url),a.articleId||"")};"loading"!==document.readyState?scheduler.postTask(()=>{n()}):document.addEventListener("readystatechange",()=>{("interactive"===document.readyState||"complete"===document.readyState)&&scheduler.postTask(()=>{n()})})}async generateWidgetsAtDefaultSelectors(s){if("scheduler"in window||await i.e("202").then(i.t.bind(i,6906,23)),!s.articleId)if(s.url)s.articleId=s.url;else throw Error("Article ID is required to create new Vuukle Widgets");if(s.img||(console.warn(`[Vuukle] Article with the id ${s.articleId} has missing img.`),s.img=""),s.title||(console.warn(`[Vuukle] Article with the id ${s.articleId} has missing title.`),s.title=""),s.tags&&Array.isArray(s.tags)&&(s.tags=s.tags.join(",")),s.tags&&"string"!=typeof s.tags&&(s.tags=""),!t.Z.apiKey)throw Error("âš  [VUUKLE] API key is missing in the VUUKLE_CONFIG");let a={...t.Z,articleId:s.articleId,author:s.author,img:s.img||"",tags:s.tags||"",title:s.title||"",url:s.url||""};o.Z.viewPageFired=!1;try{let e=await F.createWidgetsCreatorInstance("",a);new et("",a,e.communicationCreator,e)}catch(t){(0,e.qu)("error",t.message)}scheduler.postTask(()=>{t.Z.noViewPage||o.Z.log("view_page",a)},{priority:"background"}),this.articleIDs.set(String(s.url),a.articleId||"")}}let J=new H,X={"ndtv.com":"ndtv.com_1"},Y=["1feb6d34-f2ca-4219-bff0-28be03a6d8da"];class ee{articleConfig;communicationsCreator;widgetsCreator;adblockDetector;adUnitCreator;static canRefreshAds=!0;static canCreateAds=!0;constructor(t,i,s,a){if(this.articleConfig=i,this.communicationsCreator=s,this.widgetsCreator=a,this.getLocation=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,s=i.document.querySelectorAll(e)[O.articleCounter-1];if(!s&&O.articleCounter-1!=0){let s=i.document.querySelectorAll(e);for(let e=O.articleCounter-1;e>=0;e--){let i=s[e];if(i&&!i.parentElement?.querySelector(`div[id*=${t}]`))return i}}return s&&!s.parentElement?.querySelector(`div[id*=${t}]`)?s:null},this.insertContainerDiv=(e,t,i,s,a)=>{let o=null;if("string"==typeof i)o=this.articleConfig.endlessMode?this.getLocation(i,s):document.querySelector(i);else if("function"==typeof i)o=i(a);else for(let e of i){let t=document.querySelector(e);if(t){o=t;break}}if(o)switch(t){case"after":o.insertAdjacentElement("afterend",e);break;case"before":o.insertAdjacentElement("beforebegin",e);break;case"prependInside":o.insertAdjacentElement("afterbegin",e);break;default:o.appendChild(e)}},(0,e.IW)(e.PP.adStart),(0,e.rX)(e.J8.platformStartToAdStart,e.PP.platformStart,e.PP.adStart),!i.apiKey||n.Z.isBot)return;if("false"===new URLSearchParams(window.location.search).get("vuuklead"))return void(0,e.qu)("log","%c [VUUKLE] ADs initialization blocked because of debugging key","background: #f66; color: #fff; padding: 5px;");l.xw[i.apiKey]?l.xw[i.apiKey].externalConfig?this.fetchAdvancedConfig(t):this.processAdvancedConfig(l.xw[i.apiKey],t):(l.xw[i.apiKey]={externalConfig:!0},this.fetchAdvancedConfig(t))}fetchAdvancedConfig(t){let i=()=>{l.xw[this.articleConfig.apiKey]={...l.xw[this.articleConfig.apiKey],...window.vuukleAdConfiguration}};if(window.vuukleAdConfiguration){i(),scheduler.postTask(()=>{this.processAdvancedConfig(window.vuukleAdConfiguration,t)});return}(0,A.fs)(`https://cdn.vuukle.com/domain-configs/${X[this.articleConfig.host]||this.articleConfig.host}.js`).then(()=>{window.vuukleAdConfiguration?(i(),scheduler.postTask(()=>{this.processAdvancedConfig(l.xw[this.articleConfig.apiKey],t)})):(0,e.qu)("error","Ad configuration for this host is missing")}).catch(()=>{let e=l.xw[this.articleConfig.apiKey];e&&(Object.keys(e).length>=2&&e.externalConfig||Object.keys(e).length>=1&&!e.externalConfig)&&scheduler.postTask(()=>{this.processAdvancedConfig(e,t)}),scheduler.postTask(()=>{Y.includes(this.articleConfig.apiKey)&&this.adblockDetector?.onAdblockDetected(),this.communicationsCreator&&this.communicationsCreator.checkForAdblockers(),o.Z.log("view_page",this.articleConfig)},{priority:"background"})})}getLocation;insertContainerDiv;applyQuizConfig(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0;this.widgetsCreator?.communicationCreator.applyQuizConfig(e,t,i)}configureVuukleSite(e){let t=(0,A.zd)()&&!(0,A.n0)()&&window.top?window.top:window;if("string"==typeof e.setVuukleSite&&(t.vuukleSite=e.setVuukleSite,window.vuukleSite=e.setVuukleSite),"object"==typeof e.setVuukleSite){let i=Object.keys(e.setVuukleSite),s=this.articleConfig.host.split(".").slice(-2).join("."),a=i.map(e=>e.split(".").slice(-2).join(".")).filter(e=>e===s),o={};i.forEach(t=>{if("object"==typeof e.setVuukleSite){let i=e.setVuukleSite[t];o[t.split(".").slice(-2).join(".")]=i}}),a[0]&&(t.vuukleSite=o[a[0]],window.vuukleSite=o[a[0]])}}insertWidgetsDynamically(e,t){if(!n.Z.userCountryDetermined)return void setTimeout(()=>this.insertWidgetsDynamically(e,t),100);e.widgets&&this.widgetsCreator&&(!e.widgets.widgetInsertionGeos||e.widgets?.widgetInsertionGeos&&e.widgets.widgetInsertionGeos.includes(n.Z.userCountry))&&!this.articleConfig.amp&&F.createWidgets(e.widgets,O.articleCounter,this.articleConfig,t,this.widgetsCreator);let i=P(n.Z.isMobileUser&&e.insertQuizAndAd?.quizOptions?.ignorePathsMobile?e.insertQuizAndAd?.quizOptions.ignorePathsMobile||[]:e.insertQuizAndAd?.quizOptions?.ignorePaths||[]),s=!e.insertQuizAndAd?.insertionGeos||e.insertQuizAndAd?.insertionGeos&&e.insertQuizAndAd.insertionGeos.includes(n.Z.userCountry),o=e.insertQuizAndAd?.excludedGeos&&e.insertQuizAndAd.excludedGeos.includes(n.Z.userCountry);e.insertQuizAndAd&&this.widgetsCreator&&s&&!o&&!this.articleConfig.amp&&!i&&F.createWidgets({preInsertionOperation:()=>{e.insertQuizAndAd?.quizOptions?.preQuizInsertionCallback&&e.insertQuizAndAd.quizOptions.preQuizInsertionCallback(t);let i=document.createElement("div");i.style.display="flex",i.style.flexWrap="wrap",i.style.backgroundColor="transparent",i.style.justifyContent="center",i.style.alignItems="center",n.Z.isMobileUser||(i.style.gap="10px"),i.id="vuukle-quiz-container".concat(t);let s=!!e.targets,a=e.targets&&Object.keys(e.targets).some(e=>e.includes("vuukle-ad"));if(s&&a){let e=document.createElement("style");e.innerHTML=`
                #${"vuukle-quiz-container".concat(t)} div[id*="vuukle-ad"] {
                  min-height: 250px;
                  min-width: 300px;
                }
              `,document.head.appendChild(e)}e.insertQuizAndAd?.containerDivOptions?.containerDivStyles&&(i.style.cssText+=e.insertQuizAndAd.containerDivOptions.containerDivStyles),e.insertQuizAndAd?.containerDivOptions?.customInsertionFunction?e.insertQuizAndAd.containerDivOptions.customInsertionFunction(i):this.insertContainerDiv(i,e.insertQuizAndAd?.quizOptions?.insert||"inside",n.Z.isMobileUser&&e.insertQuizAndAd?.quizOptions?.mobileSelector?e.insertQuizAndAd?.quizOptions?.mobileSelector:e.insertQuizAndAd?.quizOptions?.selector||"","vuukle-quiz-container",t)},quiz:{insert:"inside",selector:"#vuukle-quiz-container".concat(t)},postInsertionOperation:()=>{let i=document.querySelector(a.Z.selectors.quiz.concat(t))||document.querySelector(a.Z.selectors.quizAlt.concat(t));if(i){let t=i.querySelector("iframe");i.style.marginTop="16px",i.style.marginRight="1px",t&&(t.style.borderRadius="6px"),e.insertQuizAndAd?.quizOptions?.quizStyles&&(i.style.cssText+=e.insertQuizAndAd.quizOptions.quizStyles)}this.applyQuizConfig(e,!0,t)}},O.articleCounter,this.articleConfig,t,this.widgetsCreator)}trackFiveSecondExit(){let e=this.articleConfig;function t(){"hidden"===document.visibilityState&&o.Z.logPost("exit_5s",e,!0,e.endlessMode?[{key:"article_id",value:encodeURI(J.articleIDs.get(document.location.href)||"")}]:[])}window.addEventListener("visibilitychange",t),setTimeout(()=>window.removeEventListener("visibilitychange",t),5e3)}trackRenderedAds(t){if(t&&!n.Z.userCountryDetermined)return void setTimeout(()=>{this.trackRenderedAds(t)},100);if(t&&t.length>0&&t.includes(n.Z.userCountry))return;let i=()=>{window.googletag.pubads().addEventListener("slotRenderEnded",t=>{let i=t.slot;(0,e.qu)("log",`[Vuukle] Ad slot with id of ${i.getSlotElementId()} and ad unit path of ${i.getAdUnitPath()} has finished rendering`),i.getAdUnitPath().includes(0xcbe4096)||o.Z.log("gam_detect",this.articleConfig,[{key:"adDivId",value:i.getAdUnitPath()}])})};if(window.googletag?.pubads)i();else{let e=setInterval(()=>{window.googletag?.pubads&&(clearInterval(e),i())},200)}}applyConfigsInAMP(e,t){this.applyQuizConfig(e,!1,t),e.customQuizStyles&&this.widgetsCreator?.communicationCreator?.addCustomStylesQuiz(e.customQuizStyles)}async processAdvancedConfig(e,t){"boolean"==typeof e.gaEvents?R.sendGAEvents=e.gaEvents:("object"==typeof e.insertQuizAndAd||this.communicationsCreator?.isQuizOnThePage())&&(R.sendGAEvents=!0),scheduler.postTask(()=>{this.insertWidgetsDynamically(e,t)}),scheduler.postTask(()=>{e.showEmotesArticlesByDefault&&this.communicationsCreator&&this.communicationsCreator.showEmotesArticlesByDefault()});let n=document.querySelector(a.Z.selectors.comments.concat(t))||document.querySelector(a.Z.selectors.emotes.concat(t)),r=null!==document.querySelector(a.Z.selectors.comments.concat(t))&&this.articleConfig.comments.enabled,l=null!==document.querySelector(a.Z.selectors.emotes.concat(t))&&this.articleConfig.emotes.enabled,d=!0,c=!0,u=!0;if(scheduler.postTask(()=>{"boolean"==typeof e.showCWAudioButton&&this.communicationsCreator?.toggleAudioButton(e.showCWAudioButton)}),(!this.articleConfig.amp||!e.fireViewPageInAMP||o.Z.viewPageFired)&&(e.skipPageView||this.articleConfig.noViewPage||o.Z.viewPageFired)||scheduler.postTask(()=>{o.Z.log("view_page",this.articleConfig)},{priority:"background"}),e.hideAddVuukle&&scheduler.postTask(()=>{this.widgetsCreator?.communicationCreator.hideAddVuukle()}),e.hideVuukleLogoInFooter&&scheduler.postTask(()=>{this.widgetsCreator?.communicationCreator.hideVuukleLogoInFooter()}),e.track5s&&this.trackFiveSecondExit(),e.trackRenderedAds&&this.trackRenderedAds(e.trackRenderedAdsGeoExcludes),this.articleConfig.amp)return void scheduler.postTask(()=>{this.applyConfigsInAMP(e,""),this.loadAdConfiguration(this.articleConfig,e,null,!0,"")});if(scheduler.postTask(async()=>{e.CMP&&(await i.e("543").then(i.bind(i,2237))).default.loadCMP(e.CMP)}),e.blockKeywords&&(c=!z(this.articleConfig.url,e.blockKeywords)),e.blockAdsByTags&&this.articleConfig.tags&&((u=!z(this.articleConfig.tags,e.blockAdsByTags))||scheduler.postTask(()=>{o.Z.log("ads_false",this.articleConfig)},{priority:"background"})),d=u&&c,e.disableAdsOnPageVariable){let e=s.Z.get("publir_subscriber");"boolean"==typeof window.publir_show_ads&&(d=window.publir_show_ads),"1"===e&&(d=!1)}let h="boolean"==typeof this.articleConfig.ads&&!this.articleConfig.ads,g="object"==typeof this.articleConfig.ads&&!1===this.articleConfig.ads.enabled;if((h||g)&&(d=!1),"boolean"==typeof e.ads&&!1===e.ads&&(d=!1),ee.canCreateAds||(d=!1),e.setVuukleSite&&this.configureVuukleSite(e),e.quizCallToAction&&scheduler.postTask(()=>{this.communicationsCreator?.activateCTAInQuiz(e.quizCallToAction)}),d){if(this.loadAdConfiguration(this.articleConfig,e,n,r||l,t,()=>{e.targets&&e.waitForAdJson&&ee.loadPrebid(e.adUnit,e.prebid7)}),this.adUnitCreator=new O(e,this.articleConfig),e.targets&&(e.waitForAdJson||ee.loadPrebid(e.adUnit,e.prebid7),!e.skipAdblockCheck)){let t=await i.e("295").then(i.bind(i,2864));this.adblockDetector=new t.default(this.articleConfig,e,this.communicationsCreator),this.adblockDetector.loadAdblockerBait()}scheduler.postTask(()=>{this.communicationsCreator?.toggleAdSpaceCreation(!!e.targets)}),scheduler.postTask(()=>{if(!document.querySelector(a.Z.selectors.trafficExchange.concat(t))&&e.insertTX){let{insert:i,selector:s}=e.insertTX;this.adUnitCreator.insertTXInsideElement(i,s,t)}})}else scheduler.postTask(()=>{c&&u||o.Z.log("policy_bad",this.articleConfig)},{priority:"background"});if(e.CWBubblePosition&&this.communicationsCreator?.changeCommentsBubblePosition(e.CWBubblePosition),"boolean"==typeof e.CWBubblePersistence&&this.communicationsCreator?.changeCommentsBubblePersistence(e.CWBubblePersistence),e.customBQEvent){let t=document.querySelector(e.customBQEvent.trigger.elementClickSelector);t&&t.addEventListener("click",()=>{o.Z.log(e.customBQEvent?.eventName,this.articleConfig)})}this.applyQuizConfig(e,!1,t),e.customFont&&"string"==typeof e.customFont.fontFamily&&("string"==typeof e.customFont.url||"string"==typeof e.customFont.externalFontStylesheetLink)&&scheduler.postTask(()=>{this.widgetsCreator?.communicationCreator?.passCustomFontToWidgets(e.customFont)}),e.showEmotesArticlesByDefault&&scheduler.postTask(()=>{this.communicationsCreator?.showEmotesArticlesByDefault()}),e.customQuizStyles&&this.widgetsCreator?.communicationCreator?.addCustomStylesQuiz(e.customQuizStyles),e.commentsPanelTriggerElement&&this.widgetsCreator?.communicationCreator?.addCommentsPanelTrigger(e.commentsPanelTriggerElement)}static async loadPrebid(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prebid3",i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if(i){if(null===s.document.querySelector('head script[src="https://cdn.vuukle.com/static/prebid7.js"]')&&null===s.document.querySelector('head script[src="https://cdn.vuukle.com/static/main.js"]')){(0,e.IW)(e.PP.prebidLoadStart),(0,e.rX)(e.J8.adStartToPrebidLoadStart,e.PP.adStart,e.PP.prebidLoadStart),(0,e.rX)(e.J8.platformStartToPrebidLoadStart,e.PP.platformStart,e.PP.prebidLoadStart);try{await (0,A.fs)("https://cdn.vuukle.com/static/main.js",{},s),await (0,A.fs)("https://cdn.vuukle.com/static/prebid7.js",{},s),(0,e.IW)(e.PP.prebidLoadEnd),(0,e.rX)(e.J8.prebidStartToEnd,e.PP.prebidLoadStart,e.PP.prebidLoadEnd),(0,e.rX)(e.J8.platformStartToPrebidLoad,e.PP.platformStart,e.PP.prebidLoadEnd),Z.prebidLoaded=!0,(0,e.Gf)("info",!0,`Vuukle - ${(0,h.xz)()} [Platform.js] Prebid7 and main script loaded`),setTimeout(()=>{Z.initialPeriodPassed=!0},5e3)}catch(t){(0,e.IW)(e.PP.prebidLoadError),(0,e.rX)(e.J8.prebidStartToError,e.PP.prebidLoadStart,e.PP.prebidLoadError),(0,e.rX)(e.J8.platformStartToPrebidError,e.PP.platformStart,e.PP.prebidLoadError),Z.prebidBlocked=!0,Z.prebidLoaded=!0}}}else if(null===s.document.querySelector(`head script[src="https://cdn.vuukle.com/static/${t}.js"]`)){(0,e.IW)(e.PP.prebidLoadStart),(0,e.rX)(e.J8.adStartToPrebidLoadStart,e.PP.adStart,e.PP.prebidLoadStart),(0,e.rX)(e.J8.platformStartToPrebidLoadStart,e.PP.platformStart,e.PP.prebidLoadStart);try{await (0,A.fs)(`https://cdn.vuukle.com/static/${t}.js`,{},s),(0,e.IW)(e.PP.prebidLoadEnd),(0,e.rX)(e.J8.prebidStartToEnd,e.PP.prebidLoadStart,e.PP.prebidLoadEnd),(0,e.rX)(e.J8.platformStartToPrebidLoad,e.PP.platformStart,e.PP.prebidLoadEnd),Z.prebidLoaded=!0,(0,e.Gf)("info",!0,`Vuukle - ${(0,h.xz)()} [Platform.js] Prebid script loaded`),setTimeout(()=>{Z.initialPeriodPassed=!0},5e3)}catch(t){(0,e.IW)(e.PP.prebidLoadError),(0,e.rX)(e.J8.prebidStartToError,e.PP.prebidLoadStart,e.PP.prebidLoadError),(0,e.rX)(e.J8.platformStartToPrebidError,e.PP.platformStart,e.PP.prebidLoadError),Z.prebidBlocked=!0,Z.prebidLoaded=!0}}}loadAdConfiguration(t,i,s,a,o,r){(0,e.IW)(e.PP.adConfigLoadStart),(0,e.rX)(e.J8.adStartToConfigLoadStart,e.PP.adStart,e.PP.adConfigLoadStart);let l=(0,A.zd)()&&!(0,A.n0)()&&window.top?window.top:window;if(window._vuukleConfig||l._vuukleConfig){r?.(),this.processAdConfiguration(window._vuukleConfig||l._vuukleConfig,i,s,t,a,o);return}let d=(0,g._2)(`vuukleconfhttps://cdn.vuukle.com/ads/${i.setVuukleSite?l.vuukleSite:t.host}.json`),c=(0,g._2)(`vuukleconftimehttps://cdn.vuukle.com/ads/${i.setVuukleSite?l.vuukleSite:t.host}.json`);if(d&&c)try{let e=JSON.parse(d);if(new Date().valueOf()-Number(c)<18e5){r?.(),this.processAdConfiguration(e.data,i,s,t,a,o);return}}catch(t){(0,e.qu)("error",t)}let u=d=>{let c=()=>{(0,g.ti)(`vuukleconfhttps://cdn.vuukle.com/ads/${i.setVuukleSite?l.vuukleSite:t.host}.json`,JSON.stringify({time:new Date().valueOf(),data:d})),(0,g.ti)(`vuukleconftimehttps://cdn.vuukle.com/ads/${i.setVuukleSite?l.vuukleSite:t.host}.json`,new Date().valueOf().toString())};window._vuukleConfig=d,l._vuukleConfig=d,r?.(),n.Z.canUseCookies?c():n.Z.addStorageUpdateCallback(()=>{c()}),(0,e.IW)(e.PP.adConfigLoadEnd),(0,e.rX)(e.J8.adStartToConfigLoadEnd,e.PP.adConfigLoadStart,e.PP.adConfigLoadEnd),(0,e.rX)(e.J8.platformStartToAdConfigLoadEnd,e.PP.platformStart,e.PP.adConfigLoadEnd),this.processAdConfiguration(d,i,s,t,a,o)},h=i=>{let s=new XMLHttpRequest;s.open("GET",i,!0),s.setRequestHeader("Content-Type","text/plain"),s.send(),s.onreadystatechange=()=>{if(4===s.readyState&&200===s.status){let e=JSON.parse(s.responseText);e.errors&&"no_cache"===e.errors[0]?h(`https://api.vuukle.com/api/v1/AdsJson/fillKVcacheForHost?host=${t.host}`):u(e)}else 200!==s.status&&((0,e.IW)(e.PP.adConfigLoadError),(0,e.rX)(e.J8.adConfigStartToError,e.PP.adConfigLoadStart,e.PP.adConfigLoadError),(0,e.rX)(e.J8.platformStartToAdConfigLoadError,e.PP.platformStart,e.PP.adConfigLoadError))},s.onerror=()=>{Y.includes(t.apiKey)&&this.adblockDetector?.onAdblockDetected()}};h(`https://cdn.vuukle.com/ads/${i.setVuukleSite?l.vuukleSite:t.host}.json`)}async processAdConfiguration(t,s,a,o,r,d){if(window._vuukleConfig||(window._vuukleConfig=t),"boolean"==typeof t.noGpt&&(Z.noGPT=t.noGpt),o.amp)return;O.canCreateTXAds=!t.noAdsTX;let c=l.xw[o.apiKey];t.disableAdRefresh&&(ee.canRefreshAds=!1);let u=()=>{let e=c.targets&&Object.values(c.targets).some(e=>e.adUnitExcludedGeos||e.adUnitGeos);if(!n.Z.userCountryDetermined&&t.excludedAds&&e)return void setTimeout(u,100);t.excludedAds&&t.excludedAds[n.Z.userCountry]&&t.excludedAds[n.Z.userCountry].forEach(e=>{delete c.targets?.[e]}),scheduler.postTask(()=>{this.adUnitCreator.createAdvancedAd(a,r,d)},{priority:"user-blocking"}),scheduler.postTask(()=>{c.excludeAdSenseRefreshFrom&&c.excludeAdSenseRefreshFrom?.includes(o.host)||this.adUnitCreator.findAndReplaceAdSenseUnits(d),this.adUnitCreator.findAndReplaceExistingAdUnits(d)}),scheduler.postTask(()=>{if(c.targets){let e=[],t={},i={};Object.entries(c.targets).forEach(s=>{let[a,o]=s;o.replaceAdOnPage&&o.replaceAdOnPage.adDivId&&(e.push(o.replaceAdOnPage.adDivId),e.push(a),t[o.replaceAdOnPage.adDivId]=a,t[a]=a,i[o.replaceAdOnPage.adDivId]=o.replaceAdOnPage.inViewRefreshPercentage||50,i[a]=o.replaceAdOnPage.inViewRefreshPercentage||50)}),e.length>0&&this.adUnitCreator.replaceAdsWhenInView(e,t,i,d)}}),scheduler.postTask(()=>{c.customAdRefresh&&this.adUnitCreator.performCustomAdRefreshes(c.customAdRefresh,d)}),c.iframeIDForPlatformInjection&&setTimeout(async()=>{let e=await (0,A.br)(`iframe[id="${c.iframeIDForPlatformInjection}"]`,1e3,20);if(e&&e.contentDocument&&e.contentWindow){e.contentWindow.VUUKLE_CONFIG=this.articleConfig;let t=e.contentDocument.createElement("script");t.src="https://cdn.vuukle.com/platform.js",e.contentDocument.head.appendChild(t),e.style.minWidth=n.Z.isMobileUser?"300px":"650px",e.style.minHeight=n.Z.isMobileUser?"700px":"350px"}},0)};if(scheduler.postTask(()=>{u()},{priority:"user-blocking"}),scheduler.postTask(async()=>{t.videoPlayer&&(t.videoPlayer.countryExclude&&t.videoPlayer.countryExclude.includes(n.Z.userCountry)||("boolean"==typeof t.videoPlayer.onlyDesktop?(t.videoPlayer.onlyDesktop&&!n.Z.isMobileUser&&new(await i.e("897").then(i.bind(i,5998))).default(t.videoPlayer.aniviewID),!t.videoPlayer.onlyDesktop&&n.Z.isMobileUser&&new(await i.e("897").then(i.bind(i,5998))).default(t.videoPlayer.aniviewID)):new(await i.e("897").then(i.bind(i,5998))).default(t.videoPlayer.aniviewID)))}),scheduler.postTask(()=>{t.emotesAd&&(t.emotesAd.countryInclude&&t.emotesAd.countryInclude.length>0?t.emotesAd.countryInclude?.includes(n.Z.userCountry)&&this.communicationsCreator?.sendAdToEmotes(t.emotesAd.emotesSlot,t.emotesAd.imageUrl,t.emotesAd.clickUrl,t.emotesAd.label):this.communicationsCreator?.sendAdToEmotes(t.emotesAd.emotesSlot,t.emotesAd.imageUrl,t.emotesAd.clickUrl,t.emotesAd.label))}),scheduler.postTask(()=>{t.audioAdID&&this.communicationsCreator?.enableAudioAds(t.audioAdID)}),scheduler.postTask(()=>{(t.stickyAd||t.extraStickyAds)&&this.processStickyAdConfigs(t,c,o,d)}),scheduler.postTask(async()=>{s.sovrnBeacon&&new(await i.e("225").then(i.bind(i,9525))).default}),scheduler.postTask(async()=>{s.enableGeoEdge&&new(await i.e("253").then(i.bind(i,9370))).default}),scheduler.postTask(async()=>{if(s.INTLAd){let e=n.Z.isMobileUser&&s.INTLAd.ignorePathsMobile?s.INTLAd.ignorePathsMobile:s.INTLAd.ignorePaths;if(!s.INTLAd.ignorePaths||!s.INTLAd.ignorePathsMobile||e&&!P(e)){let e=s.targets?.[s.INTLAd.adId]?.gptNumber||M(s.INTLAd.adId);new(await i.e("524").then(i.bind(i,8512))).default(s.INTLAd.adId,s.INTLAd.desktopOnly,s.INTLAd.mobileOnly,t.INTLFreqCap||2,e,s.targets?.[s.INTLAd.adId]?.gptId),this.adUnitCreator.createAdAtCustomLocation(document.querySelector(`#${s.INTLAd.adId}`),s.INTLAd.adId,e,s.targets?.[s.INTLAd.adId]?.gptId,d)}}}),scheduler.postTask(async()=>{s.inImageAd&&new(await i.e("153").then(i.bind(i,8576))).default(s.inImageAd.slotId,s.inImageAd.activeGeos)}),s.fpd&&s.network_code){let e=await (0,G.$f)("GET",`https://cdn.vuukle.com/ads/quizzly/${this.articleConfig.apiKey}.json`,void 0,"application/json");e.audience_segments&&this.widgetsCreator?.communicationCreator?.enableAudienceTrackingPixel(s.network_code,e.audience_segments)}(0,e.IW)(e.PP.adEnd),(0,e.rX)(e.J8.adStartToEnd,e.PP.adStart,e.PP.adEnd),(0,e.rX)(e.J8.platformStartToAdEnd,e.PP.platformStart,e.PP.adEnd)}processStickyAdConfigs(e,t,s,a){let o=async o=>{let r=o.countryInclude&&o.countryInclude.length>0,l=o.countryInclude?.includes(n.Z.userCountry);if(r&&!l)return;let d="center"===o.stickyAdPosition||"top"===o.stickyAdPosition||!o.stickyAdPosition,c=null;o.divId?((c=document.createElement("div")).id=o.divId,document.body.appendChild(c)):o.targetDivId&&(c=document.getElementById(o.targetDivId));let u=o.targetDivId||o.divId||"",h=t.targets?.[u]?.gptNumber||M(u);if(this.adUnitCreator.createAdAtCustomLocation(c,u,h,t.targets?.[u]?.gptId,a),c){let t=e.hideStickyAdOn||o&&o.hideStickyAdOn;new(await i.e("790").then(i.bind(i,5025))).default(s,c,u,{height:d?90:250,mobilePosition:o.stickyAdMobilePosition,position:o.stickyAdPosition,width:d?728:300,showAfter:o.showStickyAfter,hideOnScroll:o.hideOnScroll},t)}};e.stickyAd&&o(e.stickyAd),e.extraStickyAds&&e.extraStickyAds.forEach(e=>{o(e)})}}let et=ee;if(window.vuukleLogin=async e=>{if(r.Z.setSSOInfo(!0),void 0===e){r.Z.removeToken(),r.Z.fireSSOLogoutListeners();return}if("string"!=typeof e||"string"==typeof e&&""===e.trim()||null===e)return console.error("[Vuukle] vuukleLogin has been called with invalid argument. Please pass it a string.");try{let t=await (0,G.$f)("POST","https://api.vuukle.com/api/v1/Auth/siteLogin",e,"application/json");if(t.token)r.Z.saveToken(t.token),r.Z.fireTokenListeners(t.token);else throw Error("Server response doesn't contain profile token")}catch(e){console.error("[VUUKLE] SSO Authentication Error:",e)}},window.vuukleAuthUser=(e,t)=>{!(window.location.host&&window.location.host.match("americanthinker.com"))&&(e&&t&&"string"==typeof e&&"string"==typeof t||console.warn(`\u{26A0}\u{FE0F}[VUUKLE]: SSO wasn't successful. Please provide valid user details: name: string, email: string`))},window.newVuukleWidgets=window.newVuukleWidgets||function(e){window.tempVuukleWidgets=e},void 0==="".matchAll&&1!==window.VUUKLE_LEGACY_PLATFORM)throw function(e){if(void 0==="".matchAll){delete window.VUUKLE_PLATFORM;var t=document.createElement("script");t.src=e,t.async=!0,document.head.appendChild(t)}}("https://cdn.vuukle.com/platform.legacy.js"),window.VUUKLE_LEGACY_PLATFORM=1,Error("âš ï¸[VUUKLE] Old browser detected, loading legacy version of platform.js");if(1===window.VUUKLE_PLATFORM)throw Error("âš ï¸[VUUKLE] Vuukle is already defined.");if(window.VUUKLE_PLATFORM=1,"scheduler"in window||i.e("202").then(i.t.bind(i,6906,23)),(0,e.N5)("Platform"),(0,e.IW)(e.PP.platformStart),l.g7.indexOf(t.Z.apiKey)>-1)throw Error("Your domain has been blocked, please contact support[at]vuukle.com to get it unblocked");function ei(){t.Z.endlessMode||scheduler.postTask(async()=>{try{let e=await F.createWidgetsCreatorInstance("",t.Z);new et("",t.Z,e.communicationCreator,e)}catch(t){(0,e.qu)("error",t.message)}}),scheduler.postTask(()=>{let e="boolean"==typeof t.Z.ads&&!t.Z.ads,i="object"==typeof t.Z.ads&&!1===t.Z.ads.enabled;(e||i)&&o.Z.log("ads_false",t.Z)},{priority:"background"}),t.Z.endlessMode&&scheduler.postTask(()=>{J.initializeEndlessMode()})}if(l.xw[t.Z.apiKey]?.track5s){function es(){"hidden"===document.visibilityState&&o.Z.logPost("exit_5s",t.Z,!0,t.Z.endlessMode?[{key:"article_id",value:encodeURI(J.articleIDs.get(document.location.href)||"")}]:[])}window.addEventListener("visibilitychange",es),setTimeout(()=>window.removeEventListener("visibilitychange",es),5e3)}function ea(e){if("scheduler"in window)e();else{let t=setInterval(()=>{"scheduler"in window&&(clearInterval(t),e())},50)}}if(window.removeVuukleWidgets=e=>{F.removeWidgets("-"+e)},window.generateVuukleAds=e=>{new et(e?"-"+e:"",t.Z)},console.log("%c[VUUKLE] platform.js version: 3.61.10. Need help? Reach us at support[at]vuukle[dot]com","color:#039BE5;"),window.tempVuukleWidgets&&(window.newVuukleWidgets(window.tempVuukleWidgets),window.tempVuukleWidgets=void 0),document.addEventListener("click",e=>{let i=e.target;for(;i&&(void 0===i.tagName||"a"!=i.tagName.toLowerCase()||!i.href);)i=i.parentNode;if(i&&i.href&&i.host&&i.host!==location.host){let s=[{key:"refDomain",value:i.host}];t.Z.endlessMode&&s.push({key:"article_id",value:encodeURI(J.articleIDs.get(document.location.href)||"")}),!e.defaultPrevented&&(o.Z.log("view_exit",t.Z,s),(!i.target||i.target.match(/^_(self|parent|top)$/i))&&(setTimeout(()=>{location.href=i.href},150),e.preventDefault()))}}),(0,e.Ln)("Platform"),(0,e.rX)(e.J8.platformStartToLog,e.PP.platformStart,void 0),l.xw[t.Z.apiKey]?.initAfterScroll)window.addEventListener("scroll",function e(){l.xw[t.Z.apiKey]?.initAfterScrollPixels?window.scrollY>=l.xw[t.Z.apiKey]?.initAfterScrollPixels&&(ea(()=>{scheduler.postTask(()=>{ei()})}),window.removeEventListener("scroll",e)):(ea(()=>{scheduler.postTask(()=>{ei()})}),window.removeEventListener("scroll",e))});else if("loading"!==document.readyState)ea(()=>{scheduler.postTask(()=>{ei()})});else{let e=!1;document.addEventListener("readystatechange",()=>{"interactive"!==document.readyState&&"complete"!==document.readyState||e||ea(()=>{e=!0,scheduler.postTask(()=>{ei()})})})}})()})();